<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: Rpmts Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul>
</div>
<h1>Rpmts Class Reference</h1><!-- doxytag: class="Rpmts" -->A python rpm.ts object represents an RPM transaction set.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A python rpm.ts object represents an RPM transaction set. 
<p>
The transaction set is the workhorse of RPM. It performs the installation and upgrade of packages. The rpm.ts object is instantiated by the TransactionSet function in the rpm module.<p>
The TransactionSet function takes two optional arguments. The first argument is the root path. The second is the verify signature disable flags, a set of the following bits:<p>
<ul>
<li><a class="el" href="rpmts_8h.html#fc1205ee0cb2823a3f14eecc2be47595f04f76ba06bbfb3eac820b09bf7e0349">rpm.RPMVSF_NOHDRCHK</a> if set, don't check rpmdb headers</li><li><a class="el" href="rpmts_8h.html#fc1205ee0cb2823a3f14eecc2be47595584590c94db6efba20aa1af6e8699b70">rpm.RPMVSF_NEEDPAYLOAD</a> if not set, check header+payload (if possible)</li><li><a class="el" href="rpmts_8h.html#fc1205ee0cb2823a3f14eecc2be47595895ab019bfffcdb3192bd9a6f70b1d22">rpm.RPMVSF_NOSHA1HEADER</a> if set, don't check header SHA1 digest</li><li><a class="el" href="rpmts_8h.html#fc1205ee0cb2823a3f14eecc2be47595d12f7fb89351cfdc237becc7a7603451">rpm.RPMVSF_NODSAHEADER</a> if set, don't check header DSA signature</li><li><a class="el" href="rpmts_8h.html#fc1205ee0cb2823a3f14eecc2be47595c047af09dd60044614dd00fb987779aa">rpm.RPMVSF_NOMD5</a> if set, don't check header+payload MD5 digest</li><li><a class="el" href="rpmts_8h.html#fc1205ee0cb2823a3f14eecc2be475952d22c8e4e98536570bcb33006782ac41">rpm.RPMVSF_NODSA</a> if set, don't check header+payload DSA signature</li><li><a class="el" href="rpmts_8h.html#fc1205ee0cb2823a3f14eecc2be47595f722f3fc9d16991f06d0d7fd99e05795">rpm.RPMVSF_NORSA</a> if set, don't check header+payload RSA signature</li></ul>
<p>
For convenience, there are the following masks:<ul>
<li><a class="el" href="rpmts_8h.html#6583df29610ae7f15725f31c72206bd2">rpm._RPMVSF_NODIGESTS</a> if set, don't check digest(s).</li><li><a class="el" href="rpmts_8h.html#c23e7c09aeec6adb628e5d8c5eeee628">rpm._RPMVSF_NOSIGNATURES</a> if set, don't check signature(s).</li></ul>
<p>
A rpm.ts object has the following methods:<p>
<ul>
<li>addInstall(hdr,data,mode) Add an install element to a transaction set. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hdr</em>&nbsp;</td><td>the header to be added </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>user data that will be passed to the transaction callback during transaction execution </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>optional argument that specifies if this package should be installed ('i'), upgraded ('u'), or if it is just available to the transaction when computing dependencies but no action should be performed with it ('a').</td></tr>
  </table>
</dl>
</li><li>addErase(name) Add an erase element to a transaction set. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structname.html">name</a></em>&nbsp;</td><td>the package <a class="el" href="structname.html">name</a> to be erased</td></tr>
  </table>
</dl>
</li><li><a class="el" href="ldebug_8c.html#1610bb24a397845b5c3eff2c152b23a5">check()</a> Perform a dependency check on the transaction set. After headers have been added to a transaction set, a dependency check can be performed to make sure that all package dependencies are satisfied. <dl class="return" compact><dt><b>Returns:</b></dt><dd>None If there are no unresolved dependencies Otherwise a list of complex tuples is returned, one tuple per unresolved dependency, with The format of the dependency tuple is: ((packageName, packageVersion, packageRelease), (reqName, reqVersion), needsFlags, suggestedPackage, sense) packageName, packageVersion, packageRelease are the <a class="el" href="structname.html">name</a>, version, and release of the package that has the unresolved dependency or conflict. The reqName and reqVersion are the <a class="el" href="structname.html">name</a> and version of the requirement or conflict. The needsFlags is a bitfield that describes the versioned nature of a requirement or conflict. The constants <a class="el" href="rpmlib_8h.html#4e838340e1a594afcd39d47b94b27095e22dbb27e00aad5fb0295e17620b2690">rpm.RPMSENSE_LESS</a>, <a class="el" href="rpmlib_8h.html#4e838340e1a594afcd39d47b94b2709591c6dd1a4b6f3abf7cc0c3689445c4c0">rpm.RPMSENSE_GREATER</a>, and <a class="el" href="rpmlib_8h.html#4e838340e1a594afcd39d47b94b270954d816be7cb1f462af0337fd4acb1985e">rpm.RPMSENSE_EQUAL</a> can be logical ANDed with the needsFlags to get versioned dependency information. suggestedPackage is a tuple if the dependency check was aware of a package that solves this dependency problem when the dependency check was run. Packages that are added to the transaction set as "available" are examined during the dependency check as possible dependency solvers. The tuple contains two values, (header, suggestedName). These are set to the header of the suggested package and its <a class="el" href="structname.html">name</a>, respectively. If there is no known package to solve the dependency problem, suggestedPackage is None. The constants <a class="el" href="rpmts-py_8h.html#0f7624c2e8bbd6066a1398b03ffe0f6a10af8cb07c64e1a4dc52e74f43d2974f">rpm.RPMDEP_SENSE_CONFLICTS</a> and <a class="el" href="rpmts-py_8h.html#0f7624c2e8bbd6066a1398b03ffe0f6a6b1fd386dbbea98cdf839d05e9a977de">rpm.RPMDEP_SENSE_REQUIRES</a> are set to show a dependency as a requirement or a conflict.</dd></dl>
</li><li>ts.order() Do a topological sort of added element relations. <dl class="return" compact><dt><b>Returns:</b></dt><dd>None</dd></dl>
</li><li>ts.setFlags(transFlags) Set transaction set flags. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>transFlags</em>&nbsp;</td><td>- bit(s) to controll transaction operations. The following values can be logically OR'ed together:<ul>
<li><a class="el" href="rpmlib_8h.html#451385c9472c6ccc583867853442e2efa9bb9b18c2c6c8fef92cf0c826e377c0">rpm.RPMTRANS_FLAG_TEST</a> - test mode, do not modify the RPM database, change any files, or run any package scripts</li><li><a class="el" href="rpmlib_8h.html#451385c9472c6ccc583867853442e2ef77575d53650b37c6eaaf2cbbbe3fa5b3">rpm.RPMTRANS_FLAG_BUILD_PROBS</a> - only build a list of problems encountered when attempting to run this transaction set</li><li><a class="el" href="rpmlib_8h.html#451385c9472c6ccc583867853442e2ef1b2c7668caafc57e64a1e25735d75a11">rpm.RPMTRANS_FLAG_NOSCRIPTS</a> - do not execute package scripts</li><li><a class="el" href="rpmlib_8h.html#451385c9472c6ccc583867853442e2efd663fb501d4b54058f704c76cd8a48f1">rpm.RPMTRANS_FLAG_JUSTDB</a> - only make changes to the rpm database, do not modify files.</li><li><a class="el" href="rpmlib_8h.html#451385c9472c6ccc583867853442e2ef5388ce6f16a1b47ec5b4de483d9563c4">rpm.RPMTRANS_FLAG_NOTRIGGERS</a> - do not run trigger scripts</li><li><a class="el" href="rpmlib_8h.html#451385c9472c6ccc583867853442e2ef720f21009132b5d930e2de934fd87827">rpm.RPMTRANS_FLAG_NODOCS</a> - do not install files marked as doc</li><li><a class="el" href="rpmlib_8h.html#451385c9472c6ccc583867853442e2ef3a8ca714d0ea4ab071d5546590b18c3d">rpm.RPMTRANS_FLAG_ALLFILES</a> - create all files, even if a file is marked config(missingok) and an upgrade is being performed.</li><li><a class="el" href="rpmlib_8h.html#451385c9472c6ccc583867853442e2ef8cac06db10b902bf6007f2a74b547281">rpm.RPMTRANS_FLAG_KEEPOBSOLETE</a> - do not remove obsoleted packages. </li></ul>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>previous transFlags</dd></dl>
</li><li>ts.setProbFilter(ignoreSet) Set transaction set problem filter. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>problemSetFilter</em>&nbsp;</td><td>- control bit(s) to ignore classes of problems, a logical or of one or more of the following bit(s):<ul>
<li><a class="el" href="rpmlib_8h.html#bb6103eff013f34a8fa2f11377227993a54976b2c31db62dcbcdc0965c4c6312">rpm.RPMPROB_FILTER_IGNOREOS</a> -</li><li><a class="el" href="rpmlib_8h.html#bb6103eff013f34a8fa2f11377227993b82bc5dcd5f2df52d5f717c6a35bb23d">rpm.RPMPROB_FILTER_IGNOREARCH</a> -</li><li><a class="el" href="rpmlib_8h.html#bb6103eff013f34a8fa2f11377227993778dd1e0c786a1d6afc39600b49d0e79">rpm.RPMPROB_FILTER_REPLACEPKG</a> -</li><li><a class="el" href="rpmlib_8h.html#bb6103eff013f34a8fa2f11377227993608cb5c2b78fe7902f974a328fb01b63">rpm.RPMPROB_FILTER_FORCERELOCATE</a> -</li><li><a class="el" href="rpmlib_8h.html#bb6103eff013f34a8fa2f11377227993c3bfd3548f7a0078554a0cc1c0cbadd4">rpm.RPMPROB_FILTER_REPLACENEWFILES</a> -</li><li><a class="el" href="rpmlib_8h.html#bb6103eff013f34a8fa2f113772279931ecbe270445e743ab6f23a259e30c103">rpm.RPMPROB_FILTER_REPLACEOLDFILES</a> -</li><li><a class="el" href="rpmlib_8h.html#bb6103eff013f34a8fa2f11377227993129ce141be9ae0a0a861524a853a9ec2">rpm.RPMPROB_FILTER_OLDPACKAGE</a> -</li><li><a class="el" href="rpmlib_8h.html#bb6103eff013f34a8fa2f1137722799370396502b125e9bc3dd1d7a9cd874fa3">rpm.RPMPROB_FILTER_DISKSPACE</a> - </li></ul>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>previous ignoreSet</dd></dl>
</li><li>ts.run(callback,data) Attempt to execute a transaction set. After the transaction set has been populated with install/upgrade or erase actions, the transaction set can be executed by invoking the ts.run() method. </li></ul>

<p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>python/<a class="el" href="rpmts-py_8c-source.html">rpmts-py.c</a></ul>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:57 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
