<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: lua/lstate.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>lua/lstate.h</h1><a href="lstate_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">** $Id: lstate.h,v 1.2 2004/03/23 05:09:14 jbj Exp $</span>
<a name="l00003"></a>00003 <span class="comment">** Global State</span>
<a name="l00004"></a>00004 <span class="comment">** See Copyright Notice in lua.h</span>
<a name="l00005"></a>00005 <span class="comment">*/</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef lstate_h</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#define lstate_h</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "lua.h"</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#include "<a class="code" href="lobject_8h.html">lobject.h</a>"</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="ltm_8h.html">ltm.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "<a class="code" href="lzio_8h.html">lzio.h</a>"</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="comment">/*</span>
<a name="l00018"></a>00018 <span class="comment">** macros for thread synchronization inside Lua core machine:</span>
<a name="l00019"></a>00019 <span class="comment">** all accesses to the global state and to global objects are synchronized.</span>
<a name="l00020"></a>00020 <span class="comment">** Because threads can read the stack of other threads</span>
<a name="l00021"></a>00021 <span class="comment">** (when running garbage collection),</span>
<a name="l00022"></a>00022 <span class="comment">** a thread must also synchronize any write-access to its own stack.</span>
<a name="l00023"></a>00023 <span class="comment">** Unsynchronized accesses are allowed only when reading its own stack,</span>
<a name="l00024"></a>00024 <span class="comment">** or when reading immutable fields from global objects</span>
<a name="l00025"></a>00025 <span class="comment">** (such as string values and udata values). </span>
<a name="l00026"></a>00026 <span class="comment">*/</span>
<a name="l00027"></a>00027 <span class="preprocessor">#ifndef lua_lock</span>
<a name="l00028"></a><a class="code" href="lstate_8h.html#7582eb1037ffa74e10b95742eaa0d7b9">00028</a> <span class="preprocessor"></span><span class="preprocessor">#define lua_lock(L)     ((void) 0)</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#ifndef lua_unlock</span>
<a name="l00032"></a><a class="code" href="lstate_8h.html#f2215766739b62cf0b516296db32df0d">00032</a> <span class="preprocessor"></span><span class="preprocessor">#define lua_unlock(L)   ((void) 0)</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="preprocessor">#ifndef lua_userstateopen</span>
<a name="l00037"></a><a class="code" href="lstate_8h.html#ed73531eefaec1aca9352d7ff915382b">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define lua_userstateopen(l)</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="keyword">struct </span><a class="code" href="structlua__longjmp.html">lua_longjmp</a>;  <span class="comment">/* defined in ldo.c */</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="comment">/* default meta table (both for tables and udata) */</span>
<a name="l00046"></a><a class="code" href="lstate_8h.html#198678940676ff4d8ea6f54eff8caffc">00046</a> <span class="preprocessor">#define defaultmeta(L)  (&amp;G(L)-&gt;_defaultmeta)</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a>00048 <span class="comment">/* table of globals */</span>
<a name="l00049"></a><a class="code" href="lstate_8h.html#8bba35a935dda83dfaed658080d21dbd">00049</a> <span class="preprocessor">#define gt(L)   (&amp;L-&gt;_gt)</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 <span class="comment">/* registry */</span>
<a name="l00052"></a><a class="code" href="lstate_8h.html#d6948ce82a6a8470040a7daa96f2f664">00052</a> <span class="preprocessor">#define registry(L)     (&amp;G(L)-&gt;_registry)</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="comment">/* extra stack space to handle TM calls and some other extras */</span>
<a name="l00056"></a><a class="code" href="lstate_8h.html#6b211398fb72bfeed719c2b7fb51bb40">00056</a> <span class="preprocessor">#define EXTRA_STACK   5</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00058"></a>00058 
<a name="l00059"></a><a class="code" href="lstate_8h.html#c8821f70d9e3e7ae5ba40e69108186e8">00059</a> <span class="preprocessor">#define BASIC_CI_SIZE           8</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span>
<a name="l00061"></a><a class="code" href="lstate_8h.html#8eeaf8191978cafceaa0cc2add1a84c1">00061</a> <span class="preprocessor">#define BASIC_STACK_SIZE        (2*LUA_MINSTACK)</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 
<a name="l00065"></a><a class="code" href="structstringtable.html">00065</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structstringtable.html">stringtable</a> {
<a name="l00066"></a>00066 <span class="comment">/*@null@*/</span>
<a name="l00067"></a><a class="code" href="structstringtable.html#c4604983cf555c228d0c60cfb4bef55b">00067</a>   <a class="code" href="unionGCObject.html">GCObject</a> **<a class="code" href="structstringtable.html#c4604983cf555c228d0c60cfb4bef55b">hash</a>;
<a name="l00068"></a><a class="code" href="structstringtable.html#a9231a820091a7b72affaa26b3f376aa">00068</a>   <a class="code" href="llimits_8h.html#7f84a6e6a8663db11348886473b38a7f">ls_nstr</a> <a class="code" href="structstringtable.html#a9231a820091a7b72affaa26b3f376aa">nuse</a>;  <span class="comment">/* number of elements */</span>
<a name="l00069"></a><a class="code" href="structstringtable.html#50f7dc76c195b879355cfe46cddd81ff">00069</a>   <span class="keywordtype">int</span> <a class="code" href="structstringtable.html#50f7dc76c195b879355cfe46cddd81ff">size</a>;
<a name="l00070"></a>00070 } <a class="code" href="structstringtable.html">stringtable</a>;
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="comment">/*</span>
<a name="l00074"></a>00074 <span class="comment">** informations about a call</span>
<a name="l00075"></a>00075 <span class="comment">*/</span>
<a name="l00076"></a><a class="code" href="structCallInfo.html">00076</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCallInfo.html">CallInfo</a> {
<a name="l00077"></a>00077 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00078"></a><a class="code" href="structCallInfo.html#96607192c3b46091f5e77e5a19771e13">00078</a>   <a class="code" href="structlua__TObject.html">StkId</a> <a class="code" href="structCallInfo.html#96607192c3b46091f5e77e5a19771e13">base</a>;  <span class="comment">/* base for called function */</span>
<a name="l00079"></a>00079 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00080"></a><a class="code" href="structCallInfo.html#ccba2ec65da709edd35505be21ec0d66">00080</a>   <a class="code" href="structlua__TObject.html">StkId</a> <a class="code" href="structCallInfo.html#ccba2ec65da709edd35505be21ec0d66">top</a>;  <span class="comment">/* top for this function */</span>
<a name="l00081"></a><a class="code" href="structCallInfo.html#7fc380ecc20c791cbe1da8c9f6622455">00081</a>   <span class="keywordtype">int</span> <a class="code" href="structCallInfo.html#7fc380ecc20c791cbe1da8c9f6622455">state</a>;  <span class="comment">/* bit fields; see below */</span>
<a name="l00082"></a>00082   <span class="keyword">union </span>{
<a name="l00083"></a>00083     <span class="keyword">struct </span>{  <span class="comment">/* for Lua functions */</span>
<a name="l00084"></a>00084 <span class="comment">/*@observer@*/</span>
<a name="l00085"></a><a class="code" href="structCallInfo.html#dda970825352f9e01ccff89fd5b87817">00085</a>       <span class="keyword">const</span> <a class="code" href="llimits_8h.html#cca3addb395457bf751bd428dad257b0">Instruction</a> *<a class="code" href="structCallInfo.html#dda970825352f9e01ccff89fd5b87817">savedpc</a>;
<a name="l00086"></a>00086 <span class="comment">/*@observer@*/</span>
<a name="l00087"></a><a class="code" href="structCallInfo.html#dbaefef07d0bc5d6a1e7cd20a6be4799">00087</a>       <span class="keyword">const</span> <a class="code" href="llimits_8h.html#cca3addb395457bf751bd428dad257b0">Instruction</a> **<a class="code" href="structCallInfo.html#dbaefef07d0bc5d6a1e7cd20a6be4799">pc</a>;  <span class="comment">/* points to `pc' variable in `luaV_execute' */</span>
<a name="l00088"></a><a class="code" href="structCallInfo.html#53141f678da0d29b0b2cd766e044e706">00088</a>       <span class="keywordtype">int</span> <a class="code" href="structCallInfo.html#53141f678da0d29b0b2cd766e044e706">tailcalls</a>;  <span class="comment">/* number of tail calls lost under this entry */</span>
<a name="l00089"></a>00089     } <a class="code" href="structCallInfo.html#970495ecfbc19bca7b399a9429b25110">l</a>;
<a name="l00090"></a>00090     <span class="keyword">struct </span>{  <span class="comment">/* for C functions */</span>
<a name="l00091"></a><a class="code" href="structCallInfo.html#a752114f478e97c4be9ea58e52637db7">00091</a>       <span class="keywordtype">int</span> <a class="code" href="structCallInfo.html#a752114f478e97c4be9ea58e52637db7">dummy</a>;  <span class="comment">/* just to avoid an empty struct */</span>
<a name="l00092"></a>00092     } <a class="code" href="structCallInfo.html#79a4bd1e0acd20ee16f430c4d8bea83b">c</a>;
<a name="l00093"></a>00093   } <a class="code" href="structCallInfo.html#0ffee6994d4e1b3790ea491595cb72be">u</a>;
<a name="l00094"></a>00094 } <a class="code" href="structCallInfo.html">CallInfo</a>;
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <span class="comment">/*</span>
<a name="l00098"></a>00098 <span class="comment">** bit fields for `CallInfo.state'</span>
<a name="l00099"></a>00099 <span class="comment">*/</span>
<a name="l00100"></a><a class="code" href="lstate_8h.html#9e68baab1c9e667cae13873d00907eba">00100</a> <span class="preprocessor">#define CI_C            (1&lt;&lt;0)  </span><span class="comment">/* 1 if function is a C function */</span>
<a name="l00101"></a>00101 <span class="comment">/* 1 if (Lua) function has an active `luaV_execute' running it */</span>
<a name="l00102"></a><a class="code" href="lstate_8h.html#69c606d49428cf3eaaa019f80dd6d173">00102</a> <span class="preprocessor">#define CI_HASFRAME     (1&lt;&lt;1)</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span><span class="comment">/* 1 if Lua function is calling another Lua function (and therefore its</span>
<a name="l00104"></a>00104 <span class="comment">   `pc' is being used by the other, and therefore CI_SAVEDPC is 1 too) */</span>
<a name="l00105"></a><a class="code" href="lstate_8h.html#bdf7df873f952e0e5b25b780406887d8">00105</a> <span class="preprocessor">#define CI_CALLING      (1&lt;&lt;2)</span>
<a name="l00106"></a><a class="code" href="lstate_8h.html#ce1f59a843ac99ab98646599c44b1611">00106</a> <span class="preprocessor"></span><span class="preprocessor">#define CI_SAVEDPC      (1&lt;&lt;3)  </span><span class="comment">/* 1 if `savedpc' is updated */</span>
<a name="l00107"></a><a class="code" href="lstate_8h.html#f2fea01f4d3b1116be741cbf66f0603f">00107</a> <span class="preprocessor">#define CI_YIELD        (1&lt;&lt;4)  </span><span class="comment">/* 1 if thread is suspended */</span>
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 
<a name="l00110"></a><a class="code" href="lstate_8h.html#e216fb062a3db66785aee8164f28e0af">00110</a> <span class="preprocessor">#define ci_func(ci)     (clvalue((ci)-&gt;base - 1))</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 <span class="comment">/*</span>
<a name="l00114"></a>00114 <span class="comment">** `global state', shared by all threads of this state</span>
<a name="l00115"></a>00115 <span class="comment">*/</span>
<a name="l00116"></a><a class="code" href="structglobal__State.html">00116</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structglobal__State.html">global_State</a> {
<a name="l00117"></a><a class="code" href="structglobal__State.html#68998e0257952872252c2e9c51c92628">00117</a>   <a class="code" href="structstringtable.html">stringtable</a> <a class="code" href="structglobal__State.html#68998e0257952872252c2e9c51c92628">strt</a>;  <span class="comment">/* hash table for strings */</span>
<a name="l00118"></a>00118 <span class="comment">/*@owned@*/</span>
<a name="l00119"></a><a class="code" href="structglobal__State.html#2b84d44d8b5510022a9853d5b5335b5d">00119</a>   <a class="code" href="unionGCObject.html">GCObject</a> *<a class="code" href="structglobal__State.html#2b84d44d8b5510022a9853d5b5335b5d">rootgc</a>;  <span class="comment">/* list of (almost) all collectable objects */</span>
<a name="l00120"></a>00120 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@null@*/</span>
<a name="l00121"></a><a class="code" href="structglobal__State.html#a5954b649d33e78e58a296392fa33609">00121</a>   <a class="code" href="unionGCObject.html">GCObject</a> *<a class="code" href="structglobal__State.html#a5954b649d33e78e58a296392fa33609">rootudata</a>;   <span class="comment">/* (separated) list of all userdata */</span>
<a name="l00122"></a>00122 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@null@*/</span>
<a name="l00123"></a><a class="code" href="structglobal__State.html#c5d6d43a268e9b1d46a8994a79d3b1c3">00123</a>   <a class="code" href="unionGCObject.html">GCObject</a> *<a class="code" href="structglobal__State.html#c5d6d43a268e9b1d46a8994a79d3b1c3">tmudata</a>;  <span class="comment">/* list of userdata to be GC */</span>
<a name="l00124"></a><a class="code" href="structglobal__State.html#1c4cf1ae57b233feed74a5a72f782d57">00124</a>   <a class="code" href="structMbuffer.html">Mbuffer</a> <a class="code" href="structglobal__State.html#1c4cf1ae57b233feed74a5a72f782d57">buff</a>;  <span class="comment">/* temporary buffer for string concatentation */</span>
<a name="l00125"></a><a class="code" href="structglobal__State.html#78bf8f8e04b88b4c32ff9afc89b06a36">00125</a>   <a class="code" href="llimits_8h.html#fc2ed184646ea6ecdffcad97c95c3611">lu_mem</a> <a class="code" href="structglobal__State.html#78bf8f8e04b88b4c32ff9afc89b06a36">GCthreshold</a>;
<a name="l00126"></a><a class="code" href="structglobal__State.html#e6f0fdbb9ded8532e442a1e7d6f9d961">00126</a>   <a class="code" href="llimits_8h.html#fc2ed184646ea6ecdffcad97c95c3611">lu_mem</a> <a class="code" href="structglobal__State.html#e6f0fdbb9ded8532e442a1e7d6f9d961">nblocks</a>;  <span class="comment">/* number of `bytes' currently allocated */</span>
<a name="l00127"></a><a class="code" href="structglobal__State.html#3111e5523d771fa598c623556d3d34f1">00127</a>   lua_CFunction <a class="code" href="structglobal__State.html#3111e5523d771fa598c623556d3d34f1">panic</a>;  <span class="comment">/* to be called in unprotected errors */</span>
<a name="l00128"></a><a class="code" href="structglobal__State.html#b542740529563d839c7f442e1d4abd2d">00128</a>   <a class="code" href="structlua__TObject.html">TObject</a> <a class="code" href="structglobal__State.html#b542740529563d839c7f442e1d4abd2d">_registry</a>;
<a name="l00129"></a><a class="code" href="structglobal__State.html#bfe852e9d6e70a6103815312fd0fd7c9">00129</a>   <a class="code" href="structlua__TObject.html">TObject</a> <a class="code" href="structglobal__State.html#bfe852e9d6e70a6103815312fd0fd7c9">_defaultmeta</a>;
<a name="l00130"></a><a class="code" href="structglobal__State.html#f69a6fd235968c20c83a8f9b1c305b2b">00130</a>   <span class="keyword">struct </span><a class="code" href="structlua__State.html">lua_State</a> *<a class="code" href="structglobal__State.html#f69a6fd235968c20c83a8f9b1c305b2b">mainthread</a>;
<a name="l00131"></a><a class="code" href="structglobal__State.html#8a5720e444cbdc83d8d1dab449606744">00131</a>   <a class="code" href="structNode.html">Node</a> <a class="code" href="structglobal__State.html#8a5720e444cbdc83d8d1dab449606744">dummynode</a>[1];  <span class="comment">/* common node array for all empty tables */</span>
<a name="l00132"></a><a class="code" href="structglobal__State.html#03602f737457ab015282538b8c471288">00132</a>   <a class="code" href="unionTString.html">TString</a> *<a class="code" href="structglobal__State.html#03602f737457ab015282538b8c471288">tmname</a>[<a class="code" href="ltm_8h.html#3c68e5682d02a7e895ceb1915b8731116fe3fc54d2de8c676f6196182d112294">TM_N</a>];  <span class="comment">/* array with tag-method names */</span>
<a name="l00133"></a>00133 } <a class="code" href="structglobal__State.html">global_State</a>;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="comment">/*</span>
<a name="l00137"></a>00137 <span class="comment">** `per thread' state</span>
<a name="l00138"></a>00138 <span class="comment">*/</span>
<a name="l00139"></a><a class="code" href="structlua__State.html">00139</a> <span class="keyword">struct </span><a class="code" href="structlua__State.html">lua_State</a> {
<a name="l00140"></a><a class="code" href="structlua__State.html#0698b49909bb9c77ae518f6634264908">00140</a>   <a class="code" href="lobject_8h.html#db3766fe982dddfda3b9dae66ee852a6">CommonHeader</a>;
<a name="l00141"></a>00141 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00142"></a><a class="code" href="structlua__State.html#8c5ea5328fe07cf26f7871db2dff8cdb">00142</a>   <a class="code" href="structlua__TObject.html">StkId</a> <a class="code" href="structlua__State.html#8c5ea5328fe07cf26f7871db2dff8cdb">top</a>;  <span class="comment">/* first free slot in the stack */</span>
<a name="l00143"></a>00143 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00144"></a><a class="code" href="structlua__State.html#d83d03a2544d7ea885657d516724ddc9">00144</a>   <a class="code" href="structlua__TObject.html">StkId</a> <a class="code" href="structlua__State.html#d83d03a2544d7ea885657d516724ddc9">base</a>;  <span class="comment">/* base of current function */</span>
<a name="l00145"></a>00145 <span class="comment">/*@relnull@*/</span>
<a name="l00146"></a><a class="code" href="structlua__State.html#2b73443ed00b0ed1f93d4522b61f31e6">00146</a>   <a class="code" href="structglobal__State.html">global_State</a> *<a class="code" href="structlua__State.html#2b73443ed00b0ed1f93d4522b61f31e6">l_G</a>;
<a name="l00147"></a>00147 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00148"></a><a class="code" href="structlua__State.html#fa7a2a70fafed9445c4ede0efce89516">00148</a>   <a class="code" href="structCallInfo.html">CallInfo</a> *<a class="code" href="structlua__State.html#fa7a2a70fafed9445c4ede0efce89516">ci</a>;  <span class="comment">/* call info for current function */</span>
<a name="l00149"></a>00149 <span class="comment">/*@dependent@*/</span>
<a name="l00150"></a><a class="code" href="structlua__State.html#9ce6aa23cd630853b5fdf73c7d13a8b4">00150</a>   <a class="code" href="structlua__TObject.html">StkId</a> <a class="code" href="structlua__State.html#9ce6aa23cd630853b5fdf73c7d13a8b4">stack_last</a>;  <span class="comment">/* last free slot in the stack */</span>
<a name="l00151"></a>00151 <span class="comment">/*@owned@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00152"></a><a class="code" href="structlua__State.html#c03e9a3cbcc9db1aad84da0b1a4bde1b">00152</a>   <a class="code" href="structlua__TObject.html">StkId</a> <a class="code" href="structlua__State.html#c03e9a3cbcc9db1aad84da0b1a4bde1b">stack</a>;  <span class="comment">/* stack base */</span>
<a name="l00153"></a><a class="code" href="structlua__State.html#42a31371fcf4014149910c782bd054f0">00153</a>   <span class="keywordtype">int</span> <a class="code" href="structlua__State.html#42a31371fcf4014149910c782bd054f0">stacksize</a>;
<a name="l00154"></a>00154 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00155"></a><a class="code" href="structlua__State.html#2628865b161ea87fbe54b389b7e84a02">00155</a>   <a class="code" href="structCallInfo.html">CallInfo</a> *<a class="code" href="structlua__State.html#2628865b161ea87fbe54b389b7e84a02">end_ci</a>;  <span class="comment">/* points after end of ci array*/</span>
<a name="l00156"></a>00156 <span class="comment">/*@owned@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00157"></a><a class="code" href="structlua__State.html#291ce3889111bc64539835101f4ccda9">00157</a>   <a class="code" href="structCallInfo.html">CallInfo</a> *<a class="code" href="structlua__State.html#291ce3889111bc64539835101f4ccda9">base_ci</a>;  <span class="comment">/* array of CallInfo's */</span>
<a name="l00158"></a><a class="code" href="structlua__State.html#06e2d12c60b704f9792e0323fb11bfb3">00158</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structlua__State.html#06e2d12c60b704f9792e0323fb11bfb3">size_ci</a>;  <span class="comment">/* size of array `base_ci' */</span>
<a name="l00159"></a><a class="code" href="structlua__State.html#b4982fd7e588032c87a8f007ffb788ff">00159</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structlua__State.html#b4982fd7e588032c87a8f007ffb788ff">nCcalls</a>;  <span class="comment">/* number of nested C calls */</span>
<a name="l00160"></a><a class="code" href="structlua__State.html#2a68a9480178f9424337c072b4d84bf0">00160</a>   <a class="code" href="llimits_8h.html#64f8b22b40cd3b0d9a7b61d79ae2d98f">lu_byte</a> <a class="code" href="structlua__State.html#2a68a9480178f9424337c072b4d84bf0">hookmask</a>;
<a name="l00161"></a><a class="code" href="structlua__State.html#3829bde4cad419f743a31c85cc171518">00161</a>   <a class="code" href="llimits_8h.html#64f8b22b40cd3b0d9a7b61d79ae2d98f">lu_byte</a> <a class="code" href="structlua__State.html#3829bde4cad419f743a31c85cc171518">allowhook</a>;
<a name="l00162"></a><a class="code" href="structlua__State.html#acf90b529220e0ebc716f9d955a874f3">00162</a>   <a class="code" href="llimits_8h.html#64f8b22b40cd3b0d9a7b61d79ae2d98f">lu_byte</a> <a class="code" href="structlua__State.html#acf90b529220e0ebc716f9d955a874f3">hookinit</a>;
<a name="l00163"></a><a class="code" href="structlua__State.html#2981551d98557c91fc6580fdf42e397d">00163</a>   <span class="keywordtype">int</span> <a class="code" href="structlua__State.html#2981551d98557c91fc6580fdf42e397d">basehookcount</a>;
<a name="l00164"></a><a class="code" href="structlua__State.html#bd1197659f3dc04eda03c35750227cf1">00164</a>   <span class="keywordtype">int</span> <a class="code" href="structlua__State.html#bd1197659f3dc04eda03c35750227cf1">hookcount</a>;
<a name="l00165"></a>00165 <span class="comment">/*@relnull@*/</span>
<a name="l00166"></a><a class="code" href="structlua__State.html#a7ef7665e8fa5fd469786c81cb20640e">00166</a>   lua_Hook <a class="code" href="structlua__State.html#a7ef7665e8fa5fd469786c81cb20640e">hook</a>;
<a name="l00167"></a><a class="code" href="structlua__State.html#69123842d2c473d920f4ea86cfb36286">00167</a>   <a class="code" href="structlua__TObject.html">TObject</a> <a class="code" href="structlua__State.html#69123842d2c473d920f4ea86cfb36286">_gt</a>;  <span class="comment">/* table of globals */</span>
<a name="l00168"></a>00168 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00169"></a><a class="code" href="structlua__State.html#f129ada82e857ca60103914f9e7c08c7">00169</a>   <a class="code" href="unionGCObject.html">GCObject</a> *<a class="code" href="structlua__State.html#f129ada82e857ca60103914f9e7c08c7">openupval</a>;  <span class="comment">/* list of open upvalues in this stack */</span>
<a name="l00170"></a>00170 <span class="comment">/*@dependent@*/</span> <span class="comment">/*@relnull@*/</span>
<a name="l00171"></a><a class="code" href="structlua__State.html#ec3fc3311eed0c085ec723555831a051">00171</a>   <a class="code" href="unionGCObject.html">GCObject</a> *<a class="code" href="structlua__State.html#ec3fc3311eed0c085ec723555831a051">gclist</a>;
<a name="l00172"></a>00172 <span class="comment">/*@relnull@*/</span>
<a name="l00173"></a><a class="code" href="structlua__State.html#b00394491cf63c68e36f01548732c3cd">00173</a>   <span class="keyword">struct </span><a class="code" href="structlua__longjmp.html">lua_longjmp</a> *<a class="code" href="structlua__State.html#b00394491cf63c68e36f01548732c3cd">errorJmp</a>;  <span class="comment">/* current error recover point */</span>
<a name="l00174"></a><a class="code" href="structlua__State.html#f1e0e1f53e7c374ce4593df62f12cef5">00174</a>   ptrdiff_t <a class="code" href="structlua__State.html#f1e0e1f53e7c374ce4593df62f12cef5">errfunc</a>;  <span class="comment">/* current error handling function (stack index) */</span>
<a name="l00175"></a>00175 };
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 
<a name="l00178"></a><a class="code" href="lstate_8h.html#0125ace4e680108699344e83736df60b">00178</a> <span class="preprocessor">#define G(L)    (L-&gt;l_G)</span>
<a name="l00179"></a>00179 <span class="preprocessor"></span>
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <span class="comment">/*</span>
<a name="l00182"></a>00182 <span class="comment">** Union of all collectable objects</span>
<a name="l00183"></a>00183 <span class="comment">*/</span>
<a name="l00184"></a><a class="code" href="unionGCObject.html">00184</a> <span class="keyword">union </span><a class="code" href="unionGCObject.html">GCObject</a> {
<a name="l00185"></a><a class="code" href="unionGCObject.html#77d333fa49c08dc099418dd9f1f30c93">00185</a>   <a class="code" href="structGCheader.html">GCheader</a> <a class="code" href="unionGCObject.html#77d333fa49c08dc099418dd9f1f30c93">gch</a>;
<a name="l00186"></a><a class="code" href="unionGCObject.html#ddb673577d84af1413b9b83595d330ed">00186</a>   <span class="keyword">union </span><a class="code" href="unionTString.html">TString</a> <a class="code" href="unionGCObject.html#ddb673577d84af1413b9b83595d330ed">ts</a>;
<a name="l00187"></a><a class="code" href="unionGCObject.html#c3680fb91d3f2028c072e1dad016795c">00187</a>   <span class="keyword">union </span><a class="code" href="unionUdata.html">Udata</a> <a class="code" href="unionGCObject.html#c3680fb91d3f2028c072e1dad016795c">u</a>;
<a name="l00188"></a><a class="code" href="unionGCObject.html#abe8e4ee4b2dc86611eeed1ad9d96f95">00188</a>   <span class="keyword">union </span><a class="code" href="unionClosure.html">Closure</a> <a class="code" href="unionGCObject.html#abe8e4ee4b2dc86611eeed1ad9d96f95">cl</a>;
<a name="l00189"></a><a class="code" href="unionGCObject.html#7b445c25a60fba8619ac0138442e793d">00189</a>   <span class="keyword">struct </span><a class="code" href="structTable.html">Table</a> <a class="code" href="unionGCObject.html#7b445c25a60fba8619ac0138442e793d">h</a>;
<a name="l00190"></a><a class="code" href="unionGCObject.html#0a395d3bf7e46e94464580be730142c1">00190</a>   <span class="keyword">struct </span><a class="code" href="structProto.html">Proto</a> <a class="code" href="unionGCObject.html#0a395d3bf7e46e94464580be730142c1">p</a>;
<a name="l00191"></a><a class="code" href="unionGCObject.html#b4ca7371f96e6221eb48a6722bdb30ea">00191</a>   <span class="keyword">struct </span><a class="code" href="structUpVal.html">UpVal</a> <a class="code" href="unionGCObject.html#b4ca7371f96e6221eb48a6722bdb30ea">uv</a>;
<a name="l00192"></a><a class="code" href="unionGCObject.html#07950a0d939e2db8051138614dc5f7b1">00192</a>   <span class="keyword">struct </span><a class="code" href="structlua__State.html">lua_State</a> <a class="code" href="unionGCObject.html#07950a0d939e2db8051138614dc5f7b1">th</a>;  <span class="comment">/* thread */</span>
<a name="l00193"></a>00193 };
<a name="l00194"></a>00194 
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="comment">/* macros to convert a GCObject into a specific value */</span>
<a name="l00197"></a><a class="code" href="lstate_8h.html#07c2067c8959610ad4317173481e7123">00197</a> <span class="preprocessor">#define gcotots(o)      check_exp((o)-&gt;gch.tt == LUA_TSTRING, &amp;((o)-&gt;ts))</span>
<a name="l00198"></a><a class="code" href="lstate_8h.html#03a38706d140af29356f9e1a5e5be794">00198</a> <span class="preprocessor"></span><span class="preprocessor">#define gcotou(o)       check_exp((o)-&gt;gch.tt == LUA_TUSERDATA, &amp;((o)-&gt;u))</span>
<a name="l00199"></a><a class="code" href="lstate_8h.html#915299b6208e7e111b9b2ce480a6405e">00199</a> <span class="preprocessor"></span><span class="preprocessor">#define gcotocl(o)      check_exp((o)-&gt;gch.tt == LUA_TFUNCTION, &amp;((o)-&gt;cl))</span>
<a name="l00200"></a><a class="code" href="lstate_8h.html#3a35e575f126101ba3971355e62ecb9e">00200</a> <span class="preprocessor"></span><span class="preprocessor">#define gcotoh(o)       check_exp((o)-&gt;gch.tt == LUA_TTABLE, &amp;((o)-&gt;h))</span>
<a name="l00201"></a><a class="code" href="lstate_8h.html#f5d3c6d47e81294aad9db620b9b4b338">00201</a> <span class="preprocessor"></span><span class="preprocessor">#define gcotop(o)       check_exp((o)-&gt;gch.tt == LUA_TPROTO, &amp;((o)-&gt;p))</span>
<a name="l00202"></a><a class="code" href="lstate_8h.html#553a475daf949e00bb34d6b960006253">00202</a> <span class="preprocessor"></span><span class="preprocessor">#define gcotouv(o)      check_exp((o)-&gt;gch.tt == LUA_TUPVAL, &amp;((o)-&gt;uv))</span>
<a name="l00203"></a><a class="code" href="lstate_8h.html#4e478858840e7c1d1caf3d28b8585500">00203</a> <span class="preprocessor"></span><span class="preprocessor">#define ngcotouv(o) \</span>
<a name="l00204"></a>00204 <span class="preprocessor">        check_exp((o) == NULL || (o)-&gt;gch.tt == LUA_TUPVAL, &amp;((o)-&gt;uv))</span>
<a name="l00205"></a><a class="code" href="lstate_8h.html#9f6a04d5d4fe5ffdf22d6d3e0d0aad36">00205</a> <span class="preprocessor"></span><span class="preprocessor">#define gcototh(o)      check_exp((o)-&gt;gch.tt == LUA_TTHREAD, &amp;((o)-&gt;th))</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span>
<a name="l00207"></a>00207 <span class="comment">/* macro to convert any value into a GCObject */</span>
<a name="l00208"></a><a class="code" href="lstate_8h.html#45f05cef1ab5c4fa8d6dbaf449163294">00208</a> <span class="preprocessor">#define valtogco(v)     (cast(GCObject *, (v)))</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="comment">/*@null@*/</span>
<a name="l00212"></a>00212 <a class="code" href="structlua__State.html">lua_State</a> *<a class="code" href="lstate_8c.html#cfb94a7dbd36cebcb0dd2faa60c73722">luaE_newthread</a> (<a class="code" href="structlua__State.html">lua_State</a> *L)
<a name="l00213"></a>00213         <span class="comment">/*@modifies L @*/</span>;
<a name="l00214"></a>00214 <span class="keywordtype">void</span> <a class="code" href="lstate_8c.html#6a4c7aef4602de10456be8fc0f134077">luaE_freethread</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <a class="code" href="structlua__State.html">lua_State</a> *L1)
<a name="l00215"></a>00215         <span class="comment">/*@modifies L, L1 @*/</span>;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217 <span class="preprocessor">#endif</span>
<a name="l00218"></a>00218 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:54 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
