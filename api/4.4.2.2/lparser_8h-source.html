<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: lua/lparser.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>lua/lparser.h</h1><a href="lparser_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">** $Id: lparser.h,v 1.2 2004/03/23 05:09:14 jbj Exp $</span>
<a name="l00003"></a>00003 <span class="comment">** Lua Parser</span>
<a name="l00004"></a>00004 <span class="comment">** See Copyright Notice in lua.h</span>
<a name="l00005"></a>00005 <span class="comment">*/</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef lparser_h</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#define lparser_h</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="llimits_8h.html">llimits.h</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "<a class="code" href="lobject_8h.html">lobject.h</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "<a class="code" href="ltable_8h.html">ltable.h</a>"</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="lzio_8h.html">lzio.h</a>"</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment">/*</span>
<a name="l00017"></a>00017 <span class="comment">** Expression descriptor</span>
<a name="l00018"></a>00018 <span class="comment">*/</span>
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365">00020</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00021"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365071b80e3ffdc8174d6b7b61f584a41ef">00021</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365071b80e3ffdc8174d6b7b61f584a41ef">VVOID</a>,        <span class="comment">/* no value */</span>
<a name="l00022"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365225f5542d71d86a5bf7ec9d1ee0d416b">00022</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365225f5542d71d86a5bf7ec9d1ee0d416b">VNIL</a>,
<a name="l00023"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d3650d12eaf8ce871d39014851e42fc9cc6d">00023</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d3650d12eaf8ce871d39014851e42fc9cc6d">VTRUE</a>,
<a name="l00024"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d36516c77a001b2e595f45e2ecaa72986582">00024</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d36516c77a001b2e595f45e2ecaa72986582">VFALSE</a>,
<a name="l00025"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d36513f719512f86d353f14cc37c782205f6">00025</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d36513f719512f86d353f14cc37c782205f6">VK</a>,           <span class="comment">/* info = index of constant in `k' */</span>
<a name="l00026"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d3657c10242c81862cb07becbb59361ec5d3">00026</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d3657c10242c81862cb07becbb59361ec5d3">VLOCAL</a>,       <span class="comment">/* info = local register */</span>
<a name="l00027"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d3657e4c12de0487705bdbd560c5da79f93e">00027</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d3657e4c12de0487705bdbd560c5da79f93e">VUPVAL</a>,       <span class="comment">/* info = index of upvalue in `upvalues' */</span>
<a name="l00028"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365d49e8bc7b1038d398333814c66cff8ed">00028</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365d49e8bc7b1038d398333814c66cff8ed">VGLOBAL</a>,      <span class="comment">/* info = index of table; aux = index of global name in `k' */</span>
<a name="l00029"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d3653fe06ae89e406efc66f506f78de14880">00029</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d3653fe06ae89e406efc66f506f78de14880">VINDEXED</a>,     <span class="comment">/* info = table register; aux = index register (or `k') */</span>
<a name="l00030"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365ee8f53eac2809d796d61f628e82e3ee3">00030</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365ee8f53eac2809d796d61f628e82e3ee3">VJMP</a>,         <span class="comment">/* info = instruction pc */</span>
<a name="l00031"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365f4352ffe8be3cd3cf66474ea74e3eb66">00031</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365f4352ffe8be3cd3cf66474ea74e3eb66">VRELOCABLE</a>,   <span class="comment">/* info = instruction pc */</span>
<a name="l00032"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d36570a5d7bac7d62d969db4ba478dba9247">00032</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d36570a5d7bac7d62d969db4ba478dba9247">VNONRELOC</a>,    <span class="comment">/* info = result register */</span>
<a name="l00033"></a><a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d36585500c09ed0cd78fd58ea0393f699801">00033</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d36585500c09ed0cd78fd58ea0393f699801">VCALL</a>         <span class="comment">/* info = result register */</span>
<a name="l00034"></a>00034 } <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365">expkind</a>;
<a name="l00035"></a>00035 
<a name="l00036"></a><a class="code" href="structexpdesc.html">00036</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structexpdesc.html">expdesc</a> {
<a name="l00037"></a><a class="code" href="structexpdesc.html#c7ed631edd1d995508ea97ce9d6810c6">00037</a>   <a class="code" href="lparser_8h.html#2e8a26153bc425ac946c5bea5838d365">expkind</a> <a class="code" href="structexpdesc.html#c7ed631edd1d995508ea97ce9d6810c6">k</a>;
<a name="l00038"></a><a class="code" href="structexpdesc.html#9b58441e4a205cd0ff82d17d13882d07">00038</a>   <span class="keywordtype">int</span> <a class="code" href="structexpdesc.html#9b58441e4a205cd0ff82d17d13882d07">info</a>, <a class="code" href="structexpdesc.html#815c27edac10c87de9b72b7a758ad471">aux</a>;
<a name="l00039"></a><a class="code" href="structexpdesc.html#3f6c140fd779dc224ffd535471d4e013">00039</a>   <span class="keywordtype">int</span> <a class="code" href="structexpdesc.html#3f6c140fd779dc224ffd535471d4e013">t</a>;  <span class="comment">/* patch list of `exit when true' */</span>
<a name="l00040"></a><a class="code" href="structexpdesc.html#7be3168b08c47742f4d9696c6de5f373">00040</a>   <span class="keywordtype">int</span> <a class="code" href="structexpdesc.html#7be3168b08c47742f4d9696c6de5f373">f</a>;  <span class="comment">/* patch list of `exit when false' */</span>
<a name="l00041"></a>00041 } <a class="code" href="structexpdesc.html">expdesc</a>;
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="keyword">struct </span><a class="code" href="structBlockCnt.html">BlockCnt</a>;  <span class="comment">/* defined in lparser.c */</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="comment">/* state needed to generate code for a given function */</span>
<a name="l00048"></a><a class="code" href="structFuncState.html">00048</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structFuncState.html">FuncState</a> {
<a name="l00049"></a>00049 <span class="comment">/*@null@*/</span>
<a name="l00050"></a><a class="code" href="structFuncState.html#57f144cf1c97c094944fb03fa0212837">00050</a>   <a class="code" href="structProto.html">Proto</a> *<a class="code" href="structFuncState.html#57f144cf1c97c094944fb03fa0212837">f</a>;  <span class="comment">/* current function header */</span>
<a name="l00051"></a>00051 <span class="comment">/*@null@*/</span>
<a name="l00052"></a><a class="code" href="structFuncState.html#743eedcc2e6b7325ff4575cee12dd266">00052</a>   <a class="code" href="structTable.html">Table</a> *<a class="code" href="structFuncState.html#743eedcc2e6b7325ff4575cee12dd266">h</a>;  <span class="comment">/* table to find (and reuse) elements in `k' */</span>
<a name="l00053"></a>00053 <span class="comment">/*@null@*/</span>
<a name="l00054"></a><a class="code" href="structFuncState.html#d4ff403a709cef955a547441f2a02cba">00054</a>   <span class="keyword">struct </span><a class="code" href="structFuncState.html">FuncState</a> *<a class="code" href="structFuncState.html#d4ff403a709cef955a547441f2a02cba">prev</a>;  <span class="comment">/* enclosing function */</span>
<a name="l00055"></a><a class="code" href="structFuncState.html#d1376c6bb410926d7c4081d63e682910">00055</a>   <span class="keyword">struct </span><a class="code" href="structLexState.html">LexState</a> *<a class="code" href="structFuncState.html#d1376c6bb410926d7c4081d63e682910">ls</a>;  <span class="comment">/* lexical state */</span>
<a name="l00056"></a><a class="code" href="structFuncState.html#cc8fa751d5a970425f186d6ffe004f6a">00056</a>   <span class="keyword">struct </span><a class="code" href="structlua__State.html">lua_State</a> *<a class="code" href="structFuncState.html#cc8fa751d5a970425f186d6ffe004f6a">L</a>;  <span class="comment">/* copy of the Lua state */</span>
<a name="l00057"></a>00057 <span class="comment">/*@null@*/</span>
<a name="l00058"></a><a class="code" href="structFuncState.html#5d10f6288947962f36c783d814db0b90">00058</a>   <span class="keyword">struct </span><a class="code" href="structBlockCnt.html">BlockCnt</a> *<a class="code" href="structFuncState.html#5d10f6288947962f36c783d814db0b90">bl</a>;  <span class="comment">/* chain of current blocks */</span>
<a name="l00059"></a><a class="code" href="structFuncState.html#b3fb6b2f643a20fbe3f8a0cce7ec58ca">00059</a>   <span class="keywordtype">int</span> <a class="code" href="structFuncState.html#b3fb6b2f643a20fbe3f8a0cce7ec58ca">pc</a>;  <span class="comment">/* next position to code (equivalent to `ncode') */</span>
<a name="l00060"></a><a class="code" href="structFuncState.html#80af93c0a90b577f6c7950cb733d4049">00060</a>   <span class="keywordtype">int</span> <a class="code" href="structFuncState.html#80af93c0a90b577f6c7950cb733d4049">lasttarget</a>;   <span class="comment">/* `pc' of last `jump target' */</span>
<a name="l00061"></a><a class="code" href="structFuncState.html#1f931eab98b3defe8c1948ac18d20644">00061</a>   <span class="keywordtype">int</span> <a class="code" href="structFuncState.html#1f931eab98b3defe8c1948ac18d20644">jpc</a>;  <span class="comment">/* list of pending jumps to `pc' */</span>
<a name="l00062"></a><a class="code" href="structFuncState.html#34c3a8e63c22d3f33bb811cb40f295cb">00062</a>   <span class="keywordtype">int</span> <a class="code" href="structFuncState.html#34c3a8e63c22d3f33bb811cb40f295cb">freereg</a>;  <span class="comment">/* first free register */</span>
<a name="l00063"></a><a class="code" href="structFuncState.html#8b327d797614ab483d6d9bf1075c1681">00063</a>   <span class="keywordtype">int</span> <a class="code" href="structFuncState.html#8b327d797614ab483d6d9bf1075c1681">nk</a>;  <span class="comment">/* number of elements in `k' */</span>
<a name="l00064"></a><a class="code" href="structFuncState.html#3e1927dcb93ebe46f435bcfbf8f149fc">00064</a>   <span class="keywordtype">int</span> <a class="code" href="structFuncState.html#3e1927dcb93ebe46f435bcfbf8f149fc">np</a>;  <span class="comment">/* number of elements in `p' */</span>
<a name="l00065"></a><a class="code" href="structFuncState.html#b2cc64bf76b664d8348ba5c9ed3d6f51">00065</a>   <span class="keywordtype">int</span> <a class="code" href="structFuncState.html#b2cc64bf76b664d8348ba5c9ed3d6f51">nlocvars</a>;  <span class="comment">/* number of elements in `locvars' */</span>
<a name="l00066"></a><a class="code" href="structFuncState.html#5a192e938fd948980f43ccc3b637db3b">00066</a>   <span class="keywordtype">int</span> <a class="code" href="structFuncState.html#5a192e938fd948980f43ccc3b637db3b">nactvar</a>;  <span class="comment">/* number of active local variables */</span>
<a name="l00067"></a><a class="code" href="structFuncState.html#e00d074b3443b27e83212518ebb2ebe9">00067</a>   <a class="code" href="structexpdesc.html">expdesc</a> <a class="code" href="structFuncState.html#e00d074b3443b27e83212518ebb2ebe9">upvalues</a>[<a class="code" href="llimits_8h.html#e7493f554f6dafaa194bafa3e4f92b9b">MAXUPVALUES</a>];  <span class="comment">/* upvalues */</span>
<a name="l00068"></a><a class="code" href="structFuncState.html#f89c26cc2a5f70e1d03579aa5bcd0565">00068</a>   <span class="keywordtype">int</span> <a class="code" href="structFuncState.html#f89c26cc2a5f70e1d03579aa5bcd0565">actvar</a>[<a class="code" href="llimits_8h.html#34524d3e798851ef06bc52a8217cfae2">MAXVARS</a>];  <span class="comment">/* declared-variable stack */</span>
<a name="l00069"></a>00069 } <a class="code" href="structFuncState.html">FuncState</a>;
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 <a class="code" href="structProto.html">Proto</a> *<a class="code" href="lparser_8c.html#5e8bfb2f52f528b537db3477c5907038">luaY_parser</a> (<a class="code" href="structlua__State.html">lua_State</a> *L, <a class="code" href="structZio.html">ZIO</a> *z, <a class="code" href="structMbuffer.html">Mbuffer</a> *buff)
<a name="l00073"></a>00073         <span class="comment">/*@modifies L, z @*/</span>;
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:54 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
