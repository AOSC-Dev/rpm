<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: Database API.</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<h1>Database API.</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Files</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmlib_8h.html">rpmlib.h</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">In Memoriam: Steve Taylor &lt;<a href="mailto:staylor@redhat.com">staylor@redhat.com</a>&gt; was here, now he's not. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dbconfig_8c.html">dbconfig.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hdrNVR_8c.html">hdrNVR.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmdb_8c.html">rpmdb.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmdb_8h.html">rpmdb.h</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Access RPM indices using Berkeley DB interface(s). <br></td></tr>

<p>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrpmdb__s.html">rpmdb_s</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Describes the collection of index databases used by rpm.  <a href="structrpmdb__s.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structrpmdb__s.html">rpmdb_s</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gf3e51332f8c9054b134d0c4822d59fd8">rpmdb</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Database of headers and tag value indices.  <a href="#gf3e51332f8c9054b134d0c4822d59fd8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct__rpmdbMatchIterator.html">_rpmdbMatchIterator</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g78095e799d15f45a3a744836fdb5ff09">rpmdbMatchIterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Database iterator.  <a href="#g78095e799d15f45a3a744836fdb5ff09"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct__dbiIndexSet.html">_dbiIndexSet</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g91224133bfeeb0e52f9da1d22f531cbc">dbiIndexSet</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A single element (i.e.  <a href="#g91224133bfeeb0e52f9da1d22f531cbc"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gbabc5c19e980e272eef3674013cdf7bf">rpmdbFlags</a> { <a class="el" href="group__rpmdb.html#ggbabc5c19e980e272eef3674013cdf7bf1b1fbb11b77201baf60c0725cf37d09d">RPMDB_FLAG_JUSTCHECK</a> =  (1 &lt;&lt; 0), 
<a class="el" href="group__rpmdb.html#ggbabc5c19e980e272eef3674013cdf7bfde00da5bfb4d0281d5b20a2a6c9f82e9">RPMDB_FLAG_MINIMAL</a> =  (1 &lt;&lt; 1), 
<a class="el" href="group__rpmdb.html#ggbabc5c19e980e272eef3674013cdf7bf05063c3ee598eaab210db063baa34ce1">RPMDB_FLAG_CHROOT</a> =  (1 &lt;&lt; 2)
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g78f899180a81d765cccd6eb204d8fc37">rpmdbFindFpList</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db, <a class="el" href="structfingerPrint__s.html">fingerPrint</a> *fpList, <a class="el" href="struct__dbiIndexSet.html">dbiIndexSet</a> *matchList, int numItems)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find fingerprint matches in database.  <a href="#g78f899180a81d765cccd6eb204d8fc37"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gdaf67ee2dc1406454c82217f2aeaf906">rpmdbGetIteratorFileNum</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g47cb145f5fb33c9e5b1a4e8976f04187">rpmdbUnlink</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db, const char *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unreference a database instance.  <a href="#g47cb145f5fb33c9e5b1a4e8976f04187"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g87c31b669de15985b9c3842f49b30007">rpmdbLink</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db, const char *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reference a database instance.  <a href="#g87c31b669de15985b9c3842f49b30007"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g3032a2649d7761087dfd25c29119ebc5">rpmdbOpen</a> (const char *prefix, <a class="el" href="structrpmdb__s.html">rpmdb</a> *dbp, int mode, int perms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open rpm database.  <a href="#g3032a2649d7761087dfd25c29119ebc5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gf67b15f34035a0f7974c5ef28286d789">rpmdbInit</a> (const char *prefix, int perms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize database.  <a href="#gf67b15f34035a0f7974c5ef28286d789"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g458c33b31c30a317c4e8a14064ed1f24">rpmdbVerify</a> (const char *prefix)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verify database components.  <a href="#g458c33b31c30a317c4e8a14064ed1f24"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g534a3cbbecac13bdf5ca5de61e6e8563">rpmdbClose</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close all database indices and free rpmdb.  <a href="#g534a3cbbecac13bdf5ca5de61e6e8563"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#ge634d83d6ac7fd0e8c59f94a8b2379c6">rpmdbSync</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sync all database indices.  <a href="#ge634d83d6ac7fd0e8c59f94a8b2379c6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g075a0f702ca8bc4d74454b1f56e73a18">rpmdbOpenAll</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open all database indices.  <a href="#g075a0f702ca8bc4d74454b1f56e73a18"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g494f8b8c1ca3cf8b7c54d5d59d6c5821">rpmdbCountPackages</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db, const char *<a class="el" href="structname.html">name</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return number of instances of package in rpm database.  <a href="#g494f8b8c1ca3cf8b7c54d5d59d6c5821"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g6390115472d641de8bdc50cb5f00dbed">rpmdbGetIteratorOffset</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return header join key for current position of rpm database iterator.  <a href="#g6390115472d641de8bdc50cb5f00dbed"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gac81920c8e50f62b109183999a8e7da4">rpmdbGetIteratorCount</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return number of elements in rpm database iterator.  <a href="#gac81920c8e50f62b109183999a8e7da4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gbf6009a6794639ec5cbc65ab318102c5">rpmdbAppendIterator</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi, const int *hdrNums, int nHdrNums)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Append items to set of package instances to iterate.  <a href="#gbf6009a6794639ec5cbc65ab318102c5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g1735dfaf4b1a88fbe8c22ecb59623954">rpmdbPruneIterator</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi, int *hdrNums, int nHdrNums, int sorted)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove items from set of package instances to iterate.  <a href="#g1735dfaf4b1a88fbe8c22ecb59623954"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g9f84dbc47d1d432f4ffe83b713fb47c9">rpmdbSetIteratorRE</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi, <a class="el" href="rpmlib_8h.html#4f08fde948b5511f2a904dc92e39e211">rpmTag</a> tag, <a class="el" href="rpmdb_8h.html#b569d29d9b8a15daf7ec03834691bdba">rpmMireMode</a> mode, const char *pattern)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add pattern to iterator selector.  <a href="#g9f84dbc47d1d432f4ffe83b713fb47c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gbc607a9e703efc3fd02f57e6263fbbc4">rpmdbSetIteratorRewrite</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi, int rewrite)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepare iterator for lazy writes.  <a href="#gbc607a9e703efc3fd02f57e6263fbbc4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g328723eac8c189ade897ebc7f2db3ca9">rpmdbSetIteratorModified</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi, int modified)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modify iterator to mark header for lazy write on release.  <a href="#g328723eac8c189ade897ebc7f2db3ca9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g9c376b0225cd66a32a1d2f27ac8dc04a">rpmdbSetHdrChk</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi, <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>(*hdrchk)(<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const void *uh, size_t uc, const char **msg))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modify iterator to verify retrieved header blobs.  <a href="#g9c376b0225cd66a32a1d2f27ac8dc04a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g2cf5104a3a6483662a608e5d4b449e8d">rpmdbInitIterator</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db, <a class="el" href="rpmlib_8h.html#4f08fde948b5511f2a904dc92e39e211">rpmTag</a> rpmtag, const void *keyp, size_t keylen)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return database iterator.  <a href="#g2cf5104a3a6483662a608e5d4b449e8d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structheaderToken__s.html">Header</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gf5d8e3f7efbd6885ee7577d2729b8476">rpmdbNextIterator</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return next package header from iteration.  <a href="#gf5d8e3f7efbd6885ee7577d2729b8476"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gad60ebdc45b481f7d00f7510cb8f743c">rpmdbCheckSignals</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check for and exit on termination signals.  <a href="#gad60ebdc45b481f7d00f7510cb8f743c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g17f500c7432de8931552787451ae34af">rpmdbCheckTerminate</a> (int terminate)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check rpmdb signal handler for trapped signal and/or requested exit, clean up any open iterators and databases on termination condition.  <a href="#g17f500c7432de8931552787451ae34af"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g8b9f2121415fcec732234cf2115f6c7d">rpmdbFreeIterator</a> (<a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> mi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy rpm database iterator.  <a href="#g8b9f2121415fcec732234cf2115f6c7d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g6fe29db07ee5aa54b3af80472875ae76">rpmdbAdd</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db, int iid, <a class="el" href="structheaderToken__s.html">Header</a> h, <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>(*hdrchk)(<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const void *uh, size_t uc, const char **msg))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add package header to rpm database and indices.  <a href="#g6fe29db07ee5aa54b3af80472875ae76"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gd76021e1b6863a5ff268b74a5a8b3e6f">rpmdbRemove</a> (<a class="el" href="structrpmdb__s.html">rpmdb</a> db, int rid, unsigned int hdrNum, <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>(*hdrchk)(<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const void *uh, size_t uc, const char **msg))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove package header from rpm database and indices.  <a href="#gd76021e1b6863a5ff268b74a5a8b3e6f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#g328f470eed143da0e81ef414b664cf45">rpmdbRebuild</a> (const char *prefix, <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>(*hdrchk)(<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const void *uh, size_t uc, const char **msg))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rebuild database indices from package headers.  <a href="#g328f470eed143da0e81ef414b664cf45"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmdb.html#gaa38ed50d0d140f2f3423b8d65df36b1">dbiTags</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tags for which rpmdb indices will be built.  <a href="#gaa38ed50d0d140f2f3423b8d65df36b1"></a><br></td></tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="g91224133bfeeb0e52f9da1d22f531cbc"></a><!-- doxytag: member="rpmdb.h::dbiIndexSet" ref="g91224133bfeeb0e52f9da1d22f531cbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__dbiIndexSet.html">_dbiIndexSet</a>* <a class="el" href="struct__dbiIndexSet.html">dbiIndexSet</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A single element (i.e. 
<p>
inverted list from tag values) of a database. 
<p>
Definition at line <a class="el" href="rpmdb_8h-source.html#l00049">49</a> of file <a class="el" href="rpmdb_8h-source.html">rpmdb.h</a>.
</div>
</div><p>
<a class="anchor" name="gf3e51332f8c9054b134d0c4822d59fd8"></a><!-- doxytag: member="rpmlib.h::rpmdb" ref="gf3e51332f8c9054b134d0c4822d59fd8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structrpmdb__s.html">rpmdb_s</a>* <a class="el" href="structrpmdb__s.html">rpmdb</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Database of headers and tag value indices. 
<p>

<p>
Definition at line <a class="el" href="rpmlib_8h-source.html#l00108">108</a> of file <a class="el" href="rpmlib_8h-source.html">rpmlib.h</a>.
</div>
</div><p>
<a class="anchor" name="g78095e799d15f45a3a744836fdb5ff09"></a><!-- doxytag: member="rpmlib.h::rpmdbMatchIterator" ref="g78095e799d15f45a3a744836fdb5ff09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__rpmdbMatchIterator.html">_rpmdbMatchIterator</a>* <a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Database iterator. 
<p>

<p>
Definition at line <a class="el" href="rpmlib_8h-source.html#l00113">113</a> of file <a class="el" href="rpmlib_8h-source.html">rpmlib.h</a>.
</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="gbabc5c19e980e272eef3674013cdf7bf"></a><!-- doxytag: member="rpmdb.h::rpmdbFlags" ref="gbabc5c19e980e272eef3674013cdf7bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__rpmdb.html#gbabc5c19e980e272eef3674013cdf7bf">rpmdbFlags</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="ggbabc5c19e980e272eef3674013cdf7bf1b1fbb11b77201baf60c0725cf37d09d"></a><!-- doxytag: member="RPMDB_FLAG_JUSTCHECK" ref="ggbabc5c19e980e272eef3674013cdf7bf1b1fbb11b77201baf60c0725cf37d09d" args="" -->RPMDB_FLAG_JUSTCHECK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ggbabc5c19e980e272eef3674013cdf7bfde00da5bfb4d0281d5b20a2a6c9f82e9"></a><!-- doxytag: member="RPMDB_FLAG_MINIMAL" ref="ggbabc5c19e980e272eef3674013cdf7bfde00da5bfb4d0281d5b20a2a6c9f82e9" args="" -->RPMDB_FLAG_MINIMAL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ggbabc5c19e980e272eef3674013cdf7bf05063c3ee598eaab210db063baa34ce1"></a><!-- doxytag: member="RPMDB_FLAG_CHROOT" ref="ggbabc5c19e980e272eef3674013cdf7bf05063c3ee598eaab210db063baa34ce1" args="" -->RPMDB_FLAG_CHROOT</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="rpmdb_8h-source.html#l00444">444</a> of file <a class="el" href="rpmdb_8h-source.html">rpmdb.h</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g6fe29db07ee5aa54b3af80472875ae76"></a><!-- doxytag: member="rpmdb.h::rpmdbAdd" ref="g6fe29db07ee5aa54b3af80472875ae76" args="(rpmdb db, int iid, Header h, rpmts ts, rpmRC(*hdrchk)(rpmts ts, const void *uh, size_t uc, const char **msg))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbAdd           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>iid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheaderToken__s.html">Header</a>&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>(*)(<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const void *uh, size_t uc, const char **msg)&nbsp;</td>
          <td class="paramname"> <em>hdrchk</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add package header to rpm database and indices. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iid</em>&nbsp;</td><td>install transaction id (iid = 0 or -1 to skip) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>(unused) transaction set (or NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>(*hdrchk)</em>&nbsp;</td><td>(unused) <a class="el" href="package_8c.html#abf649f1a539bc4315e8f4f6f301af3e" title="Check header consistency, performing headerGetEntry() the hard way.">headerCheck()</a> vector (or NULL) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l02939">2939</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmdb_8c-source.html#l00402">_DBSWAP</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="legacy_8c-source.html#l00256">_noDirTokens</a>, <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="rpmdb_8c-source.html#l00761">blockSignals()</a>, <a class="el" href="rpmdb_8h-source.html#l00300">_dbiIndex::dbi_no_dbsync</a>, <a class="el" href="rpmdb_8h-source.html#l00298">_dbiIndex::dbi_permit_dups</a>, <a class="el" href="rpmdb_8h-source.html#l00377">_dbiIndex::dbi_rpmtag</a>, <a class="el" href="rpmdb_8h-source.html#l00383">_dbiIndex::dbi_txnid</a>, <a class="el" href="rpmdb_8c-source.html#l00562">dbiAppendSet()</a>, <a class="el" href="rpmdb_8h-source.html#l00744">dbiByteSwapped()</a>, <a class="el" href="rpmdb_8h-source.html#l00527">dbiCclose()</a>, <a class="el" href="rpmdb_8h-source.html#l00511">dbiCopen()</a>, <a class="el" href="rpmdb_8c-source.html#l00643">dbiFreeIndexSet()</a>, <a class="el" href="rpmdb_8h-source.html#l00583">dbiGet()</a>, <a class="el" href="rpmdb_8c-source.html#l00388">dbiIndexNewItem()</a>, <a class="el" href="rpmdb_8c-source.html#l00265">dbiOpen()</a>, <a class="el" href="rpmdb_8h-source.html#l00630">dbiPut()</a>, <a class="el" href="rpmdb_8h-source.html#l00696">dbiSync()</a>, <a class="el" href="rpmdb_8c-source.html#l00061">dbiTags</a>, <a class="el" href="rpmdb_8c-source.html#l00063">dbiTagsMax</a>, <a class="el" href="rpmdb_8c-source.html#l00417">dbt2set()</a>, <a class="el" href="legacy_8c-source.html#l00421">expandFilelist()</a>, <a class="el" href="header_8h-source.html#l00208">HEADER_MAGIC_NO</a>, <a class="el" href="hdrinline_8h-source.html#l00315">headerAddEntry()</a>, <a class="el" href="header_8h-source.html#l00704">headerFreeData()</a>, <a class="el" href="hdrinline_8h-source.html#l00290">headerGetEntryMinMemory()</a>, <a class="el" href="hdrinline_8h-source.html#l00230">headerIsEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00417">headerRemoveEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00120">headerSizeof()</a>, <a class="el" href="hdrinline_8h-source.html#l00135">headerUnload()</a>, <a class="el" href="rpmlib_8h-source.html#l00563">isInstallPreReq</a>, <a class="el" href="rpmdb_8c-source.html#l00806">isTemporaryDB()</a>, <a class="el" href="rpmdb_8c-source.html#l00069">myinstall_instance</a>, <a class="el" href="query_8c-source.html#l00423">nibble()</a>, <a class="el" href="rpmpgp_8c-source.html#l01014">pgpNewDig()</a>, <a class="el" href="rpmpgp_8c-source.html#l01109">pgpPrtPkts()</a>, <a class="el" href="header_8h-source.html#l00224">RPM_BIN_TYPE</a>, <a class="el" href="header_8h-source.html#l00218">RPM_CHAR_TYPE</a>, <a class="el" href="header_8h-source.html#l00226">RPM_I18NSTRING_TYPE</a>, <a class="el" href="header_8h-source.html#l00220">RPM_INT16_TYPE</a>, <a class="el" href="header_8h-source.html#l00221">RPM_INT32_TYPE</a>, <a class="el" href="header_8h-source.html#l00219">RPM_INT8_TYPE</a>, <a class="el" href="header_8h-source.html#l00225">RPM_STRING_ARRAY_TYPE</a>, <a class="el" href="header_8h-source.html#l00223">RPM_STRING_TYPE</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmerr_8h-source.html#l00033">RPMERR_DBCORRUPT</a>, <a class="el" href="rpmerr_8h-source.html#l00040">RPMERR_DBGETINDEX</a>, <a class="el" href="rpmerr_8h-source.html#l00041">RPMERR_DBPUTINDEX</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00015">RPMMESS_ERROR</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmlib_8h-source.html#l00023">RPMRC_FAIL</a>, <a class="el" href="rpmlib_8h-source.html#l00022">RPMRC_NOTFOUND</a>, <a class="el" href="rpmlib_8h-source.html#l00400">RPMTAG_BASENAMES</a>, <a class="el" href="rpmlib_8h-source.html#l00307">RPMTAG_FILEMD5S</a>, <a class="el" href="rpmlib_8h-source.html#l00286">RPMTAG_GROUP</a>, <a class="el" href="rpmlib_8h-source.html#l00411">RPMTAG_INSTALLTID</a>, <a class="el" href="rpmlib_8h-source.html#l00258">RPMTAG_PUBKEYS</a>, <a class="el" href="rpmlib_8h-source.html#l00412">RPMTAG_REMOVETID</a>, <a class="el" href="rpmlib_8h-source.html#l00326">RPMTAG_REQUIREFLAGS</a>, <a class="el" href="rpmlib_8h-source.html#l00327">RPMTAG_REQUIRENAME</a>, <a class="el" href="rpmlib_8h-source.html#l00348">RPMTAG_TRIGGERNAME</a>, <a class="el" href="rpmdb_8c-source.html#l00486">set2dbt()</a>, <a class="el" href="tagname_8c-source.html#l00035">tagName()</a>, <a class="el" href="rpmdb_8h-source.html#l00063">_dbiIndexItem::tagNum</a>, <a class="el" href="rpmdb_8c-source.html#l00398">_dbswap::ui</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00034">xcalloc()</a>.
<p>
Referenced by <a class="el" href="rpmcache_8c-source.html#l00102">ftsCacheUpdate()</a>, <a class="el" href="rpmchecksig_8c-source.html#l00421">rpmcliImportPubkey()</a>, <a class="el" href="rpmdb_8c-source.html#l03746">rpmdbRebuild()</a>, and <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
</div>
</div><p>
<a class="anchor" name="gbf6009a6794639ec5cbc65ab318102c5"></a><!-- doxytag: member="rpmdb.h::rpmdbAppendIterator" ref="gbf6009a6794639ec5cbc65ab318102c5" args="(rpmdbMatchIterator mi, const int *hdrNums, int nHdrNums)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbAppendIterator           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&nbsp;</td>
          <td class="paramname"> <em>hdrNums</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nHdrNums</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Append items to set of package instances to iterate. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdrNums</em>&nbsp;</td><td>array of package instances </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nHdrNums</em>&nbsp;</td><td>number of elements in array </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, 1 on failure (bad args) </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l02479">2479</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8c-source.html#l00562">dbiAppendSet()</a>, <a class="el" href="rpmdb_8c-source.html#l00673">_rpmdbMatchIterator::mi_set</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00034">xcalloc()</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l00163">markReplacedFiles()</a>.
</div>
</div><p>
<a class="anchor" name="gad60ebdc45b481f7d00f7510cb8f743c"></a><!-- doxytag: member="rpmdb.h::rpmdbCheckSignals" ref="gad60ebdc45b481f7d00f7510cb8f743c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbCheckSignals           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check for and exit on termination signals. 
<p>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l00747">747</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00168">EXIT_FAILURE</a>, <a class="el" href="rpmdb_8c-source.html#l00703">rpmdbCheckTerminate()</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, and <a class="el" href="rpmsq_8c-source.html#l00266">rpmsqCaught</a>.
<p>
Referenced by <a class="el" href="rpmmodule_8c-source.html#l00108">checkSignals()</a>, <a class="el" href="rpmdb_8c-source.html#l02490">rpmdbInitIterator()</a>, <a class="el" href="query_8c-source.html#l00436">rpmQueryVerify()</a>, <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, and <a class="el" href="rpmdb_8c-source.html#l00781">unblockSignals()</a>.
</div>
</div><p>
<a class="anchor" name="g17f500c7432de8931552787451ae34af"></a><!-- doxytag: member="rpmdb.h::rpmdbCheckTerminate" ref="g17f500c7432de8931552787451ae34af" args="(int terminate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbCheckTerminate           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>terminate</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check rpmdb signal handler for trapped signal and/or requested exit, clean up any open iterators and databases on termination condition. 
<p>
On non-zero exit any open references to rpmdb are invalid and cannot be accessed anymore, calling process should terminate immediately. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>terminate</em>&nbsp;</td><td>0 to only check for signals, 1 to terminate anyway </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 to continue, 1 if termination cleanup was done. </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l00703">703</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8h-source.html#l00425">rpmdb_s::db_next</a>, <a class="el" href="rpmdb_8c-source.html#l00666">_rpmdbMatchIterator::mi_next</a>, <a class="el" href="rpmdb_8c-source.html#l00869">rpmdbClose()</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l00698">rpmdbRock</a>, <a class="el" href="rpmdb_8c-source.html#l00701">rpmmiRock</a>, and <a class="el" href="rpmsq_8c-source.html#l00266">rpmsqCaught</a>.
<p>
Referenced by <a class="el" href="rpmmodule_8c-source.html#l00249">rpm_exithook()</a>, and <a class="el" href="rpmdb_8c-source.html#l00747">rpmdbCheckSignals()</a>.
</div>
</div><p>
<a class="anchor" name="g534a3cbbecac13bdf5ca5de61e6e8563"></a><!-- doxytag: member="rpmdb.h::rpmdbClose" ref="g534a3cbbecac13bdf5ca5de61e6e8563" args="(rpmdb db)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbClose           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Close all database indices and free rpmdb. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l00869">869</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8h-source.html#l00430">rpmdb_s::_dbi</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmdb_8h-source.html#l00423">rpmdb_s::db_bits</a>, <a class="el" href="rpmdb_8h-source.html#l00405">rpmdb_s::db_errpfx</a>, <a class="el" href="rpmdb_8h-source.html#l00399">rpmdb_s::db_home</a>, <a class="el" href="rpmdb_8h-source.html#l00429">rpmdb_s::db_ndbi</a>, <a class="el" href="rpmdb_8h-source.html#l00397">rpmdb_s::db_root</a>, <a class="el" href="rpmdb_8h-source.html#l00682">dbiClose()</a>, <a class="el" href="llex_8c-source.html#l00025">next</a>, <a class="el" href="rpmdb_8h-source.html#l00437">rpmdb_s::nrefs</a>, <a class="el" href="rpmdb_8c-source.html#l00085">PBM_FREE</a>, <a class="el" href="rpmdb_8c-source.html#l00698">rpmdbRock</a>, <a class="el" href="rpmdb_8h-source.html#l00833">rpmdbUnlink</a>, and <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>.
<p>
Referenced by <a class="el" href="dumpdb_8c-source.html#l00011">main()</a>, <a class="el" href="rpmdb_8c-source.html#l01017">openDatabase()</a>, <a class="el" href="rpmdb-py_8c-source.html#l00206">rpmdb_dealloc()</a>, <a class="el" href="rpmdb_8c-source.html#l00703">rpmdbCheckTerminate()</a>, <a class="el" href="rpmdb_8c-source.html#l01142">rpmdbInit()</a>, <a class="el" href="rpmdb_8c-source.html#l03746">rpmdbRebuild()</a>, <a class="el" href="rpmdb_8c-source.html#l01163">rpmdbVerify()</a>, <a class="el" href="rpmts_8c-source.html#l00156">rpmtsCloseDB()</a>, and <a class="el" href="rpmts_8c-source.html#l00486">rpmtsCloseSDB()</a>.
</div>
</div><p>
<a class="anchor" name="g494f8b8c1ca3cf8b7c54d5d59d6c5821"></a><!-- doxytag: member="rpmdb.h::rpmdbCountPackages" ref="g494f8b8c1ca3cf8b7c54d5d59d6c5821" args="(rpmdb db, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbCountPackages           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return number of instances of package in rpm database. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structname.html">name</a></em>&nbsp;</td><td>rpm package <a class="el" href="structname.html">name</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of instances </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l01354">1354</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="rpmdb_8h-source.html#l00377">_dbiIndex::dbi_rpmtag</a>, <a class="el" href="rpmdb_8h-source.html#l00383">_dbiIndex::dbi_txnid</a>, <a class="el" href="rpmdb_8h-source.html#l00527">dbiCclose()</a>, <a class="el" href="rpmdb_8h-source.html#l00511">dbiCopen()</a>, <a class="el" href="rpmdb_8c-source.html#l00643">dbiFreeIndexSet()</a>, <a class="el" href="rpmdb_8h-source.html#l00583">dbiGet()</a>, <a class="el" href="rpmdb_8c-source.html#l00628">dbiIndexSetCount()</a>, <a class="el" href="rpmdb_8c-source.html#l00265">dbiOpen()</a>, <a class="el" href="rpmdb_8c-source.html#l00417">dbt2set()</a>, <a class="el" href="rpmerr_8h-source.html#l00040">RPMERR_DBGETINDEX</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="rpmlib_8h-source.html#l00264">RPMTAG_NAME</a>, and <a class="el" href="tagname_8c-source.html#l00035">tagName()</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01017">handleOneTrigger()</a>, <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>, and <a class="el" href="psm_8c-source.html#l01119">runTriggers()</a>.
</div>
</div><p>
<a class="anchor" name="g78f899180a81d765cccd6eb204d8fc37"></a><!-- doxytag: member="fprint.h::rpmdbFindFpList" ref="g78f899180a81d765cccd6eb204d8fc37" args="(rpmdb db, fingerPrint *fpList, dbiIndexSet *matchList, int numItems)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbFindFpList           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfingerPrint__s.html">fingerPrint</a> *&nbsp;</td>
          <td class="paramname"> <em>fpList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__dbiIndexSet.html">dbiIndexSet</a> *&nbsp;</td>
          <td class="paramname"> <em>matchList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numItems</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find fingerprint matches in database. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fpList</em>&nbsp;</td><td>fingerprint array </td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>matchList</em>&nbsp;</td><td>returned fingerprint matches </td></tr>
  </table>
</dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>numItems</em>&nbsp;</td><td>number of fingerprint items </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 always </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l03412">3412</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmdb_8h-source.html#l00072">_dbiIndexSet::count</a>, <a class="el" href="rpmdb_8c-source.html#l00562">dbiAppendSet()</a>, <a class="el" href="fprint_8h-source.html#l00056">FP_EQUAL</a>, <a class="el" href="fprint_8c-source.html#l00013">fpCacheCreate()</a>, <a class="el" href="fprint_8c-source.html#l00023">fpCacheFree()</a>, <a class="el" href="fprint_8c-source.html#l00236">fpLookupList()</a>, <a class="el" href="rpmdb_8h-source.html#l00064">_dbiIndexItem::fpNum</a>, <a class="el" href="rpmdb_8h-source.html#l00062">_dbiIndexItem::hdrNum</a>, <a class="el" href="header_8h-source.html#l00704">headerFreeData()</a>, <a class="el" href="hdrinline_8h-source.html#l00290">headerGetEntryMinMemory()</a>, <a class="el" href="rpmdb_8c-source.html#l00676">_rpmdbMatchIterator::mi_data</a>, <a class="el" href="rpmdb_8c-source.html#l00675">_rpmdbMatchIterator::mi_key</a>, <a class="el" href="rpmdb_8c-source.html#l00673">_rpmdbMatchIterator::mi_set</a>, <a class="el" href="rpmdb_8c-source.html#l00677">_rpmdbMatchIterator::mi_setx</a>, <a class="el" href="rpmdb_8h-source.html#l00071">_dbiIndexSet::recs</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l01739">rpmdbGetIteratorCount()</a>, <a class="el" href="rpmdb_8c-source.html#l02393">rpmdbGrowIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l02490">rpmdbInitIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l02371">rpmdbSortIterator()</a>, <a class="el" href="rpmlib_8h-source.html#l00400">RPMTAG_BASENAMES</a>, <a class="el" href="rpmlib_8h-source.html#l00399">RPMTAG_DIRINDEXES</a>, <a class="el" href="rpmlib_8h-source.html#l00401">RPMTAG_DIRNAMES</a>, <a class="el" href="rpmdb_8c-source.html#l03393">skipDir()</a>, <a class="el" href="rpmdb_8h-source.html#l00063">_dbiIndexItem::tagNum</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00034">xcalloc()</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="g8b9f2121415fcec732234cf2115f6c7d"></a><!-- doxytag: member="rpmdb.h::rpmdbFreeIterator" ref="g8b9f2121415fcec732234cf2115f6c7d" args="(rpmdbMatchIterator mi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> rpmdbFreeIterator           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy rpm database iterator. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL always </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l01677">1677</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmdb_8h-source.html#l00527">dbiCclose()</a>, <a class="el" href="rpmdb_8c-source.html#l00265">dbiOpen()</a>, <a class="el" href="rpmdb_8c-source.html#l00671">_rpmdbMatchIterator::mi_db</a>, <a class="el" href="rpmdb_8c-source.html#l00674">_rpmdbMatchIterator::mi_dbc</a>, <a class="el" href="rpmdb_8c-source.html#l00686">_rpmdbMatchIterator::mi_nre</a>, <a class="el" href="rpmdb_8c-source.html#l00688">_rpmdbMatchIterator::mi_re</a>, <a class="el" href="rpmdb_8c-source.html#l01621">miFreeHeader()</a>, <a class="el" href="llex_8c-source.html#l00025">next</a>, <a class="el" href="rpmdb_8c-source.html#l00655">miRE_s::pattern</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, and <a class="el" href="rpmdb_8c-source.html#l00701">rpmmiRock</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01254">_rpmtsAddRollbackElement()</a>, <a class="el" href="depends_8c-source.html#l00749">checkPackageSet()</a>, <a class="el" href="rpmdb_8c-source.html#l01425">dbiFindMatches()</a>, <a class="el" href="rpmcache_8c-source.html#l00102">ftsCacheUpdate()</a>, <a class="el" href="transaction_8c-source.html#l00117">handleInstInstalledFiles()</a>, <a class="el" href="transaction_8c-source.html#l00261">handleRmvdInstalledFiles()</a>, <a class="el" href="rpminstall_8c-source.html#l00965">IDTXload()</a>, <a class="el" href="dumpdb_8c-source.html#l00011">main()</a>, <a class="el" href="psm_8c-source.html#l00163">markReplacedFiles()</a>, <a class="el" href="query_8c-source.html#l00402">rpmcliShowMatches()</a>, <a class="el" href="rpmdb-py_8c-source.html#l00147">rpmdb_length()</a>, <a class="el" href="rpmdb-py_8c-source.html#l00166">rpmdb_subscript()</a>, <a class="el" href="rpmdb_8c-source.html#l00703">rpmdbCheckTerminate()</a>, <a class="el" href="rpmdb_8c-source.html#l01206">rpmdbFindByFile()</a>, <a class="el" href="rpmdb_8c-source.html#l03412">rpmdbFindFpList()</a>, <a class="el" href="rpmdb_8c-source.html#l03746">rpmdbRebuild()</a>, <a class="el" href="rpmdb_8c-source.html#l02632">rpmdbRemove()</a>, <a class="el" href="rpminstall_8c-source.html#l00752">rpmErase()</a>, <a class="el" href="rpmgi_8c-source.html#l00405">rpmgiFree()</a>, <a class="el" href="rpmgi_8c-source.html#l00330">rpmgiInitFilter()</a>, <a class="el" href="rpmgi_8c-source.html#l00478">rpmgiNext()</a>, <a class="el" href="rpminstall_8c-source.html#l00286">rpmInstall()</a>, <a class="el" href="rpmmi-py_8c-source.html#l00196">rpmmi_dealloc()</a>, <a class="el" href="rpmmi-py_8c-source.html#l00083">rpmmi_iternext()</a>, <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>, <a class="el" href="query_8c-source.html#l00436">rpmQueryVerify()</a>, <a class="el" href="rpmts-py_8c-source.html#l00272">rpmts_AddErase()</a>, <a class="el" href="depends_8c-source.html#l00127">rpmtsAddInstallElement()</a>, <a class="el" href="depends_8c-source.html#l01672">rpmtsCheck()</a>, <a class="el" href="rpmts_8c-source.html#l00338">rpmtsFindPubkey()</a>, <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, <a class="el" href="rpmts_8c-source.html#l00547">rpmtsSolve()</a>, <a class="el" href="psm_8c-source.html#l01161">runImmedTriggers()</a>, <a class="el" href="psm_8c-source.html#l01119">runTriggers()</a>, and <a class="el" href="depends_8c-source.html#l00405">unsatisfiedDepend()</a>.
</div>
</div><p>
<a class="anchor" name="gac81920c8e50f62b109183999a8e7da4"></a><!-- doxytag: member="rpmdb.h::rpmdbGetIteratorCount" ref="gac81920c8e50f62b109183999a8e7da4" args="(rpmdbMatchIterator mi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbGetIteratorCount           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return number of elements in rpm database iterator. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of elements </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l01739">1739</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8h-source.html#l00072">_dbiIndexSet::count</a>, and <a class="el" href="rpmdb_8c-source.html#l00673">_rpmdbMatchIterator::mi_set</a>.
<p>
Referenced by <a class="el" href="rpmcache_8c-source.html#l00102">ftsCacheUpdate()</a>, <a class="el" href="rpmdb_8c-source.html#l03412">rpmdbFindFpList()</a>, <a class="el" href="rpminstall_8c-source.html#l00286">rpmInstall()</a>, <a class="el" href="rpmmi-py_8c-source.html#l00134">rpmmi_Count()</a>, <a class="el" href="rpmts-py_8c-source.html#l00272">rpmts_AddErase()</a>, and <a class="el" href="psm_8c-source.html#l01161">runImmedTriggers()</a>.
</div>
</div><p>
<a class="anchor" name="gdaf67ee2dc1406454c82217f2aeaf906"></a><!-- doxytag: member="rpmdb.h::rpmdbGetIteratorFileNum" ref="gdaf67ee2dc1406454c82217f2aeaf906" args="(rpmdbMatchIterator mi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int rpmdbGetIteratorFileNum           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l01735">1735</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8c-source.html#l00685">_rpmdbMatchIterator::mi_filenum</a>.
<p>
Referenced by <a class="el" href="rpmts_8c-source.html#l00338">rpmtsFindPubkey()</a>.
</div>
</div><p>
<a class="anchor" name="g6390115472d641de8bdc50cb5f00dbed"></a><!-- doxytag: member="rpmdb.h::rpmdbGetIteratorOffset" ref="g6390115472d641de8bdc50cb5f00dbed" args="(rpmdbMatchIterator mi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int rpmdbGetIteratorOffset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return header join key for current position of rpm database iterator. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>current header join key </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l01731">1731</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8c-source.html#l00684">_rpmdbMatchIterator::mi_offset</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00965">IDTXload()</a>, <a class="el" href="psm_8c-source.html#l00163">markReplacedFiles()</a>, <a class="el" href="rpminstall_8c-source.html#l00752">rpmErase()</a>, <a class="el" href="rpmgi_8c-source.html#l00478">rpmgiNext()</a>, <a class="el" href="rpmmi-py_8c-source.html#l00119">rpmmi_Instance()</a>, <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>, <a class="el" href="rpmts-py_8c-source.html#l00272">rpmts_AddErase()</a>, <a class="el" href="depends_8c-source.html#l00127">rpmtsAddInstallElement()</a>, and <a class="el" href="rpmts_8c-source.html#l00338">rpmtsFindPubkey()</a>.
</div>
</div><p>
<a class="anchor" name="gf67b15f34035a0f7974c5ef28286d789"></a><!-- doxytag: member="rpmdb.h::rpmdbInit" ref="gf67b15f34035a0f7974c5ef28286d789" args="(const char *prefix, int perms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbInit           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>perms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize database. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>prefix</em>&nbsp;</td><td>path to top of install tree </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>perms</em>&nbsp;</td><td>database permissions </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l01142">1142</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8c-source.html#l01017">openDatabase()</a>, <a class="el" href="rpmdb_8h-source.html#l00445">RPMDB_FLAG_JUSTCHECK</a>, <a class="el" href="rpmdb_8c-source.html#l00869">rpmdbClose()</a>, <a class="el" href="rpmdb_8c-source.html#l00822">rpmdbOpenAll()</a>, and <a class="el" href="macro_8c-source.html#l02139">rpmExpandNumeric()</a>.
<p>
Referenced by <a class="el" href="rpmts_8c-source.html#l00193">rpmtsInitDB()</a>.
</div>
</div><p>
<a class="anchor" name="g2cf5104a3a6483662a608e5d4b449e8d"></a><!-- doxytag: member="rpmdb.h::rpmdbInitIterator" ref="g2cf5104a3a6483662a608e5d4b449e8d" args="(rpmdb db, rpmTag rpmtag, const void *keyp, size_t keylen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a> rpmdbInitIterator           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#4f08fde948b5511f2a904dc92e39e211">rpmTag</a>&nbsp;</td>
          <td class="paramname"> <em>rpmtag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>keyp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>keylen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return database iterator. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rpmtag</em>&nbsp;</td><td>rpm tag </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keyp</em>&nbsp;</td><td>key data (NULL for sequential access) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keylen</em>&nbsp;</td><td>key data length (0 will use strlen(keyp)) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL on failure </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l02490">2490</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmdb_8c-source.html#l00402">_DBSWAP</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmdb_8h-source.html#l00377">_dbiIndex::dbi_rpmtag</a>, <a class="el" href="rpmdb_8h-source.html#l00383">_dbiIndex::dbi_txnid</a>, <a class="el" href="rpmdb_8h-source.html#l00744">dbiByteSwapped()</a>, <a class="el" href="rpmdb_8h-source.html#l00527">dbiCclose()</a>, <a class="el" href="rpmdb_8h-source.html#l00511">dbiCopen()</a>, <a class="el" href="rpmdb_8c-source.html#l01525">dbiFindByLabel()</a>, <a class="el" href="rpmdb_8c-source.html#l00643">dbiFreeIndexSet()</a>, <a class="el" href="rpmdb_8h-source.html#l00583">dbiGet()</a>, <a class="el" href="rpmdb_8c-source.html#l00265">dbiOpen()</a>, <a class="el" href="rpmdb_8c-source.html#l00417">dbt2set()</a>, <a class="el" href="rpmdb_8c-source.html#l00675">_rpmdbMatchIterator::mi_key</a>, <a class="el" href="rpmdb_8c-source.html#l00666">_rpmdbMatchIterator::mi_next</a>, <a class="el" href="rpmdb_8c-source.html#l00747">rpmdbCheckSignals()</a>, <a class="el" href="rpmdb_8c-source.html#l01206">rpmdbFindByFile()</a>, <a class="el" href="rpmlib_8h-source.html#l00219">RPMDBI_LABEL</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmdb_8h-source.html#l00851">rpmdbLink</a>, <a class="el" href="rpmerr_8h-source.html#l00040">RPMERR_DBGETINDEX</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="rpmdb_8c-source.html#l00701">rpmmiRock</a>, <a class="el" href="rpmlib_8h-source.html#l00400">RPMTAG_BASENAMES</a>, <a class="el" href="rpmlib_8h-source.html#l00264">RPMTAG_NAME</a>, <a class="el" href="tagname_8c-source.html#l00035">tagName()</a>, <a class="el" href="rpmdb_8c-source.html#l00398">_dbswap::ui</a>, <a class="el" href="rpmmalloc_8c-source.html#l00034">xcalloc()</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00024">xmalloc()</a>.
<p>
Referenced by <a class="el" href="rpmdb_8c-source.html#l01425">dbiFindMatches()</a>, <a class="el" href="dumpdb_8c-source.html#l00011">main()</a>, <a class="el" href="rpmdb-py_8c-source.html#l00147">rpmdb_length()</a>, <a class="el" href="rpmdb-py_8c-source.html#l00110">rpmdb_Match()</a>, <a class="el" href="rpmdb-py_8c-source.html#l00166">rpmdb_subscript()</a>, <a class="el" href="rpmdb_8c-source.html#l01206">rpmdbFindByFile()</a>, <a class="el" href="rpmdb_8c-source.html#l03412">rpmdbFindFpList()</a>, <a class="el" href="rpmdb_8c-source.html#l03746">rpmdbRebuild()</a>, <a class="el" href="rpmdb_8c-source.html#l02632">rpmdbRemove()</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, and <a class="el" href="rpmts_8c-source.html#l00547">rpmtsSolve()</a>.
</div>
</div><p>
<a class="anchor" name="g87c31b669de15985b9c3842f49b30007"></a><!-- doxytag: member="rpmdb.h::rpmdbLink" ref="g87c31b669de15985b9c3842f49b30007" args="(rpmdb db, const char *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmdb__s.html">rpmdb</a> rpmdbLink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reference a database instance. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>new rpm database reference </dd></dl>

</div>
</div><p>
<a class="anchor" name="gf5d8e3f7efbd6885ee7577d2729b8476"></a><!-- doxytag: member="rpmdb.h::rpmdbNextIterator" ref="gf5d8e3f7efbd6885ee7577d2729b8476" args="(rpmdbMatchIterator mi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structheaderToken__s.html">Header</a> rpmdbNextIterator           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return next package header from iteration. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL on end of iteration. </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l02166">2166</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmdb_8c-source.html#l00402">_DBSWAP</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmdb_8c-source.html#l00007">_USE_COPY_LOAD</a>, <a class="el" href="rpmdb_8h-source.html#l00072">_dbiIndexSet::count</a>, <a class="el" href="rpmdb_8h-source.html#l00423">rpmdb_s::db_bits</a>, <a class="el" href="rpmdb_8h-source.html#l00424">rpmdb_s::db_nbits</a>, <a class="el" href="rpmdb_8h-source.html#l00383">_dbiIndex::dbi_txnid</a>, <a class="el" href="rpmdb_8h-source.html#l00744">dbiByteSwapped()</a>, <a class="el" href="rpmdb_8h-source.html#l00511">dbiCopen()</a>, <a class="el" href="rpmdb_8h-source.html#l00583">dbiGet()</a>, <a class="el" href="rpmdb_8c-source.html#l00638">dbiIndexRecordFileNumber()</a>, <a class="el" href="rpmdb_8c-source.html#l00633">dbiIndexRecordOffset()</a>, <a class="el" href="rpmdb_8c-source.html#l00265">dbiOpen()</a>, <a class="el" href="header__internal_8h-source.html#l00064">headerToken_s::flags</a>, <a class="el" href="hdrinline_8h-source.html#l00187">headerCopyLoad()</a>, <a class="el" href="header__internal_8h-source.html#l00066">HEADERFLAG_ALLOCATED</a>, <a class="el" href="hdrinline_8h-source.html#l00230">headerIsEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00175">headerLoad()</a>, <a class="el" href="rpmdb_8c-source.html#l00681">_rpmdbMatchIterator::mi_cflags</a>, <a class="el" href="rpmdb_8c-source.html#l00676">_rpmdbMatchIterator::mi_data</a>, <a class="el" href="rpmdb_8c-source.html#l00671">_rpmdbMatchIterator::mi_db</a>, <a class="el" href="rpmdb_8c-source.html#l00674">_rpmdbMatchIterator::mi_dbc</a>, <a class="el" href="rpmdb_8c-source.html#l00685">_rpmdbMatchIterator::mi_filenum</a>, <a class="el" href="rpmdb_8c-source.html#l00679">_rpmdbMatchIterator::mi_h</a>, <a class="el" href="struct__rpmdbMatchIterator.html#b407e9cd21d3f1fdf4ecabe41394b587">_rpmdbMatchIterator::mi_hdrchk</a>, <a class="el" href="rpmdb_8c-source.html#l00675">_rpmdbMatchIterator::mi_key</a>, <a class="el" href="rpmdb_8c-source.html#l00669">_rpmdbMatchIterator::mi_keylen</a>, <a class="el" href="rpmdb_8c-source.html#l00668">_rpmdbMatchIterator::mi_keyp</a>, <a class="el" href="rpmdb_8c-source.html#l00682">_rpmdbMatchIterator::mi_modified</a>, <a class="el" href="rpmdb_8c-source.html#l00684">_rpmdbMatchIterator::mi_offset</a>, <a class="el" href="rpmdb_8c-source.html#l00683">_rpmdbMatchIterator::mi_prevoffset</a>, <a class="el" href="rpmdb_8c-source.html#l00673">_rpmdbMatchIterator::mi_set</a>, <a class="el" href="rpmdb_8c-source.html#l00677">_rpmdbMatchIterator::mi_setx</a>, <a class="el" href="rpmdb_8c-source.html#l00690">_rpmdbMatchIterator::mi_ts</a>, <a class="el" href="rpmdb_8c-source.html#l01621">miFreeHeader()</a>, <a class="el" href="rpmdb_8c-source.html#l02011">mireSkip()</a>, <a class="el" href="rpmdb_8c-source.html#l00088">PBM_ISSET</a>, <a class="el" href="rpmdb_8c-source.html#l00099">PBM_REALLOC()</a>, <a class="el" href="rpmdb_8c-source.html#l00086">PBM_SET</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmerr_8h-source.html#l00122">RPMERR_BADHEADER</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00015">RPMMESS_ERROR</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmlib_8h-source.html#l00023">RPMRC_FAIL</a>, <a class="el" href="rpmlib_8h-source.html#l00022">RPMRC_NOTFOUND</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmlib_8h-source.html#l00264">RPMTAG_NAME</a>, and <a class="el" href="rpmdb_8c-source.html#l00398">_dbswap::ui</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01254">_rpmtsAddRollbackElement()</a>, <a class="el" href="depends_8c-source.html#l00749">checkPackageSet()</a>, <a class="el" href="rpmdb_8c-source.html#l01425">dbiFindMatches()</a>, <a class="el" href="transaction_8c-source.html#l00117">handleInstInstalledFiles()</a>, <a class="el" href="transaction_8c-source.html#l00261">handleRmvdInstalledFiles()</a>, <a class="el" href="rpminstall_8c-source.html#l00965">IDTXload()</a>, <a class="el" href="dumpdb_8c-source.html#l00011">main()</a>, <a class="el" href="psm_8c-source.html#l00163">markReplacedFiles()</a>, <a class="el" href="query_8c-source.html#l00402">rpmcliShowMatches()</a>, <a class="el" href="rpmdb-py_8c-source.html#l00147">rpmdb_length()</a>, <a class="el" href="rpmdb-py_8c-source.html#l00166">rpmdb_subscript()</a>, <a class="el" href="rpmdb_8c-source.html#l01206">rpmdbFindByFile()</a>, <a class="el" href="rpmdb_8c-source.html#l03412">rpmdbFindFpList()</a>, <a class="el" href="rpmdb_8c-source.html#l03746">rpmdbRebuild()</a>, <a class="el" href="rpmdb_8c-source.html#l02632">rpmdbRemove()</a>, <a class="el" href="rpminstall_8c-source.html#l00752">rpmErase()</a>, <a class="el" href="rpmgi_8c-source.html#l00478">rpmgiNext()</a>, <a class="el" href="rpminstall_8c-source.html#l00286">rpmInstall()</a>, <a class="el" href="rpmmi-py_8c-source.html#l00083">rpmmi_iternext()</a>, <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>, <a class="el" href="query_8c-source.html#l00436">rpmQueryVerify()</a>, <a class="el" href="rpmts-py_8c-source.html#l00272">rpmts_AddErase()</a>, <a class="el" href="depends_8c-source.html#l00127">rpmtsAddInstallElement()</a>, <a class="el" href="rpmts_8c-source.html#l00338">rpmtsFindPubkey()</a>, <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, <a class="el" href="rpmts_8c-source.html#l00547">rpmtsSolve()</a>, <a class="el" href="psm_8c-source.html#l01161">runImmedTriggers()</a>, <a class="el" href="psm_8c-source.html#l01119">runTriggers()</a>, and <a class="el" href="depends_8c-source.html#l00405">unsatisfiedDepend()</a>.
</div>
</div><p>
<a class="anchor" name="g3032a2649d7761087dfd25c29119ebc5"></a><!-- doxytag: member="rpmdb.h::rpmdbOpen" ref="g3032a2649d7761087dfd25c29119ebc5" args="(const char *prefix, rpmdb *dbp, int mode, int perms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbOpen           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a> *&nbsp;</td>
          <td class="paramname"> <em>dbp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>perms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open rpm database. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>prefix</em>&nbsp;</td><td>path to top of install tree </td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dbp</em>&nbsp;</td><td>address of rpm database </td></tr>
  </table>
</dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>open(2) flags: O_RDWR or O_RDONLY (O_CREAT also) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>perms</em>&nbsp;</td><td>database permissions </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l01134">1134</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8c-source.html#l01017">openDatabase()</a>, and <a class="el" href="macro_8c-source.html#l02139">rpmExpandNumeric()</a>.
<p>
Referenced by <a class="el" href="dumpdb_8c-source.html#l00011">main()</a>, <a class="el" href="rpmts_8c-source.html#l00170">rpmtsOpenDB()</a>, and <a class="el" href="rpmts_8c-source.html#l00500">rpmtsOpenSDB()</a>.
</div>
</div><p>
<a class="anchor" name="g075a0f702ca8bc4d74454b1f56e73a18"></a><!-- doxytag: member="rpmdb.h::rpmdbOpenAll" ref="g075a0f702ca8bc4d74454b1f56e73a18" args="(rpmdb db)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbOpenAll           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open all database indices. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l00822">822</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8h-source.html#l00430">rpmdb_s::_dbi</a>, <a class="el" href="rpmdb_8c-source.html#l00265">dbiOpen()</a>, <a class="el" href="rpmdb_8c-source.html#l00061">dbiTags</a>, <a class="el" href="rpmdb_8c-source.html#l00063">dbiTagsMax</a>, and <a class="el" href="rpmdb_8c-source.html#l00806">isTemporaryDB()</a>.
<p>
Referenced by <a class="el" href="rpmdb_8c-source.html#l01142">rpmdbInit()</a>, <a class="el" href="rpmdb_8c-source.html#l01163">rpmdbVerify()</a>, and <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="g1735dfaf4b1a88fbe8c22ecb59623954"></a><!-- doxytag: member="rpmdb.h::rpmdbPruneIterator" ref="g1735dfaf4b1a88fbe8c22ecb59623954" args="(rpmdbMatchIterator mi, int *hdrNums, int nHdrNums, int sorted)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbPruneIterator           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>hdrNums</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nHdrNums</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sorted</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove items from set of package instances to iterate. 
<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Sorted hdrNums are always passed in rpmlib. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdrNums</em>&nbsp;</td><td>array of package instances </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nHdrNums</em>&nbsp;</td><td>number of elements in array </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sorted</em>&nbsp;</td><td>is the array sorted? (array will be sorted on return) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, 1 on failure (bad args) </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l02468">2468</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8c-source.html#l00601">dbiPruneSet()</a>, and <a class="el" href="rpmdb_8c-source.html#l00673">_rpmdbMatchIterator::mi_set</a>.
<p>
Referenced by <a class="el" href="depends_8c-source.html#l00749">checkPackageSet()</a>, <a class="el" href="depends_8c-source.html#l00127">rpmtsAddInstallElement()</a>, and <a class="el" href="depends_8c-source.html#l00405">unsatisfiedDepend()</a>.
</div>
</div><p>
<a class="anchor" name="g328f470eed143da0e81ef414b664cf45"></a><!-- doxytag: member="rpmdb.h::rpmdbRebuild" ref="g328f470eed143da0e81ef414b664cf45" args="(const char *prefix, rpmts ts, rpmRC(*hdrchk)(rpmts ts, const void *uh, size_t uc, const char **msg))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbRebuild           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>(*)(<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const void *uh, size_t uc, const char **msg)&nbsp;</td>
          <td class="paramname"> <em>hdrchk</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rebuild database indices from package headers. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>prefix</em>&nbsp;</td><td>path to top of install tree </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set (or NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>(*hdrchk)</em>&nbsp;</td><td><a class="el" href="package_8c.html#abf649f1a539bc4315e8f4f6f301af3e" title="Check header consistency, performing headerGetEntry() the hard way.">headerCheck()</a> vector (or NULL) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l03746">3746</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmdb_8c-source.html#l00054">_db_filter_dups</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmdb_8c-source.html#l00052">_rebuildinprogress</a>, <a class="el" href="rpmdb_8c.html#988c034a1ddbb3f622a1efa13373a8ba">_RECNUM</a>, <a class="el" href="rpmdb_8h-source.html#l00403">rpmdb_s::db_api</a>, <a class="el" href="rpmdb_8h-source.html#l00407">rpmdb_s::db_filter_dups</a>, <a class="el" href="system_8h.html#a5e6580e8f12679392f66d3c9b146ab4">errno</a>, <a class="el" href="system_8h-source.html#l00183">F_OK</a>, <a class="el" href="hdrinline_8h-source.html#l00163">headerCopy()</a>, <a class="el" href="hdrinline_8h-source.html#l00047">headerFree()</a>, <a class="el" href="hdrinline_8h-source.html#l00230">headerIsEntry()</a>, <a class="el" href="hdrNVR_8c-source.html#l00009">headerNVR()</a>, <a class="el" href="rpmrpc_8c-source.html#l00085">Mkdir()</a>, <a class="el" href="rpmdb_8c-source.html#l01017">openDatabase()</a>, <a class="el" href="rpmrpc_8c-source.html#l00145">Rmdir()</a>, <a class="el" href="rpmdb_8h-source.html#l00446">RPMDB_FLAG_MINIMAL</a>, <a class="el" href="rpmdb_8c-source.html#l02939">rpmdbAdd()</a>, <a class="el" href="rpmdb_8c-source.html#l00869">rpmdbClose()</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmdb_8c-source.html#l02490">rpmdbInitIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l03633">rpmdbMoveDatabase()</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l03575">rpmdbRemoveDatabase()</a>, <a class="el" href="rpmdb_8c-source.html#l02151">rpmdbSetHdrChk()</a>, <a class="el" href="rpmdb_8c-source.html#l01898">rpmdbSetIteratorRE()</a>, <a class="el" href="macro_8c-source.html#l01914">rpmDefineMacro()</a>, <a class="el" href="rpmerr_8h-source.html#l00032">RPMERR_INTERNAL</a>, <a class="el" href="rpmerr_8h-source.html#l00053">RPMERR_MKDIR</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="macro_8c-source.html#l02139">rpmExpandNumeric()</a>, <a class="el" href="macro_8c-source.html#l02254">rpmGetPath()</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00015">RPMMESS_ERROR</a>, <a class="el" href="rpmmessages_8h-source.html#l00013">RPMMESS_NORMAL</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmdb_8h-source.html#l00036">RPMMIRE_DEFAULT</a>, <a class="el" href="rpmlib_8h-source.html#l00275">RPMTAG_BUILDTIME</a>, <a class="el" href="rpmlib_8h-source.html#l00234">RPMTAG_HEADERIMAGE</a>, <a class="el" href="rpmlib_8h-source.html#l00264">RPMTAG_NAME</a>, <a class="el" href="rpmlib_8h-source.html#l00268">RPMTAG_RELEASE</a>, <a class="el" href="rpmlib_8h-source.html#l00266">RPMTAG_VERSION</a>, <a class="el" href="system_8h.html#58841684f76853b313e27e663c850381">stpcpy()</a>, <a class="el" href="file_8h-source.html#l00323">strerror</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00024">xmalloc()</a>.
<p>
Referenced by <a class="el" href="rpmts_8c-source.html#l00203">rpmtsRebuildDB()</a>.
</div>
</div><p>
<a class="anchor" name="gd76021e1b6863a5ff268b74a5a8b3e6f"></a><!-- doxytag: member="rpmdb.h::rpmdbRemove" ref="gd76021e1b6863a5ff268b74a5a8b3e6f" args="(rpmdb db, int rid, unsigned int hdrNum, rpmts ts, rpmRC(*hdrchk)(rpmts ts, const void *uh, size_t uc, const char **msg))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbRemove           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>hdrNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>(*)(<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const void *uh, size_t uc, const char **msg)&nbsp;</td>
          <td class="paramname"> <em>hdrchk</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove package header from rpm database and indices. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rid</em>&nbsp;</td><td>(unused) remove transaction id (rid = 0 or -1 to skip) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdrNum</em>&nbsp;</td><td>package instance number in database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>(unused) transaction set (or NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>(*hdrchk)</em>&nbsp;</td><td>(unused) <a class="el" href="package_8c.html#abf649f1a539bc4315e8f4f6f301af3e" title="Check header consistency, performing headerGetEntry() the hard way.">headerCheck()</a> vector (or NULL) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l02632">2632</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmdb_8c-source.html#l00402">_DBSWAP</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="rpmdb_8c-source.html#l00761">blockSignals()</a>, <a class="el" href="rpmdb_8h-source.html#l00744">dbiByteSwapped()</a>, <a class="el" href="rpmdb_8h-source.html#l00527">dbiCclose()</a>, <a class="el" href="rpmdb_8h-source.html#l00511">dbiCopen()</a>, <a class="el" href="rpmdb_8h-source.html#l00560">dbiDel()</a>, <a class="el" href="rpmdb_8c-source.html#l00643">dbiFreeIndexSet()</a>, <a class="el" href="rpmdb_8h-source.html#l00583">dbiGet()</a>, <a class="el" href="rpmdb_8c-source.html#l00388">dbiIndexNewItem()</a>, <a class="el" href="rpmdb_8c-source.html#l00265">dbiOpen()</a>, <a class="el" href="rpmdb_8c-source.html#l00601">dbiPruneSet()</a>, <a class="el" href="rpmdb_8h-source.html#l00630">dbiPut()</a>, <a class="el" href="rpmdb_8h-source.html#l00696">dbiSync()</a>, <a class="el" href="rpmdb_8c-source.html#l00061">dbiTags</a>, <a class="el" href="rpmdb_8c-source.html#l00063">dbiTagsMax</a>, <a class="el" href="rpmdb_8c-source.html#l00417">dbt2set()</a>, <a class="el" href="hdrinline_8h-source.html#l00315">headerAddEntry()</a>, <a class="el" href="header_8h-source.html#l00704">headerFreeData()</a>, <a class="el" href="hdrinline_8h-source.html#l00290">headerGetEntryMinMemory()</a>, <a class="el" href="hdrinline_8h-source.html#l00062">headerLink()</a>, <a class="el" href="hdrNVR_8c-source.html#l00009">headerNVR()</a>, <a class="el" href="rpmdb_8c-source.html#l00806">isTemporaryDB()</a>, <a class="el" href="query_8c-source.html#l00423">nibble()</a>, <a class="el" href="rpmpgp_8c-source.html#l01014">pgpNewDig()</a>, <a class="el" href="rpmpgp_8c-source.html#l01109">pgpPrtPkts()</a>, <a class="el" href="header_8h-source.html#l00224">RPM_BIN_TYPE</a>, <a class="el" href="header_8h-source.html#l00218">RPM_CHAR_TYPE</a>, <a class="el" href="header_8h-source.html#l00226">RPM_I18NSTRING_TYPE</a>, <a class="el" href="header_8h-source.html#l00220">RPM_INT16_TYPE</a>, <a class="el" href="header_8h-source.html#l00221">RPM_INT32_TYPE</a>, <a class="el" href="header_8h-source.html#l00219">RPM_INT8_TYPE</a>, <a class="el" href="header_8h-source.html#l00225">RPM_STRING_ARRAY_TYPE</a>, <a class="el" href="header_8h-source.html#l00223">RPM_STRING_TYPE</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmdb_8c-source.html#l02490">rpmdbInitIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmerr_8h-source.html#l00033">RPMERR_DBCORRUPT</a>, <a class="el" href="rpmerr_8h-source.html#l00040">RPMERR_DBGETINDEX</a>, <a class="el" href="rpmerr_8h-source.html#l00041">RPMERR_DBPUTINDEX</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmlib_8h-source.html#l00307">RPMTAG_FILEMD5S</a>, <a class="el" href="rpmlib_8h-source.html#l00258">RPMTAG_PUBKEYS</a>, <a class="el" href="rpmlib_8h-source.html#l00412">RPMTAG_REMOVETID</a>, <a class="el" href="rpmdb_8c-source.html#l00486">set2dbt()</a>, <a class="el" href="tagname_8c-source.html#l00035">tagName()</a>, and <a class="el" href="rpmdb_8c-source.html#l00398">_dbswap::ui</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
</div>
</div><p>
<a class="anchor" name="g9c376b0225cd66a32a1d2f27ac8dc04a"></a><!-- doxytag: member="rpmdb.h::rpmdbSetHdrChk" ref="g9c376b0225cd66a32a1d2f27ac8dc04a" args="(rpmdbMatchIterator mi, rpmts ts, rpmRC(*hdrchk)(rpmts ts, const void *uh, size_t uc, const char **msg))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbSetHdrChk           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>(*)(<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const void *uh, size_t uc, const char **msg)&nbsp;</td>
          <td class="paramname"> <em>hdrchk</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Modify iterator to verify retrieved header blobs. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>(*hdrchk)</em>&nbsp;</td><td><a class="el" href="package_8c.html#abf649f1a539bc4315e8f4f6f301af3e" title="Check header consistency, performing headerGetEntry() the hard way.">headerCheck()</a> vector </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 always </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l02151">2151</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="struct__rpmdbMatchIterator.html#b407e9cd21d3f1fdf4ecabe41394b587">_rpmdbMatchIterator::mi_hdrchk</a>, and <a class="el" href="rpmdb_8c-source.html#l00690">_rpmdbMatchIterator::mi_ts</a>.
<p>
Referenced by <a class="el" href="rpmdb_8c-source.html#l03746">rpmdbRebuild()</a>, and <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>.
</div>
</div><p>
<a class="anchor" name="g328723eac8c189ade897ebc7f2db3ca9"></a><!-- doxytag: member="rpmdb.h::rpmdbSetIteratorModified" ref="g328723eac8c189ade897ebc7f2db3ca9" args="(rpmdbMatchIterator mi, int modified)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbSetIteratorModified           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>modified</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Modify iterator to mark header for lazy write on release. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>modified</em>&nbsp;</td><td>new value of modified </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>previous value </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l02141">2141</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8c-source.html#l00682">_rpmdbMatchIterator::mi_modified</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l00163">markReplacedFiles()</a>.
</div>
</div><p>
<a class="anchor" name="g9f84dbc47d1d432f4ffe83b713fb47c9"></a><!-- doxytag: member="rpmdb.h::rpmdbSetIteratorRE" ref="g9f84dbc47d1d432f4ffe83b713fb47c9" args="(rpmdbMatchIterator mi, rpmTag tag, rpmMireMode mode, const char *pattern)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbSetIteratorRE           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#4f08fde948b5511f2a904dc92e39e211">rpmTag</a>&nbsp;</td>
          <td class="paramname"> <em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmdb_8h.html#b569d29d9b8a15daf7ec03834691bdba">rpmMireMode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>pattern</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add pattern to iterator selector. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tag</em>&nbsp;</td><td>rpm tag </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>type of pattern match </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pattern</em>&nbsp;</td><td>pattern to match </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l01898">1898</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmdb_8c-source.html#l00659">miRE_s::cflags</a>, <a class="el" href="rpmdb_8c-source.html#l00660">miRE_s::eflags</a>, <a class="el" href="rpmdb_8c-source.html#l00661">miRE_s::fnflags</a>, <a class="el" href="rpmdb_8c-source.html#l00686">_rpmdbMatchIterator::mi_nre</a>, <a class="el" href="rpmdb_8c-source.html#l00688">_rpmdbMatchIterator::mi_re</a>, <a class="el" href="rpmdb_8c-source.html#l01792">mireCmp()</a>, <a class="el" href="rpmdb_8c-source.html#l01806">mireDup()</a>, <a class="el" href="rpmdb_8c-source.html#l00653">miRE_s::mode</a>, <a class="el" href="rpmdb_8c-source.html#l00656">miRE_s::notmatch</a>, <a class="el" href="rpmdb_8c-source.html#l00655">miRE_s::pattern</a>, <a class="el" href="rpmdb_8c-source.html#l00658">miRE_s::preg</a>, <a class="el" href="rpmerr_8h-source.html#l00124">RPMERR_REGCOMP</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="macro_8c-source.html#l02116">rpmExpand()</a>, <a class="el" href="rpmdb_8h-source.html#l00036">RPMMIRE_DEFAULT</a>, <a class="el" href="rpmdb_8h-source.html#l00039">RPMMIRE_GLOB</a>, <a class="el" href="rpmdb_8h-source.html#l00038">RPMMIRE_REGEX</a>, <a class="el" href="rpmdb_8h-source.html#l00037">RPMMIRE_STRCMP</a>, <a class="el" href="rpmdb_8c-source.html#l00652">miRE_s::tag</a>, <a class="el" href="rpmmalloc_8c-source.html#l00034">xcalloc()</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00045">xrealloc()</a>.
<p>
Referenced by <a class="el" href="rpmdb_8c-source.html#l01425">dbiFindMatches()</a>, <a class="el" href="rpminstall_8c-source.html#l00965">IDTXload()</a>, <a class="el" href="rpmdb_8c-source.html#l03746">rpmdbRebuild()</a>, <a class="el" href="rpmgi_8c-source.html#l00330">rpmgiInitFilter()</a>, <a class="el" href="rpmmi-py_8c-source.html#l00149">rpmmi_Pattern()</a>, <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, and <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="gbc607a9e703efc3fd02f57e6263fbbc4"></a><!-- doxytag: member="rpmdb.h::rpmdbSetIteratorRewrite" ref="gbc607a9e703efc3fd02f57e6263fbbc4" args="(rpmdbMatchIterator mi, int rewrite)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbSetIteratorRewrite           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rpmdbMatchIterator.html">rpmdbMatchIterator</a>&nbsp;</td>
          <td class="paramname"> <em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rewrite</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepare iterator for lazy writes. 
<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Must be called before <a class="el" href="group__rpmdb.html#gf5d8e3f7efbd6885ee7577d2729b8476" title="Return next package header from iteration.">rpmdbNextIterator()</a> with CDB model database. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mi</em>&nbsp;</td><td>rpm database iterator </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rewrite</em>&nbsp;</td><td>new value of rewrite </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>previous value </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l02128">2128</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8c-source.html#l00681">_rpmdbMatchIterator::mi_cflags</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l00163">markReplacedFiles()</a>.
</div>
</div><p>
<a class="anchor" name="ge634d83d6ac7fd0e8c59f94a8b2379c6"></a><!-- doxytag: member="rpmdb.h::rpmdbSync" ref="ge634d83d6ac7fd0e8c59f94a8b2379c6" args="(rpmdb db)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbSync           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sync all database indices. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l00926">926</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8h-source.html#l00430">rpmdb_s::_dbi</a>, <a class="el" href="rpmdb_8h-source.html#l00429">rpmdb_s::db_ndbi</a>, <a class="el" href="rpmdb_8h-source.html#l00300">_dbiIndex::dbi_no_dbsync</a>, and <a class="el" href="rpmdb_8h-source.html#l00696">dbiSync()</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="g47cb145f5fb33c9e5b1a4e8976f04187"></a><!-- doxytag: member="rpmdb.h::rpmdbUnlink" ref="g47cb145f5fb33c9e5b1a4e8976f04187" args="(rpmdb db, const char *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmdb__s.html">rpmdb</a> rpmdbUnlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmdb__s.html">rpmdb</a>&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unreference a database instance. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>rpm database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL always </dd></dl>

</div>
</div><p>
<a class="anchor" name="g458c33b31c30a317c4e8a14064ed1f24"></a><!-- doxytag: member="rpmdb.h::rpmdbVerify" ref="g458c33b31c30a317c4e8a14064ed1f24" args="(const char *prefix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmdbVerify           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Verify database components. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>prefix</em>&nbsp;</td><td>path to top of install tree </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l01163">1163</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
References <a class="el" href="rpmdb_8h-source.html#l00430">rpmdb_s::_dbi</a>, <a class="el" href="rpmdb_8h-source.html#l00429">rpmdb_s::db_ndbi</a>, <a class="el" href="rpmdb_8h-source.html#l00667">dbiVerify()</a>, <a class="el" href="rpmdb_8c-source.html#l01017">openDatabase()</a>, <a class="el" href="rpmdb_8c-source.html#l00869">rpmdbClose()</a>, <a class="el" href="rpmdb_8c-source.html#l00822">rpmdbOpenAll()</a>, and <a class="el" href="macro_8c-source.html#l02139">rpmExpandNumeric()</a>.
<p>
Referenced by <a class="el" href="rpmts_8c-source.html#l00216">rpmtsVerifyDB()</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="gaa38ed50d0d140f2f3423b8d65df36b1"></a><!-- doxytag: member="rpmdb.h::dbiTags" ref="gaa38ed50d0d140f2f3423b8d65df36b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="group__rpmdb.html#gaa38ed50d0d140f2f3423b8d65df36b1">dbiTags</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tags for which rpmdb indices will be built. 
<p>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l00061">61</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
Referenced by <a class="el" href="rpmdb_8c-source.html#l00178">dbiTagsInit()</a>, <a class="el" href="rpmdb_8c-source.html#l00160">dbiTagToDbix()</a>, <a class="el" href="rpmqv_8c-source.html#l00166">main()</a>, <a class="el" href="rpmdb_8c-source.html#l01017">openDatabase()</a>, <a class="el" href="rpmdb_8c-source.html#l02939">rpmdbAdd()</a>, <a class="el" href="rpmdb_8c-source.html#l00841">rpmdbCloseDBI()</a>, <a class="el" href="rpmdb_8c-source.html#l03633">rpmdbMoveDatabase()</a>, <a class="el" href="rpmdb_8c-source.html#l00822">rpmdbOpenAll()</a>, <a class="el" href="rpmdb_8c-source.html#l02632">rpmdbRemove()</a>, and <a class="el" href="rpmdb_8c-source.html#l03575">rpmdbRemoveDatabase()</a>.
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:57 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
