<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: lib/rpminstall.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>lib/rpminstall.c File Reference</h1><code>#include &quot;<a class="el" href="system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;<a class="el" href="rpmcli_8h-source.html">rpmcli.h</a>&gt;</code><br>
<code>#include &quot;<a class="el" href="rpmdb_8h-source.html">rpmdb.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmds_8h-source.html">rpmds.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmte_8h-source.html">rpmte.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmts_8h-source.html">rpmts.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="manifest_8h-source.html">manifest.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="misc_8h-source.html">misc.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="debug_8h-source.html">debug.h</a>&quot;</code><br>

<p>
<a href="rpminstall_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrpmEIU.html">rpmEIU</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#ee996b667551ff312d747c94ed24448f">_RPMTS_INTERNAL</a></td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#62f32d233ffd4f8c31f67e35dd9945ad">str_t</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#170d573e3ba9cee7ad40cd037d1b0c9d">printHash</a> (const unsigned long amount, const unsigned long total)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print a CLI progress bar.  <a href="#170d573e3ba9cee7ad40cd037d1b0c9d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmcli.html#gcef1f66534a5b1bcf236deb95faa369b">rpmShowProgress</a> (const void *arg, const <a class="el" href="rpmmessages_8h.html#eab208082d1a47059c0fd07abd0b2d20">rpmCallbackType</a> what, const unsigned long amount, const unsigned long total, <a class="el" href="rpmmessages_8h.html#427d1be6429aaad2c8afa6fd7386048f">fnpyKey</a> key, void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The rpm CLI generic transaction callback handler.  <a href="group__rpmcli.html#gcef1f66534a5b1bcf236deb95faa369b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmcli.html#gf0bf01b16463cb3d2c926ee9de666a49">rpmInstall</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, struct <a class="el" href="structrpmInstallArguments__s.html">rpmInstallArguments_s</a> *ia, const char **fileArgv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Install/upgrade/freshen binary rpm package.  <a href="group__rpmcli.html#gf0bf01b16463cb3d2c926ee9de666a49"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmcli.html#geee7addf3260fcdac08815ac21a5950c">rpmErase</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, struct <a class="el" href="structrpmInstallArguments__s.html">rpmInstallArguments_s</a> *ia, const char **<a class="el" href="compress_8c.html#a06161d5bbbc977dc1ad9e6669902c5e">argv</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase binary rpm package.  <a href="group__rpmcli.html#geee7addf3260fcdac08815ac21a5950c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmcli.html#g85215b242bfb2206a3f352166ea8fbb2">rpmInstallSource</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const char *arg, const char **specFilePtr, const char **cookie)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Install source rpm package.  <a href="group__rpmcli.html#g85215b242bfb2206a3f352166ea8fbb2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#25654438494c8c767f33ecdbe1feab7e">IDTintcmp</a> (const void *a, const void *b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structIDTindex__s.html">IDTX</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#808909ece6b81038185b5c0134b0e97d">IDTXfree</a> (<a class="el" href="structIDTindex__s.html">IDTX</a> idtx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy id index.  <a href="#808909ece6b81038185b5c0134b0e97d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structIDTindex__s.html">IDTX</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#82177d3a1d6d1a719fb812ba6b9ee4b2">IDTXnew</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create id index.  <a href="#82177d3a1d6d1a719fb812ba6b9ee4b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structIDTindex__s.html">IDTX</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#d53bf5f83904e98fc14830dca523bc55">IDTXgrow</a> (<a class="el" href="structIDTindex__s.html">IDTX</a> idtx, int need)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insure that index has room for "need" elements.  <a href="#d53bf5f83904e98fc14830dca523bc55"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structIDTindex__s.html">IDTX</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#f079016fa40b3aad94138676b057fefd">IDTXsort</a> (<a class="el" href="structIDTindex__s.html">IDTX</a> idtx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sort tag (instance,value) pairs.  <a href="#f079016fa40b3aad94138676b057fefd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structIDTindex__s.html">IDTX</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#663ce95d27c6b9e170fede2a4ecc7442">IDTXload</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#4f08fde948b5511f2a904dc92e39e211">rpmTag</a> tag)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load tag (instance,value) pairs from rpm databse, and return sorted id index.  <a href="#663ce95d27c6b9e170fede2a4ecc7442"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structIDTindex__s.html">IDTX</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#b47b2a0c0c22e0994f32117f7f016c9a">IDTXglob</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const char *globstr, <a class="el" href="rpmlib_8h.html#4f08fde948b5511f2a904dc92e39e211">rpmTag</a> tag)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load tag (instance,value) pairs from packages, and return sorted id index.  <a href="#b47b2a0c0c22e0994f32117f7f016c9a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmcli.html#g95469c37c9c761ed4d52e7973ce2e7d7">rpmRollback</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, struct <a class="el" href="structrpmInstallArguments__s.html">rpmInstallArguments_s</a> *ia, const char **<a class="el" href="compress_8c.html#a06161d5bbbc977dc1ad9e6669902c5e">argv</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rollback transactions, erasing new, reinstalling old, package(s).  <a href="group__rpmcli.html#g95469c37c9c761ed4d52e7973ce2e7d7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#5953fb4d7c8a5e950962c63e116dc876">rpmcliPackagesTotal</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#d6019f2f04660f4016226b2c4f0f28b6">rpmcliHashesCurrent</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#bf4871f97bae81f83781c1a990319ea1">rpmcliHashesTotal</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#587bfc8aa6a8cdb031c2fd1a3aab75f2">rpmcliProgressCurrent</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#1fa0aa4635004bb1d7ea3f5be2d077d3">rpmcliProgressTotal</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpminstall_8c.html#052f243a02ba4a715c9e395aff5ec1d2">reverse</a> = -1</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
Definition in file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="ee996b667551ff312d747c94ed24448f"></a><!-- doxytag: member="rpminstall.c::_RPMTS_INTERNAL" ref="ee996b667551ff312d747c94ed24448f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _RPMTS_INTERNAL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00013">13</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="62f32d233ffd4f8c31f67e35dd9945ad"></a><!-- doxytag: member="rpminstall.c::str_t" ref="62f32d233ffd4f8c31f67e35dd9945ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const char* <a class="el" href="rpminstall_8c.html#62f32d233ffd4f8c31f67e35dd9945ad">str_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00256">256</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="25654438494c8c767f33ecdbe1feab7e"></a><!-- doxytag: member="rpminstall.c::IDTintcmp" ref="25654438494c8c767f33ecdbe1feab7e" args="(const void *a, const void *b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int IDTintcmp           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>b</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00909">909</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00958">IDTXsort()</a>.
</div>
</div><p>
<a class="anchor" name="808909ece6b81038185b5c0134b0e97d"></a><!-- doxytag: member="rpminstall.c::IDTXfree" ref="808909ece6b81038185b5c0134b0e97d" args="(IDTX idtx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structIDTindex__s.html">IDTX</a> IDTXfree           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIDTindex__s.html">IDTX</a>&nbsp;</td>
          <td class="paramname"> <em>idtx</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy id index. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>idtx</em>&nbsp;</td><td>id index </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL always </dd></dl>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00917">917</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmcli_8h-source.html#l00624">IDT_s::h</a>, <a class="el" href="hdrinline_8h-source.html#l00047">headerFree()</a>, <a class="el" href="rpmcli_8h-source.html#l00640">IDTindex_s::idt</a>, and <a class="el" href="rpmcli_8h-source.html#l00638">IDTindex_s::nidt</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01115">getRepackageHeaderFromTE()</a>, <a class="el" href="rpmts-py_8c-source.html#l00575">rpmts_IDTXglob()</a>, and <a class="el" href="rpmts-py_8c-source.html#l00530">rpmts_IDTXload()</a>.
</div>
</div><p>
<a class="anchor" name="b47b2a0c0c22e0994f32117f7f016c9a"></a><!-- doxytag: member="rpminstall.c::IDTXglob" ref="b47b2a0c0c22e0994f32117f7f016c9a" args="(rpmts ts, const char *globstr, rpmTag tag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structIDTindex__s.html">IDTX</a> IDTXglob           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>globstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#4f08fde948b5511f2a904dc92e39e211">rpmTag</a>&nbsp;</td>
          <td class="paramname"> <em>tag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load tag (instance,value) pairs from packages, and return sorted id index. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>globstr</em>&nbsp;</td><td>glob expression </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tag</em>&nbsp;</td><td>rpm tag </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>id index </dd></dl>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l01012">1012</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmio_8c-source.html#l02903">Fclose()</a>, <a class="el" href="rpminstall_8c-source.html#l00260">rpmEIU::fd</a>, <a class="el" href="rpmio_8c-source.html#l03277">Ferror()</a>, <a class="el" href="rpmio_8c-source.html#l03184">Fopen()</a>, <a class="el" href="rpmio_8c-source.html#l02813">Fstrerror()</a>, <a class="el" href="rpmcli_8h-source.html#l00624">IDT_s::h</a>, <a class="el" href="rpminstall_8c-source.html#l00259">rpmEIU::h</a>, <a class="el" href="hdrinline_8h-source.html#l00047">headerFree()</a>, <a class="el" href="hdrinline_8h-source.html#l00268">headerGetEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00230">headerIsEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00062">headerLink()</a>, <a class="el" href="rpmcli_8h-source.html#l00640">IDTindex_s::idt</a>, <a class="el" href="rpminstall_8c-source.html#l00941">IDTXgrow()</a>, <a class="el" href="rpminstall_8c-source.html#l00958">IDTXsort()</a>, <a class="el" href="rpmcli_8h-source.html#l00621">IDT_s::instance</a>, <a class="el" href="rpminstall_8c-source.html#l00275">rpmEIU::isSource</a>, <a class="el" href="rpmcli_8h-source.html#l00623">IDT_s::key</a>, <a class="el" href="rpmcli_8h-source.html#l00638">IDTindex_s::nidt</a>, <a class="el" href="rpmerr_8h-source.html#l00102">RPMERR_OPEN</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="macro_8c-source.html#l01694">rpmGlob()</a>, <a class="el" href="rpminstall_8c-source.html#l00281">rpmEIU::rpmrc</a>, <a class="el" href="rpmlib_8h-source.html#l00025">RPMRC_NOKEY</a>, <a class="el" href="rpmlib_8h-source.html#l00024">RPMRC_NOTTRUSTED</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="package_8c-source.html#l00748">rpmReadPackageFile()</a>, <a class="el" href="rpmlib_8h-source.html#l00385">RPMTAG_SOURCEPACKAGE</a>, <a class="el" href="rpmcli_8h-source.html#l00626">IDT_s::u32</a>, and <a class="el" href="structIDT__s.html#0b811c259b849e7716056221d2a8d9be">IDT_s::val</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01115">getRepackageHeaderFromTE()</a>, <a class="el" href="rpminstall_8c-source.html#l01088">rpmRollback()</a>, and <a class="el" href="rpmts-py_8c-source.html#l00575">rpmts_IDTXglob()</a>.
</div>
</div><p>
<a class="anchor" name="d53bf5f83904e98fc14830dca523bc55"></a><!-- doxytag: member="rpminstall.c::IDTXgrow" ref="d53bf5f83904e98fc14830dca523bc55" args="(IDTX idtx, int need)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structIDTindex__s.html">IDTX</a> IDTXgrow           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIDTindex__s.html">IDTX</a>&nbsp;</td>
          <td class="paramname"> <em>idtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>need</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Insure that index has room for "need" elements. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>idtx</em>&nbsp;</td><td>id index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>need</em>&nbsp;</td><td>additional no. of elements needed </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>id index (with room for "need" elements) </dd></dl>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00941">941</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
References <a class="el" href="rpmcli_8h-source.html#l00637">IDTindex_s::alloced</a>, <a class="el" href="rpmcli_8h-source.html#l00635">IDTindex_s::delta</a>, <a class="el" href="rpmcli_8h-source.html#l00640">IDTindex_s::idt</a>, <a class="el" href="rpminstall_8c-source.html#l00933">IDTXnew()</a>, <a class="el" href="rpmcli_8h-source.html#l00638">IDTindex_s::nidt</a>, <a class="el" href="rpmcli_8h-source.html#l00636">IDTindex_s::size</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00045">xrealloc()</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l01012">IDTXglob()</a>, and <a class="el" href="rpminstall_8c-source.html#l00965">IDTXload()</a>.
</div>
</div><p>
<a class="anchor" name="663ce95d27c6b9e170fede2a4ecc7442"></a><!-- doxytag: member="rpminstall.c::IDTXload" ref="663ce95d27c6b9e170fede2a4ecc7442" args="(rpmts ts, rpmTag tag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structIDTindex__s.html">IDTX</a> IDTXload           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#4f08fde948b5511f2a904dc92e39e211">rpmTag</a>&nbsp;</td>
          <td class="paramname"> <em>tag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load tag (instance,value) pairs from rpm databse, and return sorted id index. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tag</em>&nbsp;</td><td>rpm tag </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>id index </dd></dl>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00965">965</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
References <a class="el" href="rpmcli_8h-source.html#l00624">IDT_s::h</a>, <a class="el" href="rpminstall_8c-source.html#l00259">rpmEIU::h</a>, <a class="el" href="hdrinline_8h-source.html#l00268">headerGetEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00062">headerLink()</a>, <a class="el" href="rpmcli_8h-source.html#l00640">IDTindex_s::idt</a>, <a class="el" href="rpminstall_8c-source.html#l00941">IDTXgrow()</a>, <a class="el" href="rpminstall_8c-source.html#l00958">IDTXsort()</a>, <a class="el" href="rpmcli_8h-source.html#l00621">IDT_s::instance</a>, <a class="el" href="rpmcli_8h-source.html#l00623">IDT_s::key</a>, <a class="el" href="rpmcli_8h-source.html#l00638">IDTindex_s::nidt</a>, <a class="el" href="header_8h-source.html#l00221">RPM_INT32_TYPE</a>, <a class="el" href="header_8h-source.html#l00217">RPM_NULL_TYPE</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l01731">rpmdbGetIteratorOffset()</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l01898">rpmdbSetIteratorRE()</a>, <a class="el" href="rpmdb_8h-source.html#l00036">RPMMIRE_DEFAULT</a>, <a class="el" href="rpmlib_8h-source.html#l00264">RPMTAG_NAME</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, <a class="el" href="rpmcli_8h-source.html#l00626">IDT_s::u32</a>, and <a class="el" href="structIDT__s.html#0b811c259b849e7716056221d2a8d9be">IDT_s::val</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l01088">rpmRollback()</a>, and <a class="el" href="rpmts-py_8c-source.html#l00530">rpmts_IDTXload()</a>.
</div>
</div><p>
<a class="anchor" name="82177d3a1d6d1a719fb812ba6b9ee4b2"></a><!-- doxytag: member="rpminstall.c::IDTXnew" ref="82177d3a1d6d1a719fb812ba6b9ee4b2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structIDTindex__s.html">IDTX</a> IDTXnew           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create id index. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>new id index </dd></dl>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00933">933</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
References <a class="el" href="rpmmalloc_8c-source.html#l00034">xcalloc()</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00941">IDTXgrow()</a>.
</div>
</div><p>
<a class="anchor" name="f079016fa40b3aad94138676b057fefd"></a><!-- doxytag: member="rpminstall.c::IDTXsort" ref="f079016fa40b3aad94138676b057fefd" args="(IDTX idtx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structIDTindex__s.html">IDTX</a> IDTXsort           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIDTindex__s.html">IDTX</a>&nbsp;</td>
          <td class="paramname"> <em>idtx</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sort tag (instance,value) pairs. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>idtx</em>&nbsp;</td><td>id index </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>id index </dd></dl>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00958">958</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
References <a class="el" href="rpmcli_8h-source.html#l00640">IDTindex_s::idt</a>, <a class="el" href="rpminstall_8c-source.html#l00909">IDTintcmp()</a>, <a class="el" href="rpmcli_8h-source.html#l00638">IDTindex_s::nidt</a>, and <a class="el" href="rpmcli_8h-source.html#l00636">IDTindex_s::size</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l01012">IDTXglob()</a>, and <a class="el" href="rpminstall_8c-source.html#l00965">IDTXload()</a>.
</div>
</div><p>
<a class="anchor" name="170d573e3ba9cee7ad40cd037d1b0c9d"></a><!-- doxytag: member="rpminstall.c::printHash" ref="170d573e3ba9cee7ad40cd037d1b0c9d" args="(const unsigned long amount, const unsigned long total)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void printHash           </td>
          <td>(</td>
          <td class="paramtype">const unsigned long&nbsp;</td>
          <td class="paramname"> <em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned long&nbsp;</td>
          <td class="paramname"> <em>total</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print a CLI progress bar. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000050">Todo:</a></b></dt><dd>Unsnarl isatty(STDOUT_FILENO) from the control flow. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>amount</em>&nbsp;</td><td>current </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>total</em>&nbsp;</td><td>final </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00041">41</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
References <a class="el" href="rpminstall_8c-source.html#l00027">rpmcliHashesCurrent</a>, <a class="el" href="rpminstall_8c-source.html#l00029">rpmcliHashesTotal</a>, <a class="el" href="rpminstall_8c-source.html#l00031">rpmcliProgressCurrent</a>, and <a class="el" href="rpminstall_8c-source.html#l00033">rpmcliProgressTotal</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00092">rpmShowProgress()</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="052f243a02ba4a715c9e395aff5ec1d2"></a><!-- doxytag: member="rpminstall.c::reverse" ref="052f243a02ba4a715c9e395aff5ec1d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rpminstall_8c.html#052f243a02ba4a715c9e395aff5ec1d2">reverse</a> = -1<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00905">905</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
</div>
</div><p>
<a class="anchor" name="d6019f2f04660f4016226b2c4f0f28b6"></a><!-- doxytag: member="rpminstall.c::rpmcliHashesCurrent" ref="d6019f2f04660f4016226b2c4f0f28b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rpminstall_8c.html#d6019f2f04660f4016226b2c4f0f28b6">rpmcliHashesCurrent</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00027">27</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00041">printHash()</a>, and <a class="el" href="rpminstall_8c-source.html#l00092">rpmShowProgress()</a>.
</div>
</div><p>
<a class="anchor" name="bf4871f97bae81f83781c1a990319ea1"></a><!-- doxytag: member="rpminstall.c::rpmcliHashesTotal" ref="bf4871f97bae81f83781c1a990319ea1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rpminstall_8c.html#bf4871f97bae81f83781c1a990319ea1">rpmcliHashesTotal</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00029">29</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00041">printHash()</a>.
</div>
</div><p>
<a class="anchor" name="5953fb4d7c8a5e950962c63e116dc876"></a><!-- doxytag: member="rpminstall.c::rpmcliPackagesTotal" ref="5953fb4d7c8a5e950962c63e116dc876" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rpminstall_8c.html#5953fb4d7c8a5e950962c63e116dc876">rpmcliPackagesTotal</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00025">25</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00286">rpmInstall()</a>, <a class="el" href="rpminstall_8c-source.html#l01088">rpmRollback()</a>, <a class="el" href="rpminstall_8c-source.html#l00092">rpmShowProgress()</a>, and <a class="el" href="depends_8c-source.html#l00127">rpmtsAddInstallElement()</a>.
</div>
</div><p>
<a class="anchor" name="587bfc8aa6a8cdb031c2fd1a3aab75f2"></a><!-- doxytag: member="rpminstall.c::rpmcliProgressCurrent" ref="587bfc8aa6a8cdb031c2fd1a3aab75f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rpminstall_8c.html#587bfc8aa6a8cdb031c2fd1a3aab75f2">rpmcliProgressCurrent</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00031">31</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00041">printHash()</a>, and <a class="el" href="rpminstall_8c-source.html#l00092">rpmShowProgress()</a>.
</div>
</div><p>
<a class="anchor" name="1fa0aa4635004bb1d7ea3f5be2d077d3"></a><!-- doxytag: member="rpminstall.c::rpmcliProgressTotal" ref="1fa0aa4635004bb1d7ea3f5be2d077d3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rpminstall_8c.html#1fa0aa4635004bb1d7ea3f5be2d077d3">rpmcliProgressTotal</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpminstall_8c-source.html#l00033">33</a> of file <a class="el" href="rpminstall_8c-source.html">rpminstall.c</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00041">printHash()</a>, and <a class="el" href="rpminstall_8c-source.html#l00092">rpmShowProgress()</a>.
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:55 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
