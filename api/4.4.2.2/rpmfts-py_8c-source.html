<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: python/rpmfts-py.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>python/rpmfts-py.c</h1><a href="rpmfts-py_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00005"></a>00005 <span class="preprocessor">#include "<a class="code" href="system_8h.html">system.h</a>"</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include "structmember.h"</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#ifdef __LCLINT__</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span><span class="preprocessor">#undef  PyObject_HEAD</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor">#define PyObject_HEAD   int _PyObjectHead;</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;<a class="code" href="fts_8h.html">fts.h</a>&gt;</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#include "<a class="code" href="rpmfts-py_8h.html">rpmfts-py.h</a>"</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;<a class="code" href="rpmlib_8h.html" title="In Memoriam: Steve Taylor &lt;staylor@redhat.com&gt; was here, now he's not.">rpmlib.h</a>&gt;</span>     <span class="comment">/* XXX _free */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include "<a class="code" href="debug_8h.html">debug.h</a>"</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="comment">/*@unchecked@*/</span>
<a name="l00023"></a><a class="code" href="rpmfts-py_8c.html#1c282943defc7877d8b57420dd5315ec">00023</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="rpmfts-py_8c.html#1c282943defc7877d8b57420dd5315ec">_rpmfts_debug</a> = 1;
<a name="l00024"></a>00024 
<a name="l00025"></a><a class="code" href="rpmfts-py_8c.html#29781c39d548c78ae20a0e447986c9c0">00025</a> <span class="preprocessor">#define infoBit(_ix)    (1 &lt;&lt; (((unsigned)(_ix)) &amp; 0x1f))</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a><a class="code" href="rpmfts-py_8c.html#6647e5b566610c38f77e0ce5102f885d">00027</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="rpmgi_8c.html#6647e5b566610c38f77e0ce5102f885d">ftsInfoStrings</a>[] = {
<a name="l00028"></a>00028     <span class="stringliteral">"UNKNOWN"</span>,
<a name="l00029"></a>00029     <span class="stringliteral">"D"</span>,
<a name="l00030"></a>00030     <span class="stringliteral">"DC"</span>,
<a name="l00031"></a>00031     <span class="stringliteral">"DEFAULT"</span>,
<a name="l00032"></a>00032     <span class="stringliteral">"DNR"</span>,
<a name="l00033"></a>00033     <span class="stringliteral">"DOT"</span>,
<a name="l00034"></a>00034     <span class="stringliteral">"DP"</span>,
<a name="l00035"></a>00035     <span class="stringliteral">"ERR"</span>,
<a name="l00036"></a>00036     <span class="stringliteral">"F"</span>,
<a name="l00037"></a>00037     <span class="stringliteral">"INIT"</span>,
<a name="l00038"></a>00038     <span class="stringliteral">"NS"</span>,
<a name="l00039"></a>00039     <span class="stringliteral">"NSOK"</span>,
<a name="l00040"></a>00040     <span class="stringliteral">"SL"</span>,
<a name="l00041"></a>00041     <span class="stringliteral">"SLNONE"</span>,
<a name="l00042"></a>00042     <span class="stringliteral">"W"</span>,
<a name="l00043"></a>00043 };
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="comment">/*@observer@*/</span>
<a name="l00046"></a><a class="code" href="rpmfts-py_8c.html#dc604a42e35471f5be7f800f036dfe9e">00046</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="rpmgi_8c.html#dc604a42e35471f5be7f800f036dfe9e">ftsInfoStr</a>(<span class="keywordtype">int</span> fts_info)
<a name="l00047"></a>00047         <span class="comment">/*@*/</span>
<a name="l00048"></a>00048 {
<a name="l00049"></a>00049     <span class="keywordflow">if</span> (!(fts_info &gt;= 1 &amp;&amp; fts_info &lt;= 14))
<a name="l00050"></a>00050         fts_info = 0;
<a name="l00051"></a>00051     <span class="keywordflow">return</span> <a class="code" href="rpmgi_8c.html#6647e5b566610c38f77e0ce5102f885d">ftsInfoStrings</a>[ fts_info ];
<a name="l00052"></a>00052 }
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="rpmfts-py_8c.html#70e1a262c8008b11f887916b16120eeb">00054</a> <span class="preprocessor">#define RPMFTS_CLOSE            0</span>
<a name="l00055"></a><a class="code" href="rpmfts-py_8c.html#c23015dfd1b2a1813c1daa5aaf57e283">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define RPMFTS_OPEN             1</span>
<a name="l00056"></a><a class="code" href="rpmfts-py_8c.html#680e896a586f975c9a8b9219283b4ed1">00056</a> <span class="preprocessor"></span><span class="preprocessor">#define RPMFTS_OPEN_LAZY        2</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00058"></a>00058 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00059"></a><a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">00059</a> <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> * msg, <a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s)
<a name="l00060"></a>00060 {
<a name="l00061"></a>00061     <span class="keywordflow">if</span> (<a class="code" href="rpmfts-py_8c.html#1c282943defc7877d8b57420dd5315ec">_rpmfts_debug</a> == 0)
<a name="l00062"></a>00062         <span class="keywordflow">return</span>;
<a name="l00063"></a>00063     <span class="keywordflow">if</span> (msg)
<a name="l00064"></a>00064         fprintf(stderr, <span class="stringliteral">"*** %s(%p)"</span>, msg, s);
<a name="l00065"></a>00065     <span class="keywordflow">if</span> (s)
<a name="l00066"></a>00066         fprintf(stderr, <span class="stringliteral">" %d %d ftsp %p fts %p\n"</span>, s-&gt;ob_refcnt, s-&gt;<a class="code" href="structrpmftsObject__s.html#bd78351bacb24e51b9e654939599229f">active</a>, s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a>, s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a>);
<a name="l00067"></a>00067 }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00070"></a><a class="code" href="rpmfts-py_8c.html#679667c775e3b6d590230cd4bef196e5">00070</a> <a class="code" href="rpmfts-py_8c.html#679667c775e3b6d590230cd4bef196e5">rpmfts_initialize</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s, <span class="keyword">const</span> <span class="keywordtype">char</span> * root, <span class="keywordtype">int</span> options, <span class="keywordtype">int</span> ignore)
<a name="l00071"></a>00071         <span class="comment">/*@modifies s @*/</span>
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073     <span class="keywordtype">int</span> ac = 1;
<a name="l00074"></a>00074     <span class="keywordtype">size_t</span> nb;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="comment">/*@-branchstate@*/</span>
<a name="l00077"></a>00077     <span class="keywordflow">if</span> (root == NULL)   root = <span class="stringliteral">"/"</span>;
<a name="l00078"></a>00078 <span class="comment">/*@=branchstate@*/</span>
<a name="l00079"></a>00079     <span class="keywordflow">if</span> (options == -1)  options = (<a class="code" href="fts_8h.html#4403d369e093f7d56644f77e8d33bff6">FTS_COMFOLLOW</a> | <a class="code" href="fts_8h.html#dd52d49dff5075e5719103e741419b1e">FTS_LOGICAL</a> | <a class="code" href="fts_8h.html#7cb6ec325ca857eea7975e1fbface796">FTS_NOSTAT</a>);
<a name="l00080"></a>00080     <span class="keywordflow">if</span> (ignore == -1)   ignore = <a class="code" href="rpmfts-py_8c.html#29781c39d548c78ae20a0e447986c9c0">infoBit</a>(<a class="code" href="fts_8h.html#d6048ce28792a0375f8a94259cf438a3">FTS_DP</a>);
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a> = <a class="code" href="rpmlib_8h.html#d608c2923552dbeeb832133a9a289bb7" title="Wrapper to free(3), hides const compilation noise, permit NULL, return NULL.">_free</a>(s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a>);
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     nb = (ac + 1) * <span class="keyword">sizeof</span>(*s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a>);
<a name="l00085"></a>00085     nb += strlen(root) + 1;
<a name="l00086"></a>00086     s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a> = malloc(nb);
<a name="l00087"></a>00087     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a> != NULL) {
<a name="l00088"></a>00088         <span class="keywordtype">char</span> *t = (<span class="keywordtype">char</span> *) &amp;s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a>[ac + 1];
<a name="l00089"></a>00089         s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a>[0] = t;
<a name="l00090"></a>00090         s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a>[ac] = NULL;
<a name="l00091"></a>00091         (<span class="keywordtype">void</span>) <a class="code" href="system_8h.html#58841684f76853b313e27e663c850381">stpcpy</a>(t, root);
<a name="l00092"></a>00092     }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     s-&gt;<a class="code" href="structrpmftsObject__s.html#199f2e62db12d74e3dbf1b0093ab1943">options</a> = options;
<a name="l00095"></a>00095     s-&gt;<a class="code" href="structrpmftsObject__s.html#f721af8092fe61edda5150960471c91f">ignore</a> = ignore;
<a name="l00096"></a>00096     s-&gt;<a class="code" href="structrpmftsObject__s.html#c7e6d9ce86bfdd9a0567a78783518ae3">compare</a> = NULL;
<a name="l00097"></a>00097 
<a name="l00098"></a>00098     s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a> = NULL;
<a name="l00099"></a>00099     s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a> = NULL;
<a name="l00100"></a>00100     s-&gt;<a class="code" href="structrpmftsObject__s.html#bd78351bacb24e51b9e654939599229f">active</a> = <a class="code" href="rpmfts-py_8c.html#70e1a262c8008b11f887916b16120eeb">RPMFTS_CLOSE</a>;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="keywordflow">return</span> 0;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00107"></a><a class="code" href="rpmfts-py_8c.html#d17d6d4215e8caec204a1eb2ce869b6a">00107</a> <a class="code" href="rpmfts-py_8c.html#d17d6d4215e8caec204a1eb2ce869b6a">rpmfts_state</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s, <span class="keywordtype">int</span> nactive)
<a name="l00108"></a>00108         <span class="comment">/*@modifies s @*/</span>
<a name="l00109"></a>00109 {
<a name="l00110"></a>00110     <span class="keywordtype">int</span> rc = 0;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00113"></a>00113     <span class="keywordflow">switch</span> (nactive) {
<a name="l00114"></a>00114     <span class="keywordflow">case</span> <a class="code" href="rpmfts-py_8c.html#70e1a262c8008b11f887916b16120eeb">RPMFTS_CLOSE</a>:
<a name="l00115"></a>00115         <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a> != NULL) {
<a name="l00116"></a>00116             Py_BEGIN_ALLOW_THREADS
<a name="l00117"></a>00117             rc = <a class="code" href="fts_8c.html#44df192029d344f8e96a3ca1ec68f4a9" title="Destroy a file hierarchy traversal handle.">Fts_close</a>(s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a>);
<a name="l00118"></a>00118             Py_END_ALLOW_THREADS
<a name="l00119"></a>00119             s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a> = NULL;
<a name="l00120"></a>00120         }
<a name="l00121"></a>00121         <span class="keywordflow">break</span>;
<a name="l00122"></a>00122     <span class="keywordflow">case</span> <a class="code" href="rpmfts-py_8c.html#680e896a586f975c9a8b9219283b4ed1">RPMFTS_OPEN_LAZY</a>:
<a name="l00123"></a>00123     <span class="keywordflow">case</span> <a class="code" href="rpmfts-py_8c.html#c23015dfd1b2a1813c1daa5aaf57e283">RPMFTS_OPEN</a>:
<a name="l00124"></a>00124         <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a> == NULL) {
<a name="l00125"></a>00125             Py_BEGIN_ALLOW_THREADS
<a name="l00126"></a>00126             s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a> = <a class="code" href="fts_8c.html#7c59f32410437f53f937ef35a6904be0" title="Create a handle for file hierarchy traversal.">Fts_open</a>((<span class="keywordtype">char</span> *<span class="keyword">const</span> *)s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a>, s-&gt;<a class="code" href="structrpmftsObject__s.html#199f2e62db12d74e3dbf1b0093ab1943">options</a>, (int (*)(<span class="keyword">const</span> <a class="code" href="struct__ftsent.html">FTSENT</a> **, <span class="keyword">const</span> <a class="code" href="struct__ftsent.html">FTSENT</a> **))s-&gt;<a class="code" href="structrpmftsObject__s.html#c7e6d9ce86bfdd9a0567a78783518ae3">compare</a>);
<a name="l00127"></a>00127             Py_END_ALLOW_THREADS
<a name="l00128"></a>00128         }
<a name="l00129"></a>00129         <span class="keywordflow">break</span>;
<a name="l00130"></a>00130     }
<a name="l00131"></a>00131     s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a> = NULL;
<a name="l00132"></a>00132     s-&gt;<a class="code" href="structrpmftsObject__s.html#bd78351bacb24e51b9e654939599229f">active</a> = nactive;
<a name="l00133"></a>00133     <span class="keywordflow">return</span> rc;
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="comment">/*@null@*/</span>
<a name="l00137"></a>00137 <span class="keyword">static</span> PyObject *
<a name="l00138"></a><a class="code" href="rpmfts-py_8c.html#53612acd7bccd0fb43d5cad9f74ad76c">00138</a> <a class="code" href="rpmfts-py_8c.html#53612acd7bccd0fb43d5cad9f74ad76c">rpmfts_step</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s)
<a name="l00139"></a>00139         <span class="comment">/*@modifies s @*/</span>
<a name="l00140"></a>00140 {
<a name="l00141"></a>00141     PyObject * result = NULL;
<a name="l00142"></a>00142     <span class="keywordtype">int</span> xx;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00145"></a>00145     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a> == NULL)
<a name="l00146"></a>00146         <span class="keywordflow">return</span> NULL;
<a name="l00147"></a>00147 
<a name="l00148"></a>00148     <span class="keywordflow">do</span> {
<a name="l00149"></a>00149         Py_BEGIN_ALLOW_THREADS
<a name="l00150"></a>00150         s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a> = <a class="code" href="fts_8c.html#cccaac585d3de97f0611e1383ffb95f5" title="Return next node in the file hierarchy traversal.">Fts_read</a>(s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a>);
<a name="l00151"></a>00151         Py_END_ALLOW_THREADS
<a name="l00152"></a>00152     } <span class="keywordflow">while</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a> &amp;&amp; (<a class="code" href="rpmfts-py_8c.html#29781c39d548c78ae20a0e447986c9c0">infoBit</a>(s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a>-&gt;<a class="code" href="struct__ftsent.html#3538621ba0de9ea1e361974a0f476f42">fts_info</a>) &amp; s-&gt;<a class="code" href="structrpmftsObject__s.html#f721af8092fe61edda5150960471c91f">ignore</a>));
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a> != NULL) {
<a name="l00155"></a>00155         Py_INCREF(s);
<a name="l00156"></a>00156         result = (PyObject *)s;
<a name="l00157"></a>00157     } <span class="keywordflow">else</span> {
<a name="l00158"></a>00158         <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#bd78351bacb24e51b9e654939599229f">active</a> == <a class="code" href="rpmfts-py_8c.html#680e896a586f975c9a8b9219283b4ed1">RPMFTS_OPEN_LAZY</a>)
<a name="l00159"></a>00159             xx = <a class="code" href="rpmfts-py_8c.html#d17d6d4215e8caec204a1eb2ce869b6a">rpmfts_state</a>(s, <a class="code" href="rpmfts-py_8c.html#70e1a262c8008b11f887916b16120eeb">RPMFTS_CLOSE</a>);
<a name="l00160"></a>00160         s-&gt;<a class="code" href="structrpmftsObject__s.html#bd78351bacb24e51b9e654939599229f">active</a> = <a class="code" href="rpmfts-py_8c.html#70e1a262c8008b11f887916b16120eeb">RPMFTS_CLOSE</a>;
<a name="l00161"></a>00161     }
<a name="l00162"></a>00162 
<a name="l00163"></a>00163     <span class="keywordflow">return</span> result;
<a name="l00164"></a>00164 }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166 <span class="comment">/* ---------- */</span>
<a name="l00167"></a>00167 
<a name="l00174"></a>00174 <span class="comment">/*@null@*/</span>
<a name="l00175"></a>00175 <span class="keyword">static</span> PyObject *
<a name="l00176"></a><a class="code" href="group__py__c.html#g57ebc651f17bbc9a75893dd403951b57">00176</a> <a class="code" href="group__py__c.html#g57ebc651f17bbc9a75893dd403951b57">rpmfts_Debug</a>(<span class="comment">/*@unused@*/</span> <a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s, PyObject * args, PyObject * kwds)
<a name="l00177"></a>00177         <span class="comment">/*@globals _Py_NoneStruct @*/</span>
<a name="l00178"></a>00178         <span class="comment">/*@modifies _Py_NoneStruct @*/</span>
<a name="l00179"></a>00179 {
<a name="l00180"></a>00180     <span class="keywordtype">char</span> * kwlist[] = {<span class="stringliteral">"debugLevel"</span>, NULL};
<a name="l00181"></a>00181 
<a name="l00182"></a>00182     <span class="keywordflow">if</span> (!PyArg_ParseTupleAndKeywords(args, kwds, <span class="stringliteral">"i:Debug"</span>, kwlist,
<a name="l00183"></a>00183             &amp;<a class="code" href="rpmfts-py_8c.html#1c282943defc7877d8b57420dd5315ec">_rpmfts_debug</a>))
<a name="l00184"></a>00184         <span class="keywordflow">return</span> NULL;
<a name="l00185"></a>00185 
<a name="l00186"></a>00186     Py_INCREF(Py_None);
<a name="l00187"></a>00187     <span class="keywordflow">return</span> Py_None;
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">/*@null@*/</span>
<a name="l00191"></a>00191 <span class="keyword">static</span> PyObject *
<a name="l00192"></a><a class="code" href="group__py__c.html#g66c5c9384e5eab4eb9eac7b316efd1b0">00192</a> <a class="code" href="group__py__c.html#g66c5c9384e5eab4eb9eac7b316efd1b0">rpmfts_Open</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s, PyObject * args, PyObject * kwds)
<a name="l00193"></a>00193         <span class="comment">/*@modifies s @*/</span>
<a name="l00194"></a>00194 {
<a name="l00195"></a>00195     <span class="keywordtype">char</span> * root = NULL;
<a name="l00196"></a>00196     <span class="keywordtype">int</span> options = -1;
<a name="l00197"></a>00197     <span class="keywordtype">int</span> ignore = -1;
<a name="l00198"></a>00198     <span class="keywordtype">int</span> xx;
<a name="l00199"></a>00199     <span class="comment">/* XXX: there's bound to be a better name than "ignore" */</span>
<a name="l00200"></a>00200     <span class="keywordtype">char</span> * kwlist[] = {<span class="stringliteral">"root"</span>, <span class="stringliteral">"options"</span>, <span class="stringliteral">"ignore"</span>, NULL};
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00203"></a>00203     <span class="keywordflow">if</span> (!PyArg_ParseTupleAndKeywords(args, kwds, <span class="stringliteral">"|sii:Open"</span>, kwlist,
<a name="l00204"></a>00204             &amp;root, &amp;options, &amp;ignore))
<a name="l00205"></a>00205         <span class="keywordflow">return</span> NULL;
<a name="l00206"></a>00206 
<a name="l00207"></a>00207     xx = <a class="code" href="rpmfts-py_8c.html#679667c775e3b6d590230cd4bef196e5">rpmfts_initialize</a>(s, root, options, ignore);
<a name="l00208"></a>00208     xx = <a class="code" href="rpmfts-py_8c.html#d17d6d4215e8caec204a1eb2ce869b6a">rpmfts_state</a>(s, <a class="code" href="rpmfts-py_8c.html#c23015dfd1b2a1813c1daa5aaf57e283">RPMFTS_OPEN</a>);
<a name="l00209"></a>00209 
<a name="l00210"></a>00210     <span class="keywordflow">return</span> (PyObject *)s;
<a name="l00211"></a>00211 }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 <span class="comment">/*@null@*/</span>
<a name="l00214"></a>00214 <span class="keyword">static</span> PyObject *
<a name="l00215"></a><a class="code" href="group__py__c.html#g7f911cd9d70b69228ab87290b921db4d">00215</a> <a class="code" href="group__py__c.html#g7f911cd9d70b69228ab87290b921db4d">rpmfts_Read</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s)
<a name="l00216"></a>00216         <span class="comment">/*@globals _Py_NoneStruct @*/</span>
<a name="l00217"></a>00217         <span class="comment">/*@modifies s, _Py_NoneStruct @*/</span>
<a name="l00218"></a>00218 {
<a name="l00219"></a>00219     PyObject * result;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     result = <a class="code" href="rpmfts-py_8c.html#53612acd7bccd0fb43d5cad9f74ad76c">rpmfts_step</a>(s);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     <span class="keywordflow">if</span> (result == NULL) {
<a name="l00226"></a>00226         Py_INCREF(Py_None);
<a name="l00227"></a>00227         <span class="keywordflow">return</span> Py_None;
<a name="l00228"></a>00228     }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230     <span class="keywordflow">return</span> result;
<a name="l00231"></a>00231 }
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <span class="comment">/*@null@*/</span>
<a name="l00234"></a>00234 <span class="keyword">static</span> PyObject *
<a name="l00235"></a><a class="code" href="group__py__c.html#g82e8e4ba6224ee8acd4251478fa71197">00235</a> <a class="code" href="group__py__c.html#g82e8e4ba6224ee8acd4251478fa71197">rpmfts_Children</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s, PyObject * args, PyObject * kwds)
<a name="l00236"></a>00236         <span class="comment">/*@globals _Py_NoneStruct @*/</span>
<a name="l00237"></a>00237         <span class="comment">/*@modifies s, _Py_NoneStruct @*/</span>
<a name="l00238"></a>00238 {
<a name="l00239"></a>00239     <span class="keywordtype">int</span> instr;
<a name="l00240"></a>00240     <span class="keywordtype">char</span> * kwlist[] = {<span class="stringliteral">"instructions"</span>, NULL};
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00243"></a>00243     <span class="keywordflow">if</span> (!PyArg_ParseTupleAndKeywords(args, kwds, <span class="stringliteral">"i:Children"</span>, kwlist, &amp;instr))
<a name="l00244"></a>00244         <span class="keywordflow">return</span> NULL;
<a name="l00245"></a>00245 
<a name="l00246"></a>00246     <span class="keywordflow">if</span> (!(s &amp;&amp; s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a>))
<a name="l00247"></a>00247         <span class="keywordflow">return</span> NULL;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     Py_BEGIN_ALLOW_THREADS
<a name="l00250"></a>00250     s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a> = <a class="code" href="fts_8c.html#a435c5e5696ff7721549965cd5258e64" title="Return list of children of the current node.">Fts_children</a>(s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a>, instr);
<a name="l00251"></a>00251     Py_END_ALLOW_THREADS
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     Py_INCREF(Py_None);
<a name="l00254"></a>00254     <span class="keywordflow">return</span> Py_None;
<a name="l00255"></a>00255 }
<a name="l00256"></a>00256 
<a name="l00257"></a>00257 <span class="comment">/*@null@*/</span>
<a name="l00258"></a>00258 <span class="keyword">static</span> PyObject *
<a name="l00259"></a><a class="code" href="group__py__c.html#g556398b33f11d99f3ce0f6ceb0d75490">00259</a> <a class="code" href="group__py__c.html#g556398b33f11d99f3ce0f6ceb0d75490">rpmfts_Close</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s)
<a name="l00260"></a>00260         <span class="comment">/*@modifies s @*/</span>
<a name="l00261"></a>00261 {
<a name="l00262"></a>00262 
<a name="l00263"></a>00263 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     <span class="keywordflow">return</span> Py_BuildValue(<span class="stringliteral">"i"</span>, <a class="code" href="rpmfts-py_8c.html#d17d6d4215e8caec204a1eb2ce869b6a">rpmfts_state</a>(s, <a class="code" href="rpmfts-py_8c.html#70e1a262c8008b11f887916b16120eeb">RPMFTS_CLOSE</a>));
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="comment">/*@null@*/</span>
<a name="l00269"></a>00269 <span class="keyword">static</span> PyObject *
<a name="l00270"></a><a class="code" href="group__py__c.html#gc0c45c60c90973a75ce1cb5a975ff2fc">00270</a> <a class="code" href="group__py__c.html#gc0c45c60c90973a75ce1cb5a975ff2fc">rpmfts_Set</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s, PyObject * args, PyObject * kwds)
<a name="l00271"></a>00271         <span class="comment">/*@modifies s @*/</span>
<a name="l00272"></a>00272 {
<a name="l00273"></a>00273     <span class="keywordtype">int</span> instr = 0;
<a name="l00274"></a>00274     <span class="keywordtype">int</span> rc = 0;
<a name="l00275"></a>00275     <span class="keywordtype">char</span> * kwlist[] = {<span class="stringliteral">"instructions"</span>, NULL};
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00278"></a>00278     <span class="keywordflow">if</span> (!PyArg_ParseTupleAndKeywords(args, kwds, <span class="stringliteral">"i:Set"</span>, kwlist, &amp;instr))
<a name="l00279"></a>00279         <span class="keywordflow">return</span> NULL;
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a> &amp;&amp; s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a>)
<a name="l00282"></a>00282         rc = <a class="code" href="fts_8c.html#e75b40ff97c1583d9ffc9fe61c81179f" title="Modify the traversal for a file set member.">Fts_set</a>(s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a>, s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a>, instr);
<a name="l00283"></a>00283 
<a name="l00284"></a>00284     <span class="keywordflow">return</span> Py_BuildValue(<span class="stringliteral">"i"</span>, rc);
<a name="l00285"></a>00285 }
<a name="l00286"></a>00286 
<a name="l00289"></a>00289 <span class="comment">/*@-fullinitblock@*/</span>
<a name="l00290"></a>00290 <span class="comment">/*@unchecked@*/</span> <span class="comment">/*@observer@*/</span>
<a name="l00291"></a><a class="code" href="group__py__c.html#g04e8fffa3584132da2b43cdc6314cd53">00291</a> <span class="keyword">static</span> <span class="keyword">struct </span>PyMethodDef <a class="code" href="group__py__c.html#g04e8fffa3584132da2b43cdc6314cd53">rpmfts_methods</a>[] = {
<a name="l00292"></a>00292     {<span class="stringliteral">"Debug"</span>,   (PyCFunction)<a class="code" href="group__py__c.html#g57ebc651f17bbc9a75893dd403951b57">rpmfts_Debug</a>,      METH_VARARGS|METH_KEYWORDS,
<a name="l00293"></a>00293         NULL},
<a name="l00294"></a>00294     {<span class="stringliteral">"open"</span>,    (PyCFunction)<a class="code" href="group__py__c.html#g66c5c9384e5eab4eb9eac7b316efd1b0">rpmfts_Open</a>,       METH_VARARGS|METH_KEYWORDS,
<a name="l00295"></a>00295         NULL},
<a name="l00296"></a>00296     {<span class="stringliteral">"read"</span>,    (PyCFunction)<a class="code" href="group__py__c.html#g7f911cd9d70b69228ab87290b921db4d">rpmfts_Read</a>,       METH_NOARGS,
<a name="l00297"></a>00297         NULL},
<a name="l00298"></a>00298     {<span class="stringliteral">"children"</span>,(PyCFunction)<a class="code" href="group__py__c.html#g82e8e4ba6224ee8acd4251478fa71197">rpmfts_Children</a>,   METH_VARARGS|METH_KEYWORDS,
<a name="l00299"></a>00299         NULL},
<a name="l00300"></a>00300     {<span class="stringliteral">"close"</span>,   (PyCFunction)<a class="code" href="group__py__c.html#g556398b33f11d99f3ce0f6ceb0d75490">rpmfts_Close</a>,      METH_NOARGS,
<a name="l00301"></a>00301         NULL},
<a name="l00302"></a>00302     {<span class="stringliteral">"set"</span>,     (PyCFunction)<a class="code" href="group__py__c.html#gc0c45c60c90973a75ce1cb5a975ff2fc">rpmfts_Set</a>,        METH_VARARGS|METH_KEYWORDS,
<a name="l00303"></a>00303         NULL},
<a name="l00304"></a>00304     {NULL,              NULL}           <span class="comment">/* sentinel */</span>
<a name="l00305"></a>00305 };
<a name="l00306"></a>00306 <span class="comment">/*@=fullinitblock@*/</span>
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 <span class="comment">/* ---------- */</span>
<a name="l00309"></a>00309 
<a name="l00310"></a><a class="code" href="group__py__c.html#gfc51bcc6bc24ad536e509d016d01a6ad">00310</a> <span class="keyword">static</span> PyMemberDef <a class="code" href="group__py__c.html#gfc51bcc6bc24ad536e509d016d01a6ad">rpmfts_members</a>[] = {
<a name="l00311"></a>00311     {<span class="stringliteral">"__dict__"</span>,T_OBJECT,offsetof(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a>, md_dict),       READONLY,
<a name="l00312"></a>00312         NULL},
<a name="l00313"></a>00313     {<span class="stringliteral">"callbacks"</span>,T_OBJECT,offsetof(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a>, callbacks),    0,
<a name="l00314"></a>00314 <span class="stringliteral">"Callback dictionary per fts_info state: FTS_{D|DC|DEFAULT|DNR|DOT|DP|ERR|F|INIT|NS|NSOK|SL|SLNONE|W}"</span>},
<a name="l00315"></a>00315     {<span class="stringliteral">"options"</span>, T_INT,  offsetof(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a>, options),        0,
<a name="l00316"></a>00316 <span class="stringliteral">"Option bit(s): FTS_{COMFOLLOW|LOGICAL|NOCHDIR|NOSTAT|PHYSICAL|SEEDOT|XDEV}"</span>},
<a name="l00317"></a>00317     {<span class="stringliteral">"ignore"</span>,  T_INT,  offsetof(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a>, ignore),         0,
<a name="l00318"></a>00318 <span class="stringliteral">"Ignore bit(s): (1 &lt;&lt; info) with info one of FTS_{D|DC|DEFAULT|DNR|DOT|DP|ERR|F|INIT|NS|NSOK|SL|SLNONE|W}"</span>},
<a name="l00319"></a>00319     {NULL, 0, 0, 0, NULL}
<a name="l00320"></a>00320 };
<a name="l00321"></a>00321 
<a name="l00322"></a><a class="code" href="group__py__c.html#gf91a36b00703016aabfd0eef8126ab90">00322</a> <span class="keyword">static</span> PyObject * <a class="code" href="group__py__c.html#gf91a36b00703016aabfd0eef8126ab90">rpmfts_getattro</a>(PyObject * o, PyObject * n)
<a name="l00323"></a>00323         <span class="comment">/*@*/</span>
<a name="l00324"></a>00324 {
<a name="l00325"></a>00325 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, (<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> *)o);
<a name="l00326"></a>00326     <span class="keywordflow">return</span> PyObject_GenericGetAttr(o, n);
<a name="l00327"></a>00327 }
<a name="l00328"></a>00328 
<a name="l00329"></a><a class="code" href="group__py__c.html#gf1c5b558b6bb20c21ca2304f3ebdec3d">00329</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="group__py__c.html#gf1c5b558b6bb20c21ca2304f3ebdec3d">rpmfts_setattro</a>(PyObject * o, PyObject * n, PyObject * v)
<a name="l00330"></a>00330         <span class="comment">/*@*/</span>
<a name="l00331"></a>00331 {
<a name="l00332"></a>00332 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, (<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> *)o);
<a name="l00333"></a>00333     <span class="keywordflow">return</span> PyObject_GenericSetAttr(o, n, v);
<a name="l00334"></a>00334 }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 <span class="comment">/* ---------- */</span>
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 <span class="keyword">static</span> PyObject *
<a name="l00339"></a><a class="code" href="group__py__c.html#g2e6dc71513ec1a7a9e48a028e5cf0dee">00339</a> <a class="code" href="group__py__c.html#g2e6dc71513ec1a7a9e48a028e5cf0dee">rpmfts_iter</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s)
<a name="l00340"></a>00340         <span class="comment">/*@*/</span>
<a name="l00341"></a>00341 {
<a name="l00342"></a>00342     Py_INCREF(s);
<a name="l00343"></a>00343     <span class="keywordflow">return</span> (PyObject *)s;
<a name="l00344"></a>00344 }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 <span class="comment">/*@null@*/</span>
<a name="l00347"></a>00347 <span class="keyword">static</span> PyObject *
<a name="l00348"></a><a class="code" href="group__py__c.html#g440e728fa7abc3d185eab91f223d3b1f">00348</a> <a class="code" href="group__py__c.html#g440e728fa7abc3d185eab91f223d3b1f">rpmfts_iternext</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s)
<a name="l00349"></a>00349         <span class="comment">/*@modifies s @*/</span>
<a name="l00350"></a>00350 {
<a name="l00351"></a>00351     <span class="keywordtype">int</span> xx;
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     <span class="comment">/* Reset loop indices on 1st entry. */</span>
<a name="l00354"></a>00354     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#bd78351bacb24e51b9e654939599229f">active</a> == <a class="code" href="rpmfts-py_8c.html#70e1a262c8008b11f887916b16120eeb">RPMFTS_CLOSE</a>)
<a name="l00355"></a>00355         xx = <a class="code" href="rpmfts-py_8c.html#d17d6d4215e8caec204a1eb2ce869b6a">rpmfts_state</a>(s, <a class="code" href="rpmfts-py_8c.html#680e896a586f975c9a8b9219283b4ed1">RPMFTS_OPEN_LAZY</a>);
<a name="l00356"></a>00356     <span class="keywordflow">return</span> <a class="code" href="rpmfts-py_8c.html#53612acd7bccd0fb43d5cad9f74ad76c">rpmfts_step</a>(s);
<a name="l00357"></a>00357 }
<a name="l00358"></a>00358 
<a name="l00359"></a>00359 <span class="comment">/* ---------- */</span>
<a name="l00360"></a>00360 
<a name="l00361"></a><a class="code" href="group__py__c.html#gfc6bd5fdb2030a5b4b154906869bc29d">00361</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group__py__c.html#gfc6bd5fdb2030a5b4b154906869bc29d">rpmfts_free</a>(<span class="comment">/*@only@*/</span> PyObject * s)
<a name="l00362"></a>00362         <span class="comment">/*@*/</span>
<a name="l00363"></a>00363 {
<a name="l00364"></a>00364     _PyObject_GC_Del(s);
<a name="l00365"></a>00365 }
<a name="l00366"></a>00366 
<a name="l00367"></a><a class="code" href="group__py__c.html#gee97dee911737cecc22d3718a09f45c2">00367</a> <span class="keyword">static</span> PyObject * <a class="code" href="group__py__c.html#gee97dee911737cecc22d3718a09f45c2">rpmfts_alloc</a>(PyTypeObject * type, <span class="keywordtype">int</span> <a class="code" href="rpmcache_8c.html#00dbc8759a0bd9f0af73e5c5ab01a581">nitems</a>)
<a name="l00368"></a>00368         <span class="comment">/*@*/</span>
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370     <span class="keywordflow">return</span> PyType_GenericAlloc(type, nitems);
<a name="l00371"></a>00371 }
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="group__py__c.html#g4704b6099e097b3c7b51fefb912219a9">00373</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group__py__c.html#g4704b6099e097b3c7b51fefb912219a9">rpmfts_dealloc</a>(<span class="comment">/*@only@*/</span> <a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s)
<a name="l00374"></a>00374         <span class="comment">/*@modifies s @*/</span>
<a name="l00375"></a>00375 {
<a name="l00376"></a>00376     <span class="keywordtype">int</span> xx;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00379"></a>00379     xx = <a class="code" href="rpmfts-py_8c.html#d17d6d4215e8caec204a1eb2ce869b6a">rpmfts_state</a>(s, <a class="code" href="rpmfts-py_8c.html#70e1a262c8008b11f887916b16120eeb">RPMFTS_CLOSE</a>);
<a name="l00380"></a>00380 
<a name="l00381"></a>00381     s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a> = <a class="code" href="rpmlib_8h.html#d608c2923552dbeeb832133a9a289bb7" title="Wrapper to free(3), hides const compilation noise, permit NULL, return NULL.">_free</a>(s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a>);
<a name="l00382"></a>00382 
<a name="l00383"></a>00383     PyObject_GC_UnTrack((PyObject *)s);
<a name="l00384"></a>00384     <span class="keywordflow">if</span> (s-&gt;md_dict != NULL) {
<a name="l00385"></a>00385         _PyModule_Clear((PyObject *)s);
<a name="l00386"></a>00386         Py_DECREF(s-&gt;md_dict);
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388     <span class="keywordflow">if</span> (s-&gt;callbacks != NULL) {
<a name="l00389"></a>00389         _PyModule_Clear((PyObject *)s);
<a name="l00390"></a>00390         Py_DECREF(s-&gt;callbacks);
<a name="l00391"></a>00391     }
<a name="l00392"></a>00392     _PyObject_GC_Del((PyObject *)s);
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00395"></a><a class="code" href="group__py__c.html#g003f97b47832e30b360080f637cdcabe">00395</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="group__py__c.html#g003f97b47832e30b360080f637cdcabe">rpmfts_init</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s, PyObject *args, PyObject *kwds)
<a name="l00396"></a>00396         <span class="comment">/*@modifies s @*/</span>
<a name="l00397"></a>00397 {
<a name="l00398"></a>00398     <span class="keywordtype">char</span> * root = NULL;
<a name="l00399"></a>00399     <span class="keywordtype">int</span> options = -1;
<a name="l00400"></a>00400     <span class="keywordtype">int</span> ignore = -1;
<a name="l00401"></a>00401     <span class="keywordtype">char</span> * kwlist[] = {<span class="stringliteral">"root"</span>, <span class="stringliteral">"options"</span>, <span class="stringliteral">"ignore"</span>, NULL};
<a name="l00402"></a>00402 
<a name="l00403"></a>00403 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00404"></a>00404     <span class="keywordflow">if</span> (!PyArg_ParseTupleAndKeywords(args, kwds, <span class="stringliteral">"|sii:rpmfts_init"</span>, kwlist,
<a name="l00405"></a>00405             &amp;root, &amp;options, &amp;ignore))
<a name="l00406"></a>00406         <span class="keywordflow">return</span> -1;
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="keywordflow">return</span> <a class="code" href="rpmfts-py_8c.html#679667c775e3b6d590230cd4bef196e5">rpmfts_initialize</a>(s, root, options, ignore);
<a name="l00409"></a>00409 }
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="comment">/*@null@*/</span>
<a name="l00412"></a><a class="code" href="group__py__c.html#g4b5607229ae0980dcedfb23ea7f4422f">00412</a> <span class="keyword">static</span> PyObject * <a class="code" href="group__py__c.html#g4b5607229ae0980dcedfb23ea7f4422f">rpmfts_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name="l00413"></a>00413         <span class="comment">/*@*/</span>
<a name="l00414"></a>00414 {
<a name="l00415"></a>00415     <a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> *s;
<a name="l00416"></a>00416     PyObject *o;
<a name="l00417"></a>00417     PyObject *n = NULL;
<a name="l00418"></a>00418     <span class="keywordtype">char</span> * kwlist[] = {0};
<a name="l00419"></a>00419 
<a name="l00420"></a>00420     <span class="comment">/* All the other _new() functions claim to be _init in their errors...*/</span>
<a name="l00421"></a>00421     <span class="keywordflow">if</span> (!PyArg_ParseTupleAndKeywords(args, kwds, <span class="stringliteral">":rpmfts_new"</span>, kwlist))
<a name="l00422"></a>00422         <span class="keywordflow">return</span> NULL;
<a name="l00423"></a>00423 
<a name="l00424"></a>00424     <span class="keywordflow">if</span> ((s = PyObject_GC_New(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a>, type)) == NULL)
<a name="l00425"></a>00425         <span class="keywordflow">return</span> NULL;
<a name="l00426"></a>00426 <a class="code" href="rpmfts-py_8c.html#6092963aa06c3f86161a6f94fcd8c8dc">rpmfts_debug</a>(__FUNCTION__, s);
<a name="l00427"></a>00427 
<a name="l00428"></a>00428     s-&gt;<a class="code" href="structrpmftsObject__s.html#2555e8097af1c6093b5ec136c340d1ae">md_dict</a> = PyDict_New();
<a name="l00429"></a>00429     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#2555e8097af1c6093b5ec136c340d1ae">md_dict</a> == NULL)
<a name="l00430"></a>00430         <span class="keywordflow">goto</span> fail;
<a name="l00431"></a>00431     s-&gt;<a class="code" href="structrpmftsObject__s.html#8206a582cbfe7efb2a8da8a91e27812b">callbacks</a> = PyDict_New();
<a name="l00432"></a>00432     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#2555e8097af1c6093b5ec136c340d1ae">md_dict</a> == NULL)
<a name="l00433"></a>00433         <span class="keywordflow">goto</span> fail;
<a name="l00434"></a>00434     <span class="keywordflow">if</span> (type-&gt;tp_name) {
<a name="l00435"></a>00435         <span class="keywordtype">char</span> * <a class="code" href="structname.html">name</a>;
<a name="l00436"></a>00436         <span class="keywordflow">if</span> ((name = strrchr(type-&gt;tp_name, <span class="charliteral">'.'</span>)) != NULL)
<a name="l00437"></a>00437             name++;
<a name="l00438"></a>00438         <span class="keywordflow">else</span>
<a name="l00439"></a>00439             name = type-&gt;tp_name;
<a name="l00440"></a>00440         n = PyString_FromString(name);
<a name="l00441"></a>00441     }
<a name="l00442"></a>00442     <span class="keywordflow">if</span> (n != NULL &amp;&amp; PyDict_SetItemString(s-&gt;<a class="code" href="structrpmftsObject__s.html#2555e8097af1c6093b5ec136c340d1ae">md_dict</a>, <span class="stringliteral">"__name__"</span>, n) != 0)
<a name="l00443"></a>00443         <span class="keywordflow">goto</span> fail;
<a name="l00444"></a>00444     <span class="keywordflow">if</span> (PyDict_SetItemString(s-&gt;<a class="code" href="structrpmftsObject__s.html#2555e8097af1c6093b5ec136c340d1ae">md_dict</a>, <span class="stringliteral">"__doc__"</span>, Py_None) != 0)
<a name="l00445"></a>00445         <span class="keywordflow">goto</span> fail;
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 <span class="preprocessor">#define CONSTANT(_v) \</span>
<a name="l00448"></a>00448 <span class="preprocessor">    PyDict_SetItemString(s-&gt;md_dict, #_v, o=PyInt_FromLong(_v)); Py_DECREF(o)</span>
<a name="l00449"></a>00449 <span class="preprocessor"></span>
<a name="l00450"></a>00450     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#4e78a83095d68b6e26d0fc356c998553">FTS_ROOTPARENTLEVEL</a>);
<a name="l00451"></a>00451     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#2844597805422fcce07b68553d5c240d">FTS_ROOTLEVEL</a>);
<a name="l00452"></a>00452 
<a name="l00453"></a>00453     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#4403d369e093f7d56644f77e8d33bff6">FTS_COMFOLLOW</a>);
<a name="l00454"></a>00454     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#dd52d49dff5075e5719103e741419b1e">FTS_LOGICAL</a>);
<a name="l00455"></a>00455     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#a8d8025ac10c5f0484e552cd0405d7e4">FTS_NOCHDIR</a>);
<a name="l00456"></a>00456     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#7cb6ec325ca857eea7975e1fbface796">FTS_NOSTAT</a>);
<a name="l00457"></a>00457     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#76855b9b2d2e8f375a268b40c8ac043a">FTS_PHYSICAL</a>);
<a name="l00458"></a>00458     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#556a44512023436769dab2d288932fca">FTS_SEEDOT</a>);
<a name="l00459"></a>00459     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#74d1af04908df57b15596535e8fadcac">FTS_XDEV</a>);
<a name="l00460"></a>00460     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#1c1ac4e104d885313f3e94da73c11766">FTS_WHITEOUT</a>);
<a name="l00461"></a>00461     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#ebaa0753fc9bb137c64bfb603adaf2d2">FTS_OPTIONMASK</a>);
<a name="l00462"></a>00462 
<a name="l00463"></a>00463     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#01653e7bd9c3680cd8dd05c6ae842b9e">FTS_NAMEONLY</a>);
<a name="l00464"></a>00464     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#7cd8e7e6c903b1145f1afec5e56a788f">FTS_STOP</a>);
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#3b100f6d35422be88543e8fbd4746185">FTS_D</a>);
<a name="l00467"></a>00467     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#3e0723712caf4fb60eac6e8b8d96ee08">FTS_DC</a>);
<a name="l00468"></a>00468     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#83e2755e7c3d451dfc957a0f8d512207">FTS_DEFAULT</a>);
<a name="l00469"></a>00469     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#51378b2b2b2fb7aafb8ec393f855540f">FTS_DNR</a>);
<a name="l00470"></a>00470     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#310bbb158d6740b0ed4637bdf9359f3d">FTS_DOT</a>);
<a name="l00471"></a>00471     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#d6048ce28792a0375f8a94259cf438a3">FTS_DP</a>);
<a name="l00472"></a>00472     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#cb95ee355e5eb7d52c8bb2de2cbf4ad6">FTS_ERR</a>);
<a name="l00473"></a>00473     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#f6948b8618cda53eee24f9f581b4726e">FTS_F</a>);
<a name="l00474"></a>00474     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#ab08521c4ad4cc6ff7b6cf2876a69c84">FTS_NS</a>);
<a name="l00475"></a>00475     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#546a4188275065f538387ea45b489e1e">FTS_NSOK</a>);
<a name="l00476"></a>00476     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#dae4db6ea7a91436cacc4f2266dbc8d3">FTS_SL</a>);
<a name="l00477"></a>00477     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#2e9a4a2eccbbfbf5274480a193c0f7c2">FTS_SLNONE</a>);
<a name="l00478"></a>00478     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#9635e62f3ebde0a5687afd574780cad1">FTS_W</a>);
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#3200f54a1289d7a4394b4f4fe430ca72">FTS_DONTCHDIR</a>);
<a name="l00481"></a>00481     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#3268dcdcbed92d1ae175e9c40755c544">FTS_SYMFOLLOW</a>);
<a name="l00482"></a>00482 
<a name="l00483"></a>00483     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#dd4c97abab4f82783dd0784b32dc834b">FTS_AGAIN</a>);
<a name="l00484"></a>00484     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#8dfea5ed6800ec1d6254f7c6570df140">FTS_FOLLOW</a>);
<a name="l00485"></a>00485     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#cc39211835f05b3eda2e84edf6e40b75">FTS_NOINSTR</a>);
<a name="l00486"></a>00486     <a class="code" href="rpmfts-py_8c.html#18f848f2efb9f5f34ff7719dda172295">CONSTANT</a>(<a class="code" href="fts_8h.html#7c6c08320a1cecf4db032b3ef28cb0d9">FTS_SKIP</a>);
<a name="l00487"></a>00487 
<a name="l00488"></a>00488     s-&gt;<a class="code" href="structrpmftsObject__s.html#16d27e707fb80ddc873a50855cf0c700">roots</a> = NULL;
<a name="l00489"></a>00489     s-&gt;<a class="code" href="structrpmftsObject__s.html#c7e6d9ce86bfdd9a0567a78783518ae3">compare</a> = NULL;
<a name="l00490"></a>00490     s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a> = NULL;
<a name="l00491"></a>00491     s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a> = NULL;
<a name="l00492"></a>00492 
<a name="l00493"></a>00493     Py_XDECREF(n);
<a name="l00494"></a>00494     PyObject_GC_Track((PyObject *)s);
<a name="l00495"></a>00495     <span class="keywordflow">return</span> (PyObject *)s;
<a name="l00496"></a>00496 
<a name="l00497"></a>00497  fail:
<a name="l00498"></a>00498     Py_XDECREF(n);
<a name="l00499"></a>00499     Py_DECREF(s);
<a name="l00500"></a>00500     <span class="keywordflow">return</span> NULL;
<a name="l00501"></a>00501 }
<a name="l00502"></a>00502 
<a name="l00503"></a><a class="code" href="group__py__c.html#gc4a31eb4f2ba2baf44abada0a07a0a2d">00503</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="group__py__c.html#gc4a31eb4f2ba2baf44abada0a07a0a2d">rpmfts_traverse</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s, visitproc visit, <span class="keywordtype">void</span> * arg)
<a name="l00504"></a>00504         <span class="comment">/*@*/</span>
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#2555e8097af1c6093b5ec136c340d1ae">md_dict</a> != NULL)
<a name="l00507"></a>00507         <span class="keywordflow">return</span> visit(s-&gt;<a class="code" href="structrpmftsObject__s.html#2555e8097af1c6093b5ec136c340d1ae">md_dict</a>, arg);
<a name="l00508"></a>00508     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrpmftsObject__s.html#8206a582cbfe7efb2a8da8a91e27812b">callbacks</a> != NULL)
<a name="l00509"></a>00509         <span class="keywordflow">return</span> visit(s-&gt;<a class="code" href="structrpmftsObject__s.html#8206a582cbfe7efb2a8da8a91e27812b">callbacks</a>, arg);
<a name="l00510"></a>00510     <span class="keywordflow">return</span> 0;
<a name="l00511"></a>00511 }
<a name="l00512"></a>00512 
<a name="l00513"></a><a class="code" href="group__py__c.html#g6ba714f02e3122d9b5be8655ba1b5b76">00513</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="group__py__c.html#g6ba714f02e3122d9b5be8655ba1b5b76">rpmfts_print</a>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a> * s,  FILE * fp, <span class="comment">/*@unused@*/</span> <span class="keywordtype">int</span> flags)
<a name="l00514"></a>00514         <span class="comment">/*@globals fileSystem @*/</span>
<a name="l00515"></a>00515         <span class="comment">/*@modifies fp, fileSystem @*/</span>
<a name="l00516"></a>00516 {
<a name="l00517"></a>00517     <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="rpmgi_8c.html#eb1315939925d47a0e89d123a042691b">indent</a> = 2;
<a name="l00518"></a>00518 
<a name="l00519"></a>00519     <span class="keywordflow">if</span> (!(s != NULL &amp;&amp; s-&gt;<a class="code" href="structrpmftsObject__s.html#ed49af269d8eb31a9885e5c9667a94c6">ftsp</a> != NULL &amp;&amp; s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a> != NULL))
<a name="l00520"></a>00520         <span class="keywordflow">return</span> -1;
<a name="l00521"></a>00521     fprintf(fp, <span class="stringliteral">"FTS_%-7s %*s%s"</span>, <a class="code" href="rpmgi_8c.html#dc604a42e35471f5be7f800f036dfe9e">ftsInfoStr</a>(s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a>-&gt;<a class="code" href="struct__ftsent.html#3538621ba0de9ea1e361974a0f476f42">fts_info</a>),
<a name="l00522"></a>00522         indent * (s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a>-&gt;<a class="code" href="struct__ftsent.html#4362014359fa6e09631863b67b90ee51">fts_level</a> &lt; 0 ? 0 : s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a>-&gt;<a class="code" href="struct__ftsent.html#4362014359fa6e09631863b67b90ee51">fts_level</a>), <span class="stringliteral">""</span>,
<a name="l00523"></a>00523         s-&gt;<a class="code" href="structrpmftsObject__s.html#06ed2fc6d2b6747ddf6e973ef51c17be">fts</a>-&gt;<a class="code" href="struct__ftsent.html#30a3e24bc208d15d6cf4d72a44d15bb3">fts_name</a>);
<a name="l00524"></a>00524     <span class="keywordflow">return</span> 0;
<a name="l00525"></a>00525 }
<a name="l00526"></a>00526 
<a name="l00529"></a>00529 <span class="comment">/*@unchecked@*/</span> <span class="comment">/*@observer@*/</span>
<a name="l00530"></a><a class="code" href="group__py__c.html#g25acecda109c23f11a57aaa4e0d7b15d">00530</a> <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="group__py__c.html#g25acecda109c23f11a57aaa4e0d7b15d">rpmfts_doc</a>[] =
<a name="l00531"></a>00531 <span class="stringliteral">""</span>;
<a name="l00532"></a>00532 
<a name="l00535"></a>00535 <span class="comment">/*@-fullinitblock@*/</span>
<a name="l00536"></a><a class="code" href="group__py__c.html#g026737f5cb51814750b594f87b921e7c">00536</a> PyTypeObject <a class="code" href="group__py__c.html#g026737f5cb51814750b594f87b921e7c">rpmfts_Type</a> = {
<a name="l00537"></a>00537         PyObject_HEAD_INIT(&amp;PyType_Type)
<a name="l00538"></a>00538         0,                              <span class="comment">/* ob_size */</span>
<a name="l00539"></a>00539         <span class="stringliteral">"rpm.fts"</span>,                      <span class="comment">/* tp_name */</span>
<a name="l00540"></a>00540         <span class="keyword">sizeof</span>(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a>),           <span class="comment">/* tp_size */</span>
<a name="l00541"></a>00541         0,                              <span class="comment">/* tp_itemsize */</span>
<a name="l00542"></a>00542         <span class="comment">/* methods */</span>
<a name="l00543"></a>00543         (destructor) <a class="code" href="group__py__c.html#g4704b6099e097b3c7b51fefb912219a9">rpmfts_dealloc</a>,    <span class="comment">/* tp_dealloc */</span>
<a name="l00544"></a>00544         (printfunc) <a class="code" href="group__py__c.html#g6ba714f02e3122d9b5be8655ba1b5b76">rpmfts_print</a>,       <span class="comment">/* tp_print */</span>
<a name="l00545"></a>00545         (getattrfunc)0,                 <span class="comment">/* tp_getattr */</span>
<a name="l00546"></a>00546         (setattrfunc)0,                 <span class="comment">/* tp_setattr */</span>
<a name="l00547"></a>00547         (cmpfunc)0,                     <span class="comment">/* tp_compare */</span>
<a name="l00548"></a>00548         (reprfunc)0,                    <span class="comment">/* tp_repr */</span>
<a name="l00549"></a>00549         0,                              <span class="comment">/* tp_as_number */</span>
<a name="l00550"></a>00550         0,                              <span class="comment">/* tp_as_sequence */</span>
<a name="l00551"></a>00551         0,                              <span class="comment">/* tp_as_mapping */</span>
<a name="l00552"></a>00552         (hashfunc)0,                    <span class="comment">/* tp_hash */</span>
<a name="l00553"></a>00553         (ternaryfunc)0,                 <span class="comment">/* tp_call */</span>
<a name="l00554"></a>00554         (reprfunc)0,                    <span class="comment">/* tp_str */</span>
<a name="l00555"></a>00555         (getattrofunc) <a class="code" href="group__py__c.html#gf91a36b00703016aabfd0eef8126ab90">rpmfts_getattro</a>, <span class="comment">/* tp_getattro */</span>
<a name="l00556"></a>00556         (setattrofunc) <a class="code" href="group__py__c.html#gf1c5b558b6bb20c21ca2304f3ebdec3d">rpmfts_setattro</a>, <span class="comment">/* tp_setattro */</span>
<a name="l00557"></a>00557         0,                              <span class="comment">/* tp_as_buffer */</span>
<a name="l00558"></a>00558         Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC, <span class="comment">/* tp_flags */</span>
<a name="l00559"></a>00559         rpmfts_doc,                     <span class="comment">/* tp_doc */</span>
<a name="l00560"></a>00560         (traverseproc) <a class="code" href="group__py__c.html#gc4a31eb4f2ba2baf44abada0a07a0a2d">rpmfts_traverse</a>, <span class="comment">/* tp_traverse */</span>
<a name="l00561"></a>00561         0,                              <span class="comment">/* tp_clear */</span>
<a name="l00562"></a>00562         0,                              <span class="comment">/* tp_richcompare */</span>
<a name="l00563"></a>00563         0,                              <span class="comment">/* tp_weaklistoffset */</span>
<a name="l00564"></a>00564         (getiterfunc) <a class="code" href="group__py__c.html#g2e6dc71513ec1a7a9e48a028e5cf0dee">rpmfts_iter</a>,      <span class="comment">/* tp_iter */</span>
<a name="l00565"></a>00565         (iternextfunc) <a class="code" href="group__py__c.html#g440e728fa7abc3d185eab91f223d3b1f">rpmfts_iternext</a>, <span class="comment">/* tp_iternext */</span>
<a name="l00566"></a>00566         <a class="code" href="group__py__c.html#g04e8fffa3584132da2b43cdc6314cd53">rpmfts_methods</a>,                 <span class="comment">/* tp_methods */</span>
<a name="l00567"></a>00567         rpmfts_members,                 <span class="comment">/* tp_members */</span>
<a name="l00568"></a>00568         0,                              <span class="comment">/* tp_getset */</span>
<a name="l00569"></a>00569         0,                              <span class="comment">/* tp_base */</span>
<a name="l00570"></a>00570         0,                              <span class="comment">/* tp_dict */</span>
<a name="l00571"></a>00571         0,                              <span class="comment">/* tp_descr_get */</span>
<a name="l00572"></a>00572         0,                              <span class="comment">/* tp_descr_set */</span>
<a name="l00573"></a>00573         offsetof(<a class="code" href="structrpmftsObject__s.html">rpmftsObject</a>, md_dict),<span class="comment">/* tp_dictoffset */</span>
<a name="l00574"></a>00574         (initproc) <a class="code" href="group__py__c.html#g003f97b47832e30b360080f637cdcabe">rpmfts_init</a>,         <span class="comment">/* tp_init */</span>
<a name="l00575"></a>00575         <a class="code" href="group__py__c.html#gee97dee911737cecc22d3718a09f45c2">rpmfts_alloc</a>,                   <span class="comment">/* tp_alloc */</span>
<a name="l00576"></a>00576         <a class="code" href="group__py__c.html#g4b5607229ae0980dcedfb23ea7f4422f">rpmfts_new</a>,                     <span class="comment">/* tp_new */</span>
<a name="l00577"></a>00577         <a class="code" href="group__py__c.html#gfc6bd5fdb2030a5b4b154906869bc29d">rpmfts_free</a>,                    <span class="comment">/* tp_free */</span>
<a name="l00578"></a>00578         0,                              <span class="comment">/* tp_is_gc */</span>
<a name="l00579"></a>00579 };
<a name="l00580"></a>00580 <span class="comment">/*@=fullinitblock@*/</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:54 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
