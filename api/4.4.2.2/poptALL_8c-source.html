<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: lib/poptALL.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>lib/poptALL.c</h1><a href="poptALL_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00006"></a>00006 <span class="preprocessor">#include "<a class="code" href="system_8h.html">system.h</a>"</span>
<a name="l00007"></a><a class="code" href="poptALL_8c.html#bfe6ec379e0fe85b10ff6015bc0fdacc">00007</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="system_8h.html#50180bf6cf9a16254855e00c82286804">__progname</a>;
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;<a class="code" href="rpmcli_8h.html">rpmcli.h</a>&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;<a class="code" href="fts_8h.html">fts.h</a>&gt;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#include "<a class="code" href="debug_8h.html">debug.h</a>"</span>
<a name="l00013"></a>00013 
<a name="l00014"></a><a class="code" href="poptALL_8c.html#b2cb36c7329e94bab2368ab7d25da22f">00014</a> <span class="preprocessor">#define POPT_SHOWVERSION        -999</span>
<a name="l00015"></a><a class="code" href="poptALL_8c.html#a855f455834fc26f7131d368fa4651e2">00015</a> <span class="preprocessor"></span><span class="preprocessor">#define POPT_SHOWRC             -998</span>
<a name="l00016"></a><a class="code" href="poptALL_8c.html#5c67e1a838fe17cc35451cc7afd29dbf">00016</a> <span class="preprocessor"></span><span class="preprocessor">#define POPT_QUERYTAGS          -997</span>
<a name="l00017"></a><a class="code" href="poptALL_8c.html#590f6d172c81b2a594c33d02463f46bc">00017</a> <span class="preprocessor"></span><span class="preprocessor">#define POPT_PREDEFINE          -996</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">#ifdef  NOTYET</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#define POPT_RCFILE             -995</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="comment">/*@unchecked@*/</span>
<a name="l00023"></a><a class="code" href="poptALL_8c.html#3f39405c2d7c0f545d6b90051f250c85">00023</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#3f39405c2d7c0f545d6b90051f250c85">_debug</a> = 0;
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="comment">/*@-exportheadervar@*/</span>
<a name="l00026"></a>00026 <span class="comment">/*@unchecked@*/</span>
<a name="l00027"></a>00027 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#6f8c72781b2c31a01fa425a7703d1f9f">_rpmds_nopromote</a>;
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="comment">/*@unchecked@*/</span>
<a name="l00030"></a>00030 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#a574c3601ca74717a42fa7c121f986f9">_fps_debug</a>;
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="comment">/*@unchecked@*/</span>
<a name="l00033"></a>00033 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptBT_8c.html#76ef6b61d6c034d5d7a84280e388f483">_fsm_debug</a>;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="comment">/*@unchecked@*/</span>
<a name="l00036"></a>00036 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="fsm_8c.html#bd2f72dd5fff0183f3a3392c943ed9c3">_fsm_threads</a>;
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="comment">/*@unchecked@*/</span>
<a name="l00039"></a>00039 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#4d03295368777f2991c72a63cd6815fc">_hdr_debug</a>;
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">/*@unchecked@*/</span>
<a name="l00042"></a>00042 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="package_8c.html#751ebc9b28c168fda034b5a6b5b25722">_print_pkts</a>;
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="comment">/*@unchecked@*/</span>
<a name="l00045"></a>00045 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#1c2ede845b148b5fca6c850a3e137d86">_psm_debug</a>;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="comment">/*@unchecked@*/</span>
<a name="l00048"></a>00048 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#dd4e1a4c48272c659ff82733577ffff2">_psm_threads</a>;
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="comment">/*@unchecked@*/</span>
<a name="l00051"></a>00051 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#5ab259130f2cb399cc1ece749e82463c">_rpmal_debug</a>;
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="comment">/*@unchecked@*/</span>
<a name="l00054"></a>00054 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#7d80c586e47e4431c591805c88300d2f">_rpmdb_debug</a>;
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 <span class="comment">/*@unchecked@*/</span>
<a name="l00057"></a>00057 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#0e6448c5e69982853fbc8c70b187056b">_rpmds_debug</a>;
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="comment">/* XXX avoid -lrpmbuild linkage. */</span>
<a name="l00060"></a>00060 <span class="comment">/*@unchecked@*/</span>
<a name="l00061"></a><a class="code" href="poptALL_8c.html#608c14cadb7aa2256b7f0577df313971">00061</a>        <span class="keywordtype">int</span> <a class="code" href="rpmfc_8h.html#608c14cadb7aa2256b7f0577df313971">_rpmfc_debug</a>;
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="comment">/*@unchecked@*/</span>
<a name="l00064"></a>00064 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#62e70f59ecf10713dd8343e852189d62">_rpmfi_debug</a>;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="comment">/*@unchecked@*/</span>
<a name="l00067"></a>00067 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#afbac3e9bcbeae14aaf805d237e7a051">_rpmgi_debug</a>;
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="comment">/*@unchecked@*/</span>
<a name="l00070"></a>00070 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#e62f0de7a53629c6eb44581fa0cff70b">_rpmps_debug</a>;
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 <span class="comment">/*@unchecked@*/</span>
<a name="l00073"></a>00073 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#dcfcab606a7cc09228fbc43fc48b6dd7">_rpmsq_debug</a>;
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="comment">/*@unchecked@*/</span>
<a name="l00076"></a>00076 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#24ba841aad63f1e594c3f73625686fb8">_rpmsx_debug</a>;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="comment">/*@unchecked@*/</span>
<a name="l00079"></a>00079 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#8190dd4b21207bc2b78e847b915f4a63">_rpmte_debug</a>;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment">/*@unchecked@*/</span>
<a name="l00082"></a>00082 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#d45b82b9cb8bc790c95bf35da509ef60">_rpmts_debug</a>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">/*@unchecked@*/</span>
<a name="l00085"></a>00085 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#ea8f3ef7c7e9f6f8249a61223e319b9a">_rpmts_stats</a>;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 <span class="comment">/*@unchecked@*/</span>
<a name="l00088"></a>00088 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#8d00cce32160aa23a96acdf43831958c">noLibio</a>;
<a name="l00089"></a>00089 <span class="comment">/*@=exportheadervar@*/</span>
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">/*@unchecked@*/</span>
<a name="l00092"></a><a class="code" href="rpmcli_8h.html#9c2d5914ee9fe08f64c2053b111cc6b3">00092</a> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="poptALL_8c.html#9c2d5914ee9fe08f64c2053b111cc6b3">rpmcliPipeOutput</a> = NULL;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="comment">/*@unchecked@*/</span>
<a name="l00095"></a><a class="code" href="rpmcli_8h.html#be15d4f1c2930c65877034aeac3cb5d6">00095</a> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="poptALL_8c.html#be15d4f1c2930c65877034aeac3cb5d6">rpmcliRcfile</a> = NULL;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <span class="comment">/*@unchecked@*/</span>
<a name="l00098"></a><a class="code" href="rpmcli_8h.html#82a451d728a0042adf1a10f8d0d3877f">00098</a> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="poptALL_8c.html#82a451d728a0042adf1a10f8d0d3877f">rpmcliRootDir</a> = <span class="stringliteral">"/"</span>;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 <span class="comment">/*@unchecked@*/</span>
<a name="l00101"></a><a class="code" href="group__rpmcli.html#g7fff7207b8cefdfe01b499a8827e1da8">00101</a> <a class="code" href="group__rpmcli.html#g0a7f799bb561a1526c0b9b9343cce421" title="Bit(s) to control rpmQuery() operation, stored in qva_flags.">rpmQueryFlags</a> <a class="code" href="group__rpmcli.html#g7fff7207b8cefdfe01b499a8827e1da8" title="Bit(s) from common command line options.">rpmcliQueryFlags</a>;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="comment">/*@-exportheadervar@*/</span>
<a name="l00104"></a>00104 <span class="comment">/*@unchecked@*/</span>
<a name="l00105"></a>00105 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#adaf57ff8960c1dbab523ea7c63ef621">_ftp_debug</a>;
<a name="l00106"></a>00106 <span class="comment">/*@unchecked@*/</span>
<a name="l00107"></a>00107 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#c07495b0f9a93d6a7487859d9a8c6157">_av_debug</a>;
<a name="l00108"></a>00108 <span class="comment">/*@unchecked@*/</span>
<a name="l00109"></a>00109 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#6e350417e29d996fcf79179a7a05a19e">_dav_debug</a>;
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment">/*@unchecked@*/</span>
<a name="l00112"></a>00112 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#8d00cce32160aa23a96acdf43831958c">noLibio</a>;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="comment">/*@unchecked@*/</span>
<a name="l00115"></a>00115 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#2d5b915e8c5d750401c5720dc28bf206">_rpmio_debug</a>;
<a name="l00116"></a>00116 <span class="comment">/*@=exportheadervar@*/</span>
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 <span class="comment">/*@unchecked@*/</span>
<a name="l00119"></a><a class="code" href="poptALL_8c.html#1d9b2c8a13ee06d8822900a9afe287e1">00119</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#1d9b2c8a13ee06d8822900a9afe287e1">rpmcliInitialized</a> = -1;
<a name="l00120"></a>00120 
<a name="l00124"></a><a class="code" href="poptALL_8c.html#c12df4d10e9a90d2d036bd81171cc1fa">00124</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="rpmqv_8c.html#c12df4d10e9a90d2d036bd81171cc1fa">printVersion</a>(FILE * fp)
<a name="l00125"></a>00125         <span class="comment">/*@globals rpmEVR, fileSystem @*/</span>
<a name="l00126"></a>00126         <span class="comment">/*@modifies *fp, fileSystem @*/</span>
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128     fprintf(fp, <a class="code" href="system_8h.html#2ec2c1c3098396e2d147d58b66f18ceb">_</a>(<span class="stringliteral">"RPM version %s\n"</span>), <a class="code" href="depends_8c.html#216d09b20b67c12df42eb7df90067177">rpmEVR</a>);
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00135"></a>00135 <span class="comment">/*@mayexit@*/</span>
<a name="l00136"></a><a class="code" href="rpmcli_8h.html#fbff8c532c98dba81765dd5145b09554">00136</a> <span class="keywordtype">void</span> <a class="code" href="poptALL_8c.html#fbff8c532c98dba81765dd5145b09554" title="Make sure that rpm configuration has been read.">rpmcliConfigured</a>(<span class="keywordtype">void</span>)
<a name="l00137"></a>00137         <span class="comment">/*@globals rpmcliInitialized, rpmCLIMacroContext, rpmGlobalMacroContext,</span>
<a name="l00138"></a>00138 <span class="comment">                h_errno, fileSystem, internalState @*/</span>
<a name="l00139"></a>00139         <span class="comment">/*@modifies rpmcliInitialized, rpmCLIMacroContext, rpmGlobalMacroContext,</span>
<a name="l00140"></a>00140 <span class="comment">                fileSystem, internalState @*/</span>
<a name="l00141"></a>00141 {
<a name="l00142"></a>00142 
<a name="l00143"></a>00143     <span class="keywordflow">if</span> (<a class="code" href="poptALL_8c.html#1d9b2c8a13ee06d8822900a9afe287e1">rpmcliInitialized</a> &lt; 0)
<a name="l00144"></a>00144         <a class="code" href="poptALL_8c.html#1d9b2c8a13ee06d8822900a9afe287e1">rpmcliInitialized</a> = <a class="code" href="group__rpmrc.html#g4a7184e58c74b1ada8f733449b8fd1cd" title="Read macro configuration file(s) for a target.">rpmReadConfigFiles</a>(<a class="code" href="poptALL_8c.html#be15d4f1c2930c65877034aeac3cb5d6">rpmcliRcfile</a>, NULL);
<a name="l00145"></a>00145     <span class="keywordflow">if</span> (<a class="code" href="poptALL_8c.html#1d9b2c8a13ee06d8822900a9afe287e1">rpmcliInitialized</a>)
<a name="l00146"></a>00146         exit(<a class="code" href="system_8h.html#d851a8925c3675478e7dbb01d23a4dfa">EXIT_FAILURE</a>);
<a name="l00147"></a>00147 }
<a name="l00148"></a>00148 
<a name="l00151"></a>00151 <span class="comment">/*@-bounds@*/</span>
<a name="l00152"></a><a class="code" href="poptALL_8c.html#724a40e39d63417c264470c0b66cf36d">00152</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="poptALL_8c.html#724a40e39d63417c264470c0b66cf36d">rpmcliAllArgCallback</a>( <span class="comment">/*@unused@*/</span> poptContext con,
<a name="l00153"></a>00153                 <span class="comment">/*@unused@*/</span> <span class="keyword">enum</span> poptCallbackReason reason,
<a name="l00154"></a>00154                 <span class="keyword">const</span> <span class="keyword">struct</span> poptOption * opt, <span class="keyword">const</span> <span class="keywordtype">char</span> * arg,
<a name="l00155"></a>00155                 <span class="comment">/*@unused@*/</span> <span class="keyword">const</span> <span class="keywordtype">void</span> * data)
<a name="l00156"></a>00156         <span class="comment">/*@globals rpmcliQueryFlags, rpmCLIMacroContext, rpmGlobalMacroContext,</span>
<a name="l00157"></a>00157 <span class="comment">                h_errno, fileSystem, internalState @*/</span>
<a name="l00158"></a>00158         <span class="comment">/*@modifies rpmcliQueryFlags, rpmCLIMacroContext, rpmGlobalMacroContext,</span>
<a name="l00159"></a>00159 <span class="comment">                fileSystem, internalState @*/</span>
<a name="l00160"></a>00160 {
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     <span class="comment">/* XXX avoid accidental collisions with POPT_BIT_SET for flags */</span>
<a name="l00163"></a>00163     <span class="comment">/*@-branchstate@*/</span>
<a name="l00164"></a>00164     <span class="keywordflow">if</span> (opt-&gt;arg == NULL)
<a name="l00165"></a>00165     <span class="keywordflow">switch</span> (opt-&gt;val) {
<a name="l00166"></a>00166     <span class="keywordflow">case</span> <span class="charliteral">'q'</span>:
<a name="l00167"></a>00167         <a class="code" href="rpmmessages_8h.html#8d8b22b9914bfdd0667df17eed998b57">rpmSetVerbosity</a>(<a class="code" href="rpmmessages_8h.html#bd3b435e0fa5463de3b8862a275d24f5">RPMMESS_QUIET</a>);
<a name="l00168"></a>00168         <span class="keywordflow">break</span>;
<a name="l00169"></a>00169     <span class="keywordflow">case</span> <span class="charliteral">'v'</span>:
<a name="l00170"></a>00170         <a class="code" href="rpmmessages_8h.html#83676a1aa81e902f9f0ebf0faa4557b7">rpmIncreaseVerbosity</a>();
<a name="l00171"></a>00171         <span class="keywordflow">break</span>;
<a name="l00172"></a>00172     <span class="keywordflow">case</span> <a class="code" href="poptALL_8c.html#590f6d172c81b2a594c33d02463f46bc">POPT_PREDEFINE</a>:
<a name="l00173"></a>00173         (void) <a class="code" href="macro_8c.html#1f883e66bb4e62be1f845a32dfebf909" title="Define macro in context.">rpmDefineMacro</a>(NULL, arg, <a class="code" href="rpmmacro_8h.html#5b2d68d6400d76546c157105103e51fd">RMIL_CMDLINE</a>);
<a name="l00174"></a>00174         <span class="keywordflow">break</span>;
<a name="l00175"></a>00175     <span class="keywordflow">case</span> <span class="charliteral">'D'</span>:
<a name="l00176"></a>00176         <span class="comment">/* XXX Predefine macro if not initialized yet. */</span>
<a name="l00177"></a>00177         <span class="keywordflow">if</span> (<a class="code" href="poptALL_8c.html#1d9b2c8a13ee06d8822900a9afe287e1">rpmcliInitialized</a> &lt; 0)
<a name="l00178"></a>00178             (void) <a class="code" href="macro_8c.html#1f883e66bb4e62be1f845a32dfebf909" title="Define macro in context.">rpmDefineMacro</a>(NULL, arg, <a class="code" href="rpmmacro_8h.html#5b2d68d6400d76546c157105103e51fd">RMIL_CMDLINE</a>);
<a name="l00179"></a>00179         <a class="code" href="poptALL_8c.html#fbff8c532c98dba81765dd5145b09554" title="Make sure that rpm configuration has been read.">rpmcliConfigured</a>();
<a name="l00180"></a>00180 <span class="comment">/*@-type@*/</span>
<a name="l00181"></a>00181         (void) <a class="code" href="macro_8c.html#1f883e66bb4e62be1f845a32dfebf909" title="Define macro in context.">rpmDefineMacro</a>(NULL, arg, <a class="code" href="rpmmacro_8h.html#5b2d68d6400d76546c157105103e51fd">RMIL_CMDLINE</a>);
<a name="l00182"></a>00182         (void) <a class="code" href="macro_8c.html#1f883e66bb4e62be1f845a32dfebf909" title="Define macro in context.">rpmDefineMacro</a>(<a class="code" href="rpmlib_8h.html#8006c2dbfafa9d855483d850e26c52d8">rpmCLIMacroContext</a>, arg, <a class="code" href="rpmmacro_8h.html#5b2d68d6400d76546c157105103e51fd">RMIL_CMDLINE</a>);
<a name="l00183"></a>00183 <span class="comment">/*@=type@*/</span>
<a name="l00184"></a>00184         <span class="keywordflow">break</span>;
<a name="l00185"></a>00185     <span class="keywordflow">case</span> <span class="charliteral">'E'</span>:
<a name="l00186"></a>00186         <a class="code" href="poptALL_8c.html#fbff8c532c98dba81765dd5145b09554" title="Make sure that rpm configuration has been read.">rpmcliConfigured</a>();
<a name="l00187"></a>00187         {   <span class="keyword">const</span> <span class="keywordtype">char</span> *val = <a class="code" href="macro_8c.html#0dba4b275f1c8f96b8dae9537a8aa3cf" title="Return (malloc'ed) concatenated macro expansion(s).">rpmExpand</a>(arg, NULL);
<a name="l00188"></a>00188             fprintf(stdout, <span class="stringliteral">"%s\n"</span>, val);
<a name="l00189"></a>00189             val = <a class="code" href="rpmlib_8h.html#d608c2923552dbeeb832133a9a289bb7" title="Wrapper to free(3), hides const compilation noise, permit NULL, return NULL.">_free</a>(val);
<a name="l00190"></a>00190         }
<a name="l00191"></a>00191         <span class="keywordflow">break</span>;
<a name="l00192"></a>00192     <span class="keywordflow">case</span> <a class="code" href="poptALL_8c.html#b2cb36c7329e94bab2368ab7d25da22f">POPT_SHOWVERSION</a>:
<a name="l00193"></a>00193         <a class="code" href="rpmqv_8c.html#c12df4d10e9a90d2d036bd81171cc1fa">printVersion</a>(stdout);
<a name="l00194"></a>00194         exit(EXIT_SUCCESS);
<a name="l00195"></a>00195         <span class="comment">/*@notreached@*/</span> <span class="keywordflow">break</span>;
<a name="l00196"></a>00196     <span class="keywordflow">case</span> <a class="code" href="poptALL_8c.html#a855f455834fc26f7131d368fa4651e2">POPT_SHOWRC</a>:
<a name="l00197"></a>00197         <a class="code" href="poptALL_8c.html#fbff8c532c98dba81765dd5145b09554" title="Make sure that rpm configuration has been read.">rpmcliConfigured</a>();
<a name="l00198"></a>00198         (void) <a class="code" href="group__rpmrc.html#ga23712e82b33f6499e53d9f3552bdd0c" title="Display current rpmrc (and macro) configuration.">rpmShowRC</a>(stdout);
<a name="l00199"></a>00199         exit(EXIT_SUCCESS);
<a name="l00200"></a>00200         <span class="comment">/*@notreached@*/</span> <span class="keywordflow">break</span>;
<a name="l00201"></a>00201     <span class="keywordflow">case</span> <a class="code" href="poptALL_8c.html#5c67e1a838fe17cc35451cc7afd29dbf">POPT_QUERYTAGS</a>:
<a name="l00202"></a>00202         <a class="code" href="group__rpmcli.html#g9fb61c200e288510411f3f4f4e9508c9" title="Display list of tags that can be used in --queryformat.">rpmDisplayQueryTags</a>(stdout);
<a name="l00203"></a>00203         exit(EXIT_SUCCESS);
<a name="l00204"></a>00204         <span class="comment">/*@notreached@*/</span> <span class="keywordflow">break</span>;
<a name="l00205"></a>00205 <span class="preprocessor">#if defined(POPT_RCFILE)</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span>    <span class="keywordflow">case</span> POPT_RCFILE:           <span class="comment">/* XXX FIXME: noop for now */</span>
<a name="l00207"></a>00207         <span class="keywordflow">break</span>;
<a name="l00208"></a>00208 <span class="preprocessor">#endif</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="rpmcli_8h.html#7e075891bffd8eb2ab08a5611bf31c2a">RPMCLI_POPT_NODIGEST</a>:
<a name="l00210"></a>00210         <a class="code" href="group__rpmcli.html#g7fff7207b8cefdfe01b499a8827e1da8" title="Bit(s) from common command line options.">rpmcliQueryFlags</a> |= <a class="code" href="group__rpmcli.html#gge57534cde3e9032b6b0aa7e27bfe9e71125165395e4d9d505c88cb532d564cdf">VERIFY_DIGEST</a>;
<a name="l00211"></a>00211         <span class="keywordflow">break</span>;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <span class="keywordflow">case</span> <a class="code" href="rpmcli_8h.html#555454c3d67a1908fc5f17e1fc33d358">RPMCLI_POPT_NOSIGNATURE</a>:
<a name="l00214"></a>00214         <a class="code" href="group__rpmcli.html#g7fff7207b8cefdfe01b499a8827e1da8" title="Bit(s) from common command line options.">rpmcliQueryFlags</a> |= <a class="code" href="group__rpmcli.html#gge57534cde3e9032b6b0aa7e27bfe9e71d180f7d9e674d6b3abeca381f18fb082">VERIFY_SIGNATURE</a>;
<a name="l00215"></a>00215         <span class="keywordflow">break</span>;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217     <span class="keywordflow">case</span> <a class="code" href="rpmcli_8h.html#1a4cd99b8e77a638e4b4502728592ac0">RPMCLI_POPT_NOHDRCHK</a>:
<a name="l00218"></a>00218         <a class="code" href="group__rpmcli.html#g7fff7207b8cefdfe01b499a8827e1da8" title="Bit(s) from common command line options.">rpmcliQueryFlags</a> |= <a class="code" href="group__rpmcli.html#gge57534cde3e9032b6b0aa7e27bfe9e71b0ba43f5af74f906251c75b6a3c5247e">VERIFY_HDRCHK</a>;
<a name="l00219"></a>00219         <span class="keywordflow">break</span>;
<a name="l00220"></a>00220     }
<a name="l00221"></a>00221     <span class="comment">/*@=branchstate@*/</span>
<a name="l00222"></a>00222 }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 <span class="comment">/*@unchecked@*/</span>
<a name="l00225"></a><a class="code" href="rpmcli_8h.html#b45f78f13b49c7a9a1f4ba951810f539">00225</a> <span class="keywordtype">int</span> <a class="code" href="poptALL_8c.html#b45f78f13b49c7a9a1f4ba951810f539">ftsOpts</a> = 0;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 <span class="comment">/*@unchecked@*/</span>
<a name="l00228"></a><a class="code" href="rpmcli_8h.html#a0dca5e7a058c79bfeb97973fc02d41f">00228</a> <span class="keyword">struct </span>poptOption <a class="code" href="poptALL_8c.html#a0dca5e7a058c79bfeb97973fc02d41f">rpmcliFtsPoptTable</a>[] = {
<a name="l00229"></a>00229  { <span class="stringliteral">"comfollow"</span>, <span class="charliteral">'\0'</span>, POPT_BIT_SET,     &amp;<a class="code" href="poptALL_8c.html#b45f78f13b49c7a9a1f4ba951810f539">ftsOpts</a>, <a class="code" href="fts_8h.html#4403d369e093f7d56644f77e8d33bff6">FTS_COMFOLLOW</a>,
<a name="l00230"></a>00230         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"FTS_COMFOLLOW: follow command line symlinks"</span>), NULL },
<a name="l00231"></a>00231  { <span class="stringliteral">"logical"</span>, <span class="charliteral">'\0'</span>, POPT_BIT_SET,       &amp;<a class="code" href="poptALL_8c.html#b45f78f13b49c7a9a1f4ba951810f539">ftsOpts</a>, <a class="code" href="fts_8h.html#dd52d49dff5075e5719103e741419b1e">FTS_LOGICAL</a>,
<a name="l00232"></a>00232         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"FTS_LOGICAL: logical walk"</span>), NULL },
<a name="l00233"></a>00233  { <span class="stringliteral">"nochdir"</span>, <span class="charliteral">'\0'</span>, POPT_BIT_SET,       &amp;<a class="code" href="poptALL_8c.html#b45f78f13b49c7a9a1f4ba951810f539">ftsOpts</a>, <a class="code" href="fts_8h.html#a8d8025ac10c5f0484e552cd0405d7e4">FTS_NOCHDIR</a>,
<a name="l00234"></a>00234         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"FTS_NOCHDIR: don't change directories"</span>), NULL },
<a name="l00235"></a>00235  { <span class="stringliteral">"nostat"</span>, <span class="charliteral">'\0'</span>, POPT_BIT_SET,        &amp;<a class="code" href="poptALL_8c.html#b45f78f13b49c7a9a1f4ba951810f539">ftsOpts</a>, <a class="code" href="fts_8h.html#7cb6ec325ca857eea7975e1fbface796">FTS_NOSTAT</a>,
<a name="l00236"></a>00236         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"FTS_NOSTAT: don't get stat info"</span>), NULL },
<a name="l00237"></a>00237  { <span class="stringliteral">"physical"</span>, <span class="charliteral">'\0'</span>, POPT_BIT_SET,      &amp;<a class="code" href="poptALL_8c.html#b45f78f13b49c7a9a1f4ba951810f539">ftsOpts</a>, <a class="code" href="fts_8h.html#76855b9b2d2e8f375a268b40c8ac043a">FTS_PHYSICAL</a>,
<a name="l00238"></a>00238         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"FTS_PHYSICAL: physical walk"</span>), NULL },
<a name="l00239"></a>00239  { <span class="stringliteral">"seedot"</span>, <span class="charliteral">'\0'</span>, POPT_BIT_SET,        &amp;<a class="code" href="poptALL_8c.html#b45f78f13b49c7a9a1f4ba951810f539">ftsOpts</a>, <a class="code" href="fts_8h.html#556a44512023436769dab2d288932fca">FTS_SEEDOT</a>,
<a name="l00240"></a>00240         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"FTS_SEEDOT: return dot and dot-dot"</span>), NULL },
<a name="l00241"></a>00241  { <span class="stringliteral">"xdev"</span>, <span class="charliteral">'\0'</span>, POPT_BIT_SET,          &amp;<a class="code" href="poptALL_8c.html#b45f78f13b49c7a9a1f4ba951810f539">ftsOpts</a>, <a class="code" href="fts_8h.html#74d1af04908df57b15596535e8fadcac">FTS_XDEV</a>,
<a name="l00242"></a>00242         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"FTS_XDEV: don't cross devices"</span>), NULL },
<a name="l00243"></a>00243  { <span class="stringliteral">"whiteout"</span>, <span class="charliteral">'\0'</span>, POPT_BIT_SET,      &amp;<a class="code" href="poptALL_8c.html#b45f78f13b49c7a9a1f4ba951810f539">ftsOpts</a>, <a class="code" href="fts_8h.html#1c1ac4e104d885313f3e94da73c11766">FTS_WHITEOUT</a>,
<a name="l00244"></a>00244         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"FTS_WHITEOUT: return whiteout information"</span>), NULL },
<a name="l00245"></a>00245    POPT_TABLEEND
<a name="l00246"></a>00246 };
<a name="l00247"></a>00247 
<a name="l00248"></a>00248 <span class="comment">/*@-bitwisesigned -compmempass @*/</span>
<a name="l00249"></a>00249 <span class="comment">/*@unchecked@*/</span>
<a name="l00250"></a><a class="code" href="group__rpmcli.html#g132a54ddf32fb598fe2e5b70a22a270d">00250</a> <span class="keyword">struct </span>poptOption <a class="code" href="group__rpmcli.html#g132a54ddf32fb598fe2e5b70a22a270d" title="Popt option table for options shared by all modes and executables.">rpmcliAllPoptTable</a>[] = {
<a name="l00251"></a>00251 <span class="comment">/*@-type@*/</span> <span class="comment">/* FIX: cast? */</span>
<a name="l00252"></a>00252  { NULL, <span class="charliteral">'\0'</span>, POPT_ARG_CALLBACK | POPT_CBFLAG_INC_DATA | POPT_CBFLAG_CONTINUE,
<a name="l00253"></a>00253         <a class="code" href="poptALL_8c.html#724a40e39d63417c264470c0b66cf36d">rpmcliAllArgCallback</a>, 0, NULL, NULL },
<a name="l00254"></a>00254 <span class="comment">/*@=type@*/</span>
<a name="l00255"></a>00255 
<a name="l00256"></a>00256  { <span class="stringliteral">"debug"</span>, <span class="charliteral">'d'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#3f39405c2d7c0f545d6b90051f250c85">_debug</a>, -1,
<a name="l00257"></a>00257         NULL, NULL },
<a name="l00258"></a>00258 
<a name="l00259"></a>00259  { <span class="stringliteral">"predefine"</span>, <span class="charliteral">'D'</span>, POPT_ARG_STRING|POPT_ARGFLAG_DOC_HIDDEN, 0, <a class="code" href="poptALL_8c.html#590f6d172c81b2a594c33d02463f46bc">POPT_PREDEFINE</a>,
<a name="l00260"></a>00260         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"predefine MACRO with value EXPR"</span>),
<a name="l00261"></a>00261         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"'MACRO EXPR'"</span>) },
<a name="l00262"></a>00262  { <span class="stringliteral">"define"</span>, <span class="charliteral">'D'</span>, POPT_ARG_STRING, 0, <span class="charliteral">'D'</span>,
<a name="l00263"></a>00263         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"define MACRO with value EXPR"</span>),
<a name="l00264"></a>00264         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"'MACRO EXPR'"</span>) },
<a name="l00265"></a>00265  { <span class="stringliteral">"eval"</span>, <span class="charliteral">'E'</span>, POPT_ARG_STRING, 0, <span class="charliteral">'E'</span>,
<a name="l00266"></a>00266         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"print macro expansion of EXPR"</span>),
<a name="l00267"></a>00267         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"'EXPR'"</span>) },
<a name="l00268"></a>00268  { <span class="stringliteral">"macros"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_STRING, &amp;<a class="code" href="group__rpmrc.html#g4ce2e6096bc4567e6aeee576fe8f9f2e" title="List of macro files to read when configuring rpm.">macrofiles</a>, 0,
<a name="l00269"></a>00269         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"read &lt;FILE:...&gt; instead of default file(s)"</span>),
<a name="l00270"></a>00270         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"&lt;FILE:...&gt;"</span>) },
<a name="l00271"></a>00271 
<a name="l00272"></a>00272  { <span class="stringliteral">"nodigest"</span>, <span class="charliteral">'\0'</span>, 0, 0, <a class="code" href="rpmcli_8h.html#7e075891bffd8eb2ab08a5611bf31c2a">RPMCLI_POPT_NODIGEST</a>,
<a name="l00273"></a>00273         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"don't verify package digest(s)"</span>), NULL },
<a name="l00274"></a>00274  { <span class="stringliteral">"nohdrchk"</span>, <span class="charliteral">'\0'</span>, POPT_ARGFLAG_DOC_HIDDEN, 0, <a class="code" href="rpmcli_8h.html#1a4cd99b8e77a638e4b4502728592ac0">RPMCLI_POPT_NOHDRCHK</a>,
<a name="l00275"></a>00275         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"don't verify database header(s) when retrieved"</span>), NULL },
<a name="l00276"></a>00276 <span class="preprocessor">#if HAVE_LIBIO_H &amp;&amp; defined(_G_IO_IO_FILE_VERSION)</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span> { <span class="stringliteral">"nolibio"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#8d00cce32160aa23a96acdf43831958c">noLibio</a>, 1,
<a name="l00278"></a>00278         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"disable use of libio(3) API"</span>), NULL},
<a name="l00279"></a>00279 <span class="preprocessor">#endif</span>
<a name="l00280"></a>00280 <span class="preprocessor"></span> { <span class="stringliteral">"nosignature"</span>, <span class="charliteral">'\0'</span>, 0, 0, <a class="code" href="rpmcli_8h.html#555454c3d67a1908fc5f17e1fc33d358">RPMCLI_POPT_NOSIGNATURE</a>,
<a name="l00281"></a>00281         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"don't verify package signature(s)"</span>), NULL },
<a name="l00282"></a>00282 
<a name="l00283"></a>00283  { <span class="stringliteral">"pipe"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_STRING|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#9c2d5914ee9fe08f64c2053b111cc6b3">rpmcliPipeOutput</a>, 0,
<a name="l00284"></a>00284         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"send stdout to CMD"</span>),
<a name="l00285"></a>00285         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"CMD"</span>) },
<a name="l00286"></a>00286 <span class="preprocessor">#if !defined(POPT_RCFILE)</span>
<a name="l00287"></a>00287 <span class="preprocessor"></span> { <span class="stringliteral">"rcfile"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_STRING, &amp;<a class="code" href="poptALL_8c.html#be15d4f1c2930c65877034aeac3cb5d6">rpmcliRcfile</a>, 0,
<a name="l00288"></a>00288         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"read &lt;FILE:...&gt; instead of default file(s)"</span>),
<a name="l00289"></a>00289         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"&lt;FILE:...&gt;"</span>) },
<a name="l00290"></a>00290 <span class="preprocessor">#else</span>
<a name="l00291"></a>00291 <span class="preprocessor"></span> { <span class="stringliteral">"rcfile"</span>, <span class="charliteral">'\0'</span>, 0, NULL, POPT_RCFILE,        
<a name="l00292"></a>00292         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"read &lt;FILE:...&gt; instead of default file(s)"</span>),
<a name="l00293"></a>00293         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"&lt;FILE:...&gt;"</span>) },
<a name="l00294"></a>00294 <span class="preprocessor">#endif</span>
<a name="l00295"></a>00295 <span class="preprocessor"></span> { <span class="stringliteral">"root"</span>, <span class="charliteral">'r'</span>, POPT_ARG_STRING|POPT_ARGFLAG_SHOW_DEFAULT, &amp;<a class="code" href="poptALL_8c.html#82a451d728a0042adf1a10f8d0d3877f">rpmcliRootDir</a>, 0,
<a name="l00296"></a>00296         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"use ROOT as top level directory"</span>),
<a name="l00297"></a>00297         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"ROOT"</span>) },
<a name="l00298"></a>00298 
<a name="l00299"></a>00299  { <span class="stringliteral">"querytags"</span>, <span class="charliteral">'\0'</span>, 0, 0, <a class="code" href="poptALL_8c.html#5c67e1a838fe17cc35451cc7afd29dbf">POPT_QUERYTAGS</a>,
<a name="l00300"></a>00300         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"display known query tags"</span>), NULL },
<a name="l00301"></a>00301  { <span class="stringliteral">"showrc"</span>, <span class="charliteral">'\0'</span>, 0, NULL, <a class="code" href="poptALL_8c.html#a855f455834fc26f7131d368fa4651e2">POPT_SHOWRC</a>,
<a name="l00302"></a>00302         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"display final rpmrc and macro configuration"</span>), NULL },
<a name="l00303"></a>00303  { <span class="stringliteral">"quiet"</span>, <span class="charliteral">'\0'</span>, 0, NULL, <span class="charliteral">'q'</span>,
<a name="l00304"></a>00304         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"provide less detailed output"</span>), NULL},
<a name="l00305"></a>00305  { <span class="stringliteral">"verbose"</span>, <span class="charliteral">'v'</span>, 0, NULL, <span class="charliteral">'v'</span>,
<a name="l00306"></a>00306         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"provide more detailed output"</span>), NULL},
<a name="l00307"></a>00307  { <span class="stringliteral">"version"</span>, <span class="charliteral">'\0'</span>, 0, NULL, <a class="code" href="poptALL_8c.html#b2cb36c7329e94bab2368ab7d25da22f">POPT_SHOWVERSION</a>,
<a name="l00308"></a>00308         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"print the version of rpm being used"</span>), NULL },
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="preprocessor">#if HAVE_LIBIO_H &amp;&amp; defined(_G_IO_IO_FILE_VERSION)</span>
<a name="l00311"></a>00311 <span class="preprocessor"></span> { <span class="stringliteral">"nolibio"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#8d00cce32160aa23a96acdf43831958c">noLibio</a>, 1,
<a name="l00312"></a>00312        <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"disable use of libio(3) API"</span>), NULL},
<a name="l00313"></a>00313 <span class="preprocessor">#endif</span>
<a name="l00314"></a>00314 <span class="preprocessor"></span>
<a name="l00315"></a>00315  { <span class="stringliteral">"promoteepoch"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#6f8c72781b2c31a01fa425a7703d1f9f">_rpmds_nopromote</a>, 0,
<a name="l00316"></a>00316         NULL, NULL},
<a name="l00317"></a>00317 
<a name="l00318"></a>00318  { <span class="stringliteral">"fpsdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#a574c3601ca74717a42fa7c121f986f9">_fps_debug</a>, -1,
<a name="l00319"></a>00319         NULL, NULL},
<a name="l00320"></a>00320  { <span class="stringliteral">"fsmdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptBT_8c.html#76ef6b61d6c034d5d7a84280e388f483">_fsm_debug</a>, -1,
<a name="l00321"></a>00321         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"debug payload file state machine"</span>), NULL},
<a name="l00322"></a>00322  { <span class="stringliteral">"fsmthreads"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="fsm_8c.html#bd2f72dd5fff0183f3a3392c943ed9c3">_fsm_threads</a>, -1,
<a name="l00323"></a>00323         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"use threads for file state machine"</span>), NULL},
<a name="l00324"></a>00324  { <span class="stringliteral">"ftpdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#adaf57ff8960c1dbab523ea7c63ef621">_ftp_debug</a>, -1,
<a name="l00325"></a>00325         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"debug FTP/HTTP data stream"</span>), NULL},
<a name="l00326"></a>00326  { <span class="stringliteral">"avdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#c07495b0f9a93d6a7487859d9a8c6157">_av_debug</a>, -1,
<a name="l00327"></a>00327         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"debug argv collections"</span>), NULL},
<a name="l00328"></a>00328  { <span class="stringliteral">"davdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#6e350417e29d996fcf79179a7a05a19e">_dav_debug</a>, -1,
<a name="l00329"></a>00329         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"debug WebDAV data stream"</span>), NULL},
<a name="l00330"></a>00330  { <span class="stringliteral">"hdrdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#4d03295368777f2991c72a63cd6815fc">_hdr_debug</a>, -1,
<a name="l00331"></a>00331         NULL, NULL},
<a name="l00332"></a>00332 <span class="preprocessor">#ifdef  DYING</span>
<a name="l00333"></a>00333 <span class="preprocessor"></span> { <span class="stringliteral">"poptdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;_popt_debug, -1,
<a name="l00334"></a>00334         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"debug option/argument processing"</span>), NULL},
<a name="l00335"></a>00335 <span class="preprocessor">#endif</span>
<a name="l00336"></a>00336 <span class="preprocessor"></span> { <span class="stringliteral">"prtpkts"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="package_8c.html#751ebc9b28c168fda034b5a6b5b25722">_print_pkts</a>, -1,
<a name="l00337"></a>00337         NULL, NULL},
<a name="l00338"></a>00338  { <span class="stringliteral">"psmdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#1c2ede845b148b5fca6c850a3e137d86">_psm_debug</a>, -1,
<a name="l00339"></a>00339         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"debug package state machine"</span>), NULL},
<a name="l00340"></a>00340  { <span class="stringliteral">"psmthreads"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#dd4e1a4c48272c659ff82733577ffff2">_psm_threads</a>, -1,
<a name="l00341"></a>00341         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"use threads for package state machine"</span>), NULL},
<a name="l00342"></a>00342  { <span class="stringliteral">"rpmaldebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#5ab259130f2cb399cc1ece749e82463c">_rpmal_debug</a>, -1,
<a name="l00343"></a>00343         NULL, NULL},
<a name="l00344"></a>00344  { <span class="stringliteral">"rpmdbdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#7d80c586e47e4431c591805c88300d2f">_rpmdb_debug</a>, -1,
<a name="l00345"></a>00345         NULL, NULL},
<a name="l00346"></a>00346  { <span class="stringliteral">"rpmdsdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#0e6448c5e69982853fbc8c70b187056b">_rpmds_debug</a>, -1,
<a name="l00347"></a>00347         NULL, NULL},
<a name="l00348"></a>00348  { <span class="stringliteral">"rpmfcdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="rpmfc_8h.html#608c14cadb7aa2256b7f0577df313971">_rpmfc_debug</a>, -1,
<a name="l00349"></a>00349         NULL, NULL},
<a name="l00350"></a>00350  { <span class="stringliteral">"rpmfidebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#62e70f59ecf10713dd8343e852189d62">_rpmfi_debug</a>, -1,
<a name="l00351"></a>00351         NULL, NULL},
<a name="l00352"></a>00352  { <span class="stringliteral">"rpmgidebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#afbac3e9bcbeae14aaf805d237e7a051">_rpmgi_debug</a>, -1,
<a name="l00353"></a>00353         NULL, NULL},
<a name="l00354"></a>00354  { <span class="stringliteral">"rpmiodebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#2d5b915e8c5d750401c5720dc28bf206">_rpmio_debug</a>, -1,
<a name="l00355"></a>00355         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"debug rpmio I/O"</span>), NULL},
<a name="l00356"></a>00356  { <span class="stringliteral">"rpmpsdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#e62f0de7a53629c6eb44581fa0cff70b">_rpmps_debug</a>, -1,
<a name="l00357"></a>00357         NULL, NULL},
<a name="l00358"></a>00358  { <span class="stringliteral">"rpmsqdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#dcfcab606a7cc09228fbc43fc48b6dd7">_rpmsq_debug</a>, -1,
<a name="l00359"></a>00359         NULL, NULL},
<a name="l00360"></a>00360  { <span class="stringliteral">"rpmsxdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#24ba841aad63f1e594c3f73625686fb8">_rpmsx_debug</a>, -1,
<a name="l00361"></a>00361         NULL, NULL},
<a name="l00362"></a>00362  { <span class="stringliteral">"rpmtedebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#8190dd4b21207bc2b78e847b915f4a63">_rpmte_debug</a>, -1,
<a name="l00363"></a>00363         NULL, NULL},
<a name="l00364"></a>00364  { <span class="stringliteral">"rpmtsdebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#d45b82b9cb8bc790c95bf35da509ef60">_rpmts_debug</a>, -1,
<a name="l00365"></a>00365         NULL, NULL},
<a name="l00366"></a>00366  { <span class="stringliteral">"stats"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="poptALL_8c.html#ea8f3ef7c7e9f6f8249a61223e319b9a">_rpmts_stats</a>, -1,
<a name="l00367"></a>00367         NULL, NULL},
<a name="l00368"></a>00368  { <span class="stringliteral">"urldebug"</span>, <span class="charliteral">'\0'</span>, POPT_ARG_VAL|POPT_ARGFLAG_DOC_HIDDEN, &amp;<a class="code" href="rpmurl_8h.html#85349e708f188a943568778918e38205">_url_debug</a>, -1,
<a name="l00369"></a>00369         <a class="code" href="system_8h.html#cac8dc9c2554000001040435a0b0010d">N_</a>(<span class="stringliteral">"debug URL cache handling"</span>), NULL},
<a name="l00370"></a>00370 
<a name="l00371"></a>00371    POPT_TABLEEND
<a name="l00372"></a>00372 };
<a name="l00373"></a>00373 <span class="comment">/*@=bitwisesigned =compmempass @*/</span>
<a name="l00374"></a>00374 
<a name="l00375"></a>00375 poptContext
<a name="l00376"></a><a class="code" href="rpmcli_8h.html#b9fe2b4702e2c34a5496e573ba6e6aeb">00376</a> <a class="code" href="poptALL_8c.html#b9fe2b4702e2c34a5496e573ba6e6aeb" title="Destroy most everything needed by an rpm CLI executable context.">rpmcliFini</a>(poptContext optCon)
<a name="l00377"></a>00377 {
<a name="l00378"></a>00378     optCon = poptFreeContext(optCon);
<a name="l00379"></a>00379 
<a name="l00380"></a>00380 <span class="preprocessor">#if HAVE_MCHECK_H &amp;&amp; HAVE_MTRACE</span>
<a name="l00381"></a>00381 <span class="preprocessor"></span>    <span class="comment">/*@-noeffect@*/</span>
<a name="l00382"></a>00382     muntrace();   <span class="comment">/* Trace malloc only if MALLOC_TRACE=mtrace-output-file. */</span>
<a name="l00383"></a>00383     <span class="comment">/*@=noeffect@*/</span>
<a name="l00384"></a>00384 <span class="preprocessor">#endif</span>
<a name="l00385"></a>00385 <span class="preprocessor"></span>
<a name="l00386"></a>00386     <span class="keywordflow">return</span> NULL;
<a name="l00387"></a>00387 }
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 <span class="comment">/*@-globstate@*/</span>
<a name="l00390"></a>00390 poptContext
<a name="l00391"></a><a class="code" href="rpmcli_8h.html#96e06ee81e3d25da5233b6551a693255">00391</a> <a class="code" href="poptALL_8c.html#96e06ee81e3d25da5233b6551a693255" title="Initialize most everything needed by an rpm CLI executable context.">rpmcliInit</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="compress_8c.html#a06161d5bbbc977dc1ad9e6669902c5e">argv</a>[], <span class="keyword">struct</span> poptOption * <a class="code" href="rpmqv_8c.html#1205e54530fc93ecb48c40e2fe35c29d">optionsTable</a>)
<a name="l00392"></a>00392 {
<a name="l00393"></a>00393     <span class="keyword">const</span> <span class="keywordtype">char</span> * optArg;
<a name="l00394"></a>00394     poptContext optCon;
<a name="l00395"></a>00395     <span class="keywordtype">int</span> rc;
<a name="l00396"></a>00396 
<a name="l00397"></a>00397 <span class="preprocessor">#if HAVE_MCHECK_H &amp;&amp; HAVE_MTRACE</span>
<a name="l00398"></a>00398 <span class="preprocessor"></span>    <span class="comment">/*@-noeffect@*/</span>
<a name="l00399"></a>00399     mtrace();   <span class="comment">/* Trace malloc only if MALLOC_TRACE=mtrace-output-file. */</span>
<a name="l00400"></a>00400     <span class="comment">/*@=noeffect@*/</span>
<a name="l00401"></a>00401 <span class="preprocessor">#endif</span>
<a name="l00402"></a>00402 <span class="preprocessor"></span><span class="comment">/*@-globs -mods@*/</span>
<a name="l00403"></a>00403     <a class="code" href="system_8h.html#78a6646c789a8a902ecad3f9f4b34ff1">setprogname</a>(argv[0]);       <span class="comment">/* Retrofit glibc __progname */</span>
<a name="l00404"></a>00404 
<a name="l00405"></a>00405     <span class="comment">/* XXX glibc churn sanity */</span>
<a name="l00406"></a>00406     <span class="keywordflow">if</span> (<a class="code" href="system_8h.html#50180bf6cf9a16254855e00c82286804">__progname</a> == NULL) {
<a name="l00407"></a>00407         <span class="keywordflow">if</span> ((<a class="code" href="system_8h.html#50180bf6cf9a16254855e00c82286804">__progname</a> = strrchr(argv[0], <span class="charliteral">'/'</span>)) != NULL) <a class="code" href="system_8h.html#50180bf6cf9a16254855e00c82286804">__progname</a>++;
<a name="l00408"></a>00408         <span class="keywordflow">else</span> <a class="code" href="system_8h.html#50180bf6cf9a16254855e00c82286804">__progname</a> = argv[0];
<a name="l00409"></a>00409     }
<a name="l00410"></a>00410 <span class="comment">/*@=globs =mods@*/</span>
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 <span class="preprocessor">#if defined(ENABLE_NLS) &amp;&amp; !defined(__LCLINT__)</span>
<a name="l00413"></a>00413 <span class="preprocessor"></span>    (void) <a class="code" href="system_8h.html#a47f05250104fa292814ebe43195eaad">setlocale</a>(LC_ALL, <span class="stringliteral">""</span> );
<a name="l00414"></a>00414     (void) <a class="code" href="system_8h.html#49158295fb1f28fd518de4ac881d5d3c">bindtextdomain</a>(<a class="code" href="config_8h.html#4ab8e2a5732119017d5f1ace10d9bf49">PACKAGE</a>, <a class="code" href="config_8h.html#303d8fa02c516d9a1386ea55d5627ad5">LOCALEDIR</a>);
<a name="l00415"></a>00415     (void) <a class="code" href="system_8h.html#a8b1c17a71ab11aa2620555b22c0ccd2">textdomain</a>(<a class="code" href="config_8h.html#4ab8e2a5732119017d5f1ace10d9bf49">PACKAGE</a>);
<a name="l00416"></a>00416 <span class="preprocessor">#endif</span>
<a name="l00417"></a>00417 <span class="preprocessor"></span>
<a name="l00418"></a>00418     <a class="code" href="rpmmessages_8h.html#8d8b22b9914bfdd0667df17eed998b57">rpmSetVerbosity</a>(<a class="code" href="rpmmessages_8h.html#60521ccf51c65929828788d73762004f">RPMMESS_NORMAL</a>);
<a name="l00419"></a>00419 
<a name="l00420"></a>00420     <span class="keywordflow">if</span> (optionsTable == NULL) {
<a name="l00421"></a>00421         <span class="comment">/* Read rpm configuration (if not already read). */</span>
<a name="l00422"></a>00422         <a class="code" href="poptALL_8c.html#fbff8c532c98dba81765dd5145b09554" title="Make sure that rpm configuration has been read.">rpmcliConfigured</a>();
<a name="l00423"></a>00423         <span class="keywordflow">return</span> NULL;
<a name="l00424"></a>00424     }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426 <span class="comment">/*@-nullpass -temptrans@*/</span>
<a name="l00427"></a>00427     optCon = poptGetContext(<a class="code" href="system_8h.html#50180bf6cf9a16254855e00c82286804">__progname</a>, argc, (<span class="keyword">const</span> <span class="keywordtype">char</span> **)argv, optionsTable, 0);
<a name="l00428"></a>00428 <span class="comment">/*@=nullpass =temptrans@*/</span>
<a name="l00429"></a>00429     (void) poptReadConfigFile(optCon, <a class="code" href="config_8h.html#5a4bef54a0ffe86154275f37c64b99f1">LIBRPMALIAS_FILENAME</a>);
<a name="l00430"></a>00430     (void) poptReadDefaultConfig(optCon, 1);
<a name="l00431"></a>00431     poptSetExecPath(optCon, <a class="code" href="config_8h.html#376fdbb987437b65df566c571f8de4d1">RPMCONFIGDIR</a>, 1);
<a name="l00432"></a>00432 
<a name="l00433"></a>00433     <span class="comment">/* Process all options, whine if unknown. */</span>
<a name="l00434"></a>00434     <span class="keywordflow">while</span> ((rc = poptGetNextOpt(optCon)) &gt; 0) {
<a name="l00435"></a>00435         optArg = poptGetOptArg(optCon);
<a name="l00436"></a>00436         <span class="keywordflow">switch</span> (rc) {
<a name="l00437"></a>00437         <span class="keywordflow">default</span>:
<a name="l00438"></a>00438 <span class="comment">/*@-nullpass@*/</span>
<a name="l00439"></a>00439             fprintf(stderr, <a class="code" href="system_8h.html#2ec2c1c3098396e2d147d58b66f18ceb">_</a>(<span class="stringliteral">"%s: option table misconfigured (%d)\n"</span>),
<a name="l00440"></a>00440                 <a class="code" href="system_8h.html#50180bf6cf9a16254855e00c82286804">__progname</a>, rc);
<a name="l00441"></a>00441 <span class="comment">/*@=nullpass@*/</span>
<a name="l00442"></a>00442             exit(<a class="code" href="system_8h.html#d851a8925c3675478e7dbb01d23a4dfa">EXIT_FAILURE</a>);
<a name="l00443"></a>00443 
<a name="l00444"></a>00444             <span class="comment">/*@notreached@*/</span> <span class="comment">/*@switchbreak@*/</span> <span class="keywordflow">break</span>;
<a name="l00445"></a>00445         }
<a name="l00446"></a>00446     }
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     <span class="keywordflow">if</span> (rc &lt; -1) {
<a name="l00449"></a>00449 <span class="comment">/*@-nullpass@*/</span>
<a name="l00450"></a>00450         fprintf(stderr, <span class="stringliteral">"%s: %s: %s\n"</span>, <a class="code" href="system_8h.html#50180bf6cf9a16254855e00c82286804">__progname</a>,
<a name="l00451"></a>00451                 poptBadOption(optCon, POPT_BADOPTION_NOALIAS),
<a name="l00452"></a>00452                 poptStrerror(rc));
<a name="l00453"></a>00453 <span class="comment">/*@=nullpass@*/</span>
<a name="l00454"></a>00454         exit(<a class="code" href="system_8h.html#d851a8925c3675478e7dbb01d23a4dfa">EXIT_FAILURE</a>);
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457     <span class="comment">/* Read rpm configuration (if not already read). */</span>
<a name="l00458"></a>00458     <a class="code" href="poptALL_8c.html#fbff8c532c98dba81765dd5145b09554" title="Make sure that rpm configuration has been read.">rpmcliConfigured</a>();
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     <span class="keywordflow">if</span> (<a class="code" href="poptALL_8c.html#3f39405c2d7c0f545d6b90051f250c85">_debug</a>) {
<a name="l00461"></a>00461         <a class="code" href="rpmmessages_8h.html#83676a1aa81e902f9f0ebf0faa4557b7">rpmIncreaseVerbosity</a>();
<a name="l00462"></a>00462         <a class="code" href="rpmmessages_8h.html#83676a1aa81e902f9f0ebf0faa4557b7">rpmIncreaseVerbosity</a>();
<a name="l00463"></a>00463     }
<a name="l00464"></a>00464 
<a name="l00465"></a>00465     <span class="keywordflow">return</span> optCon;
<a name="l00466"></a>00466 }
<a name="l00467"></a>00467 <span class="comment">/*@=globstate@*/</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:53 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
