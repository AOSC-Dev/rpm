<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: lib/psm.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>lib/psm.h File Reference</h1>Package state machine to handle a package from a transaction set. <a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="rpmsq_8h-source.html">rpmsq.h</a>&gt;</code><br>

<p>
<a href="psm_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrpmpsm__s.html">rpmpsm_s</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#30cca18df58bb74235d0b733be6354ab">PSM_VERBOSE</a>&nbsp;&nbsp;&nbsp;0x8000</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#bdf383c50480424500feccf0265e376e">PSM_INTERNAL</a>&nbsp;&nbsp;&nbsp;0x4000</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#285f8c188f91e147ff2d2d319a5b75c1">PSM_SYSCALL</a>&nbsp;&nbsp;&nbsp;0x2000</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#0db0c82e898f91e0eff716db3bbe9356">PSM_DEAD</a>&nbsp;&nbsp;&nbsp;0x1000</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#1e9d8e14212ba0c6a9e2c2745cc87afc">_fv</a>(_a)&nbsp;&nbsp;&nbsp;((_a) | PSM_VERBOSE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#e4616f3bd45034bcb42462b57caaf25a">_fi</a>(_a)&nbsp;&nbsp;&nbsp;((_a) | PSM_INTERNAL)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#70df01ff72faea4afc12652c9e10eb67">_fs</a>(_a)&nbsp;&nbsp;&nbsp;((_a) | (PSM_INTERNAL | PSM_SYSCALL))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#c1fb81e93eb1a3c7bef6a0744b2b6f71">_fd</a>(_a)&nbsp;&nbsp;&nbsp;((_a) | (PSM_INTERNAL | PSM_DEAD))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#3824b32b1d3636c1286d6494651384cc">rpmpsmUnlink</a>(_psm, _msg)&nbsp;&nbsp;&nbsp;XrpmpsmUnlink(_psm, _msg, __FILE__, __LINE__)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#8c6b8089918352050eefd43292984d12">rpmpsmLink</a>(_psm, _msg)&nbsp;&nbsp;&nbsp;XrpmpsmLink(_psm, _msg, __FILE__, __LINE__)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#962b9fdb59eb2f5d8f67ab0635046842">rpmpsmUNSAFE</a>&nbsp;&nbsp;&nbsp;rpmpsmSTAGE</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef enum <a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6">pkgStage_e</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6">pkgStage_e</a> { <br>
&nbsp;&nbsp;<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c611309fc454a51adf1f5510928edd88d9">PSM_UNKNOWN</a> =  0, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6b96f4592754cfa38b714fb324ba072fa">PSM_INIT</a> =  1, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c65bed5400ba4c25e41818b1117e0a3249">PSM_PRE</a> =  2, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6b137afc3d59eade9e30dac9646c24c64">PSM_PROCESS</a> =  3, 
<br>
&nbsp;&nbsp;<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c649cff6c7f1fa224f18f252bd8e7ad344">PSM_POST</a> =  4, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c68377b0108019ad19b0c49d387e681ba1">PSM_UNDO</a> =  5, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6ede13a4bd9a854259929a84f69ea1f53">PSM_FINI</a> =  6, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6ff25d8e1de35046f139253a28e33337c">PSM_PKGINSTALL</a> =  7, 
<br>
&nbsp;&nbsp;<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c60252f688190663fc6a5104aa3d63bd11">PSM_PKGERASE</a> =  8, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c68700f5d64d4b0977f64a4620512fc07d">PSM_PKGCOMMIT</a> =  10, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c612fc9c43b9fd57116037cd61692d4adc">PSM_PKGSAVE</a> =  12, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c66d0f647bf066623daf5955e6f6fc0c60">PSM_CREATE</a> =  17, 
<br>
&nbsp;&nbsp;<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c64d25c780368a52a0e0615c8b0453f403">PSM_NOTIFY</a> =  22, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6ff0d78985c48a8d7c77ba9a0963c4421">PSM_DESTROY</a> =  23, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c626a2f9b59f654e7bb13cd54653f9cd5e">PSM_COMMIT</a> =  25, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c628f5898104deaf5fbf84ac9b9479aea9">PSM_CHROOT_IN</a> =  51, 
<br>
&nbsp;&nbsp;<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c64af7c17221c173ed222d839efaf50eb7">PSM_CHROOT_OUT</a> =  52, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6c5ccb555ea14269c2e123260fefcbb5d">PSM_SCRIPT</a> =  53, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c65264f1e3cb3e34cb55e6480a05735684">PSM_TRIGGERS</a> =  54, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6c012a1906d05ade4d1c8abcf28fa2b39">PSM_IMMED_TRIGGERS</a> =  55, 
<br>
&nbsp;&nbsp;<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6c6b5af32590e5f986b8a84438c9c9c8b">PSM_RPMIO_FLAGS</a> =  56, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6d826d80215dc4bc2b713562b4e953dab">PSM_RPMDB_LOAD</a> =  97, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c61f982140042da78e78b0ac4855952c60">PSM_RPMDB_ADD</a> =  98, 
<a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6c2aaecfa1d4d357b4e01618ca45b9985">PSM_RPMDB_REMOVE</a> =  99
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#e3c912be6ac641d71f4d360072a69a45">rpmpsmUnlink</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, const char *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unreference a package state machine instance.  <a href="#e3c912be6ac641d71f4d360072a69a45"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#df0354ded44da099ad96aedacabf6963">XrpmpsmUnlink</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, const char *msg, const char *fn, unsigned ln)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#9639ed15198b8c55570ca3c2ccde5712">rpmpsmLink</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, const char *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reference a package state machine instance.  <a href="#9639ed15198b8c55570ca3c2ccde5712"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#2ed8568588043eb4438a90eeca7f31a6">XrpmpsmLink</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, const char *msg, const char *fn, unsigned ln)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#a1e982938a6245f0c96d479dfc114037">rpmpsmFree</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy a package state machine.  <a href="#a1e982938a6245f0c96d479dfc114037"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#81b9bae945250db05ce68d990bc80511">rpmpsmNew</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a> te, <a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a> fi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and load a package state machine.  <a href="#81b9bae945250db05ce68d990bc80511"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#b88cdc4aec4947089e9fd7ea5b0f96d5">rpmpsmStage</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, <a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a> stage)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Package state machine driver.  <a href="#b88cdc4aec4947089e9fd7ea5b0f96d5"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8h.html#1c2ede845b148b5fca6c850a3e137d86">_psm_debug</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Package state machine to handle a package from a transaction set. 
<p>

<p>
Definition in file <a class="el" href="psm_8h-source.html">psm.h</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="c1fb81e93eb1a3c7bef6a0744b2b6f71"></a><!-- doxytag: member="psm.h::_fd" ref="c1fb81e93eb1a3c7bef6a0744b2b6f71" args="(_a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _fd          </td>
          <td>(</td>
          <td class="paramtype">_a&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((_a) | (PSM_INTERNAL | PSM_DEAD))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00025">25</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<a class="anchor" name="e4616f3bd45034bcb42462b57caaf25a"></a><!-- doxytag: member="psm.h::_fi" ref="e4616f3bd45034bcb42462b57caaf25a" args="(_a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _fi          </td>
          <td>(</td>
          <td class="paramtype">_a&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((_a) | PSM_INTERNAL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00023">23</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<a class="anchor" name="70df01ff72faea4afc12652c9e10eb67"></a><!-- doxytag: member="psm.h::_fs" ref="70df01ff72faea4afc12652c9e10eb67" args="(_a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _fs          </td>
          <td>(</td>
          <td class="paramtype">_a&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((_a) | (PSM_INTERNAL | PSM_SYSCALL))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00024">24</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<a class="anchor" name="1e9d8e14212ba0c6a9e2c2745cc87afc"></a><!-- doxytag: member="psm.h::_fv" ref="1e9d8e14212ba0c6a9e2c2745cc87afc" args="(_a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _fv          </td>
          <td>(</td>
          <td class="paramtype">_a&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((_a) | PSM_VERBOSE)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00022">22</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<a class="anchor" name="0db0c82e898f91e0eff716db3bbe9356"></a><!-- doxytag: member="psm.h::PSM_DEAD" ref="0db0c82e898f91e0eff716db3bbe9356" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSM_DEAD&nbsp;&nbsp;&nbsp;0x1000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00021">21</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<a class="anchor" name="bdf383c50480424500feccf0265e376e"></a><!-- doxytag: member="psm.h::PSM_INTERNAL" ref="bdf383c50480424500feccf0265e376e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSM_INTERNAL&nbsp;&nbsp;&nbsp;0x4000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00019">19</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<a class="anchor" name="285f8c188f91e147ff2d2d319a5b75c1"></a><!-- doxytag: member="psm.h::PSM_SYSCALL" ref="285f8c188f91e147ff2d2d319a5b75c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSM_SYSCALL&nbsp;&nbsp;&nbsp;0x2000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00020">20</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<a class="anchor" name="30cca18df58bb74235d0b733be6354ab"></a><!-- doxytag: member="psm.h::PSM_VERBOSE" ref="30cca18df58bb74235d0b733be6354ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSM_VERBOSE&nbsp;&nbsp;&nbsp;0x8000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00018">18</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<a class="anchor" name="8c6b8089918352050eefd43292984d12"></a><!-- doxytag: member="psm.h::rpmpsmLink" ref="8c6b8089918352050eefd43292984d12" args="(_psm, _msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rpmpsmLink          </td>
          <td>(</td>
          <td class="paramtype">_psm,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_msg&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;XrpmpsmLink(_psm, _msg, __FILE__, __LINE__)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00152">152</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01312">rpmpsmNew()</a>.
</div>
</div><p>
<a class="anchor" name="3824b32b1d3636c1286d6494651384cc"></a><!-- doxytag: member="psm.h::rpmpsmUnlink" ref="3824b32b1d3636c1286d6494651384cc" args="(_psm, _msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rpmpsmUnlink          </td>
          <td>(</td>
          <td class="paramtype">_psm,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_msg&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;XrpmpsmUnlink(_psm, _msg, __FILE__, __LINE__)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00133">133</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01279">rpmpsmFree()</a>.
</div>
</div><p>
<a class="anchor" name="962b9fdb59eb2f5d8f67ab0635046842"></a><!-- doxytag: member="psm.h::rpmpsmUNSAFE" ref="962b9fdb59eb2f5d8f67ab0635046842" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rpmpsmUNSAFE&nbsp;&nbsp;&nbsp;rpmpsmSTAGE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00184">184</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="dd4d6aee2024b5c3e3094b8b4e75c73e"></a><!-- doxytag: member="psm.h::pkgStage" ref="dd4d6aee2024b5c3e3094b8b4e75c73e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6">pkgStage_e</a>  <a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="0109351d3159a533681094ee278a15c6"></a><!-- doxytag: member="psm.h::pkgStage_e" ref="0109351d3159a533681094ee278a15c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="psm_8h.html#0109351d3159a533681094ee278a15c6">pkgStage_e</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c611309fc454a51adf1f5510928edd88d9"></a><!-- doxytag: member="PSM_UNKNOWN" ref="0109351d3159a533681094ee278a15c611309fc454a51adf1f5510928edd88d9" args="" -->PSM_UNKNOWN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6b96f4592754cfa38b714fb324ba072fa"></a><!-- doxytag: member="PSM_INIT" ref="0109351d3159a533681094ee278a15c6b96f4592754cfa38b714fb324ba072fa" args="" -->PSM_INIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c65bed5400ba4c25e41818b1117e0a3249"></a><!-- doxytag: member="PSM_PRE" ref="0109351d3159a533681094ee278a15c65bed5400ba4c25e41818b1117e0a3249" args="" -->PSM_PRE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6b137afc3d59eade9e30dac9646c24c64"></a><!-- doxytag: member="PSM_PROCESS" ref="0109351d3159a533681094ee278a15c6b137afc3d59eade9e30dac9646c24c64" args="" -->PSM_PROCESS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c649cff6c7f1fa224f18f252bd8e7ad344"></a><!-- doxytag: member="PSM_POST" ref="0109351d3159a533681094ee278a15c649cff6c7f1fa224f18f252bd8e7ad344" args="" -->PSM_POST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c68377b0108019ad19b0c49d387e681ba1"></a><!-- doxytag: member="PSM_UNDO" ref="0109351d3159a533681094ee278a15c68377b0108019ad19b0c49d387e681ba1" args="" -->PSM_UNDO</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6ede13a4bd9a854259929a84f69ea1f53"></a><!-- doxytag: member="PSM_FINI" ref="0109351d3159a533681094ee278a15c6ede13a4bd9a854259929a84f69ea1f53" args="" -->PSM_FINI</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6ff25d8e1de35046f139253a28e33337c"></a><!-- doxytag: member="PSM_PKGINSTALL" ref="0109351d3159a533681094ee278a15c6ff25d8e1de35046f139253a28e33337c" args="" -->PSM_PKGINSTALL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c60252f688190663fc6a5104aa3d63bd11"></a><!-- doxytag: member="PSM_PKGERASE" ref="0109351d3159a533681094ee278a15c60252f688190663fc6a5104aa3d63bd11" args="" -->PSM_PKGERASE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c68700f5d64d4b0977f64a4620512fc07d"></a><!-- doxytag: member="PSM_PKGCOMMIT" ref="0109351d3159a533681094ee278a15c68700f5d64d4b0977f64a4620512fc07d" args="" -->PSM_PKGCOMMIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c612fc9c43b9fd57116037cd61692d4adc"></a><!-- doxytag: member="PSM_PKGSAVE" ref="0109351d3159a533681094ee278a15c612fc9c43b9fd57116037cd61692d4adc" args="" -->PSM_PKGSAVE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c66d0f647bf066623daf5955e6f6fc0c60"></a><!-- doxytag: member="PSM_CREATE" ref="0109351d3159a533681094ee278a15c66d0f647bf066623daf5955e6f6fc0c60" args="" -->PSM_CREATE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c64d25c780368a52a0e0615c8b0453f403"></a><!-- doxytag: member="PSM_NOTIFY" ref="0109351d3159a533681094ee278a15c64d25c780368a52a0e0615c8b0453f403" args="" -->PSM_NOTIFY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6ff0d78985c48a8d7c77ba9a0963c4421"></a><!-- doxytag: member="PSM_DESTROY" ref="0109351d3159a533681094ee278a15c6ff0d78985c48a8d7c77ba9a0963c4421" args="" -->PSM_DESTROY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c626a2f9b59f654e7bb13cd54653f9cd5e"></a><!-- doxytag: member="PSM_COMMIT" ref="0109351d3159a533681094ee278a15c626a2f9b59f654e7bb13cd54653f9cd5e" args="" -->PSM_COMMIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c628f5898104deaf5fbf84ac9b9479aea9"></a><!-- doxytag: member="PSM_CHROOT_IN" ref="0109351d3159a533681094ee278a15c628f5898104deaf5fbf84ac9b9479aea9" args="" -->PSM_CHROOT_IN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c64af7c17221c173ed222d839efaf50eb7"></a><!-- doxytag: member="PSM_CHROOT_OUT" ref="0109351d3159a533681094ee278a15c64af7c17221c173ed222d839efaf50eb7" args="" -->PSM_CHROOT_OUT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6c5ccb555ea14269c2e123260fefcbb5d"></a><!-- doxytag: member="PSM_SCRIPT" ref="0109351d3159a533681094ee278a15c6c5ccb555ea14269c2e123260fefcbb5d" args="" -->PSM_SCRIPT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c65264f1e3cb3e34cb55e6480a05735684"></a><!-- doxytag: member="PSM_TRIGGERS" ref="0109351d3159a533681094ee278a15c65264f1e3cb3e34cb55e6480a05735684" args="" -->PSM_TRIGGERS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6c012a1906d05ade4d1c8abcf28fa2b39"></a><!-- doxytag: member="PSM_IMMED_TRIGGERS" ref="0109351d3159a533681094ee278a15c6c012a1906d05ade4d1c8abcf28fa2b39" args="" -->PSM_IMMED_TRIGGERS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6c6b5af32590e5f986b8a84438c9c9c8b"></a><!-- doxytag: member="PSM_RPMIO_FLAGS" ref="0109351d3159a533681094ee278a15c6c6b5af32590e5f986b8a84438c9c9c8b" args="" -->PSM_RPMIO_FLAGS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6d826d80215dc4bc2b713562b4e953dab"></a><!-- doxytag: member="PSM_RPMDB_LOAD" ref="0109351d3159a533681094ee278a15c6d826d80215dc4bc2b713562b4e953dab" args="" -->PSM_RPMDB_LOAD</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c61f982140042da78e78b0ac4855952c60"></a><!-- doxytag: member="PSM_RPMDB_ADD" ref="0109351d3159a533681094ee278a15c61f982140042da78e78b0ac4855952c60" args="" -->PSM_RPMDB_ADD</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0109351d3159a533681094ee278a15c6c2aaecfa1d4d357b4e01618ca45b9985"></a><!-- doxytag: member="PSM_RPMDB_REMOVE" ref="0109351d3159a533681094ee278a15c6c2aaecfa1d4d357b4e01618ca45b9985" args="" -->PSM_RPMDB_REMOVE</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="psm_8h-source.html#l00026">26</a> of file <a class="el" href="psm_8h-source.html">psm.h</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a1e982938a6245f0c96d479dfc114037"></a><!-- doxytag: member="psm.h::rpmpsmFree" ref="a1e982938a6245f0c96d479dfc114037" args="(rpmpsm psm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> rpmpsmFree           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy a package state machine. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL always </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01279">1279</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="psm_8h-source.html#l00108">rpmpsm_s::nrefs</a>, <a class="el" href="rpmfi_8c-source.html#l01151">rpmfiFree()</a>, <a class="el" href="psm_8h-source.html#l00133">rpmpsmUnlink</a>, <a class="el" href="rpmte_8c-source.html#l00199">rpmteFree()</a>, <a class="el" href="rpmts_8c-source.html#l00850">rpmtsFree()</a>, <a class="el" href="psm_8h-source.html#l00070">rpmpsm_s::te</a>, and <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, and <a class="el" href="verify_8c-source.html#l00221">rpmVerifyScript()</a>.
</div>
</div><p>
<a class="anchor" name="9639ed15198b8c55570ca3c2ccde5712"></a><!-- doxytag: member="psm.h::rpmpsmLink" ref="9639ed15198b8c55570ca3c2ccde5712" args="(rpmpsm psm, const char *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> rpmpsmLink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reference a package state machine instance. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>new package state machine reference </dd></dl>

</div>
</div><p>
<a class="anchor" name="81b9bae945250db05ce68d990bc80511"></a><!-- doxytag: member="psm.h::rpmpsmNew" ref="81b9bae945250db05ce68d990bc80511" args="(rpmts ts, rpmte te, rpmfi fi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> rpmpsmNew           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a>&nbsp;</td>
          <td class="paramname"> <em>te</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a>&nbsp;</td>
          <td class="paramname"> <em>fi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create and load a package state machine. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>te</em>&nbsp;</td><td>transaction set element </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fi</em>&nbsp;</td><td>file info set </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>new package state machine </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01312">1312</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="rpmfi_8h-source.html#l00224">rpmfiLink</a>, <a class="el" href="psm_8h-source.html#l00152">rpmpsmLink</a>, <a class="el" href="rpmts_8h-source.html#l00433">rpmtsLink</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00034">xcalloc()</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, and <a class="el" href="verify_8c-source.html#l00221">rpmVerifyScript()</a>.
</div>
</div><p>
<a class="anchor" name="b88cdc4aec4947089e9fd7ea5b0f96d5"></a><!-- doxytag: member="psm.h::rpmpsmStage" ref="b88cdc4aec4947089e9fd7ea5b0f96d5" args="(rpmpsm psm, pkgStage stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> rpmpsmStage           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a>&nbsp;</td>
          <td class="paramname"> <em>stage</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Package state machine driver. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000024">Todo:</a></b></dt><dd>Packages w/o files never get a callback, hence don't get displayed on install with -v. </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01355">1355</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="psm_8h-source.html#l00099">rpmpsm_s::amount</a>, <a class="el" href="psm_8h-source.html#l00074">rpmpsm_s::cfd</a>, <a class="el" href="psm_8h-source.html#l00096">rpmpsm_s::chrootDone</a>, <a class="el" href="psm_8h-source.html#l00095">rpmpsm_s::countCorrection</a>, <a class="el" href="cpio_8h-source.html#l00062">CPIO_MAP_GID</a>, <a class="el" href="cpio_8h-source.html#l00060">CPIO_MAP_MODE</a>, <a class="el" href="cpio_8h-source.html#l00059">CPIO_MAP_PATH</a>, <a class="el" href="cpio_8h-source.html#l00061">CPIO_MAP_UID</a>, <a class="el" href="cpio_8h-source.html#l00068">CPIO_SBIT_CHECK</a>, <a class="el" href="cpio_8c-source.html#l00196">cpioStrerror()</a>, <a class="el" href="rpmdb_8c-source.html#l00265">dbiOpen()</a>, <a class="el" href="system_8h.html#a5e6580e8f12679392f66d3c9b146ab4">errno</a>, <a class="el" href="rpmlib_8h-source.html#l00837">FA_COPYOUT</a>, <a class="el" href="psm_8h-source.html#l00085">rpmpsm_s::failedFile</a>, <a class="el" href="rpmio_8c-source.html#l02903">Fclose()</a>, <a class="el" href="psm_8h-source.html#l00076">rpmpsm_s::fd</a>, <a class="el" href="rpmio_8c-source.html#l00237">fdDup()</a>, <a class="el" href="rpmio_8c-source.html#l03077">Fdopen()</a>, <a class="el" href="rpmio__internal_8h-source.html#l00122">FDSTAT_DIGEST</a>, <a class="el" href="rpmio__internal_8h-source.html#l00389">fdstat_op()</a>, <a class="el" href="rpmio__internal_8h-source.html#l00118">FDSTAT_READ</a>, <a class="el" href="rpmio__internal_8h-source.html#l00119">FDSTAT_WRITE</a>, <a class="el" href="rpmio_8c-source.html#l03277">Ferror()</a>, <a class="el" href="rpmio_8c-source.html#l03257">Fflush()</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="rpmio_8c-source.html#l03316">Fileno()</a>, <a class="el" href="rpmio_8c-source.html#l03184">Fopen()</a>, <a class="el" href="fsm_8h-source.html#l00039">FSM_PKGBUILD</a>, <a class="el" href="fsm_8h-source.html#l00040">FSM_PKGCOMMIT</a>, <a class="el" href="fsm_8h-source.html#l00038">FSM_PKGERASE</a>, <a class="el" href="fsm_8h-source.html#l00037">FSM_PKGINSTALL</a>, <a class="el" href="fsm_8c-source.html#l00551">fsmSetup()</a>, <a class="el" href="fsm_8c-source.html#l00607">fsmTeardown()</a>, <a class="el" href="rpmio_8c-source.html#l02813">Fstrerror()</a>, <a class="el" href="psm_8h-source.html#l00102">rpmpsm_s::goal</a>, <a class="el" href="header_8h-source.html#l00209">HEADER_MAGIC_YES</a>, <a class="el" href="hdrinline_8h-source.html#l00315">headerAddEntry()</a>, <a class="el" href="package_8c-source.html#l00325">headerCheck()</a>, <a class="el" href="hdrinline_8h-source.html#l00187">headerCopyLoad()</a>, <a class="el" href="hdrinline_8h-source.html#l00047">headerFree()</a>, <a class="el" href="header_8h-source.html#l00704">headerFreeData()</a>, <a class="el" href="hdrinline_8h-source.html#l00466">headerFreeIterator()</a>, <a class="el" href="hdrinline_8h-source.html#l00268">headerGetEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00478">headerInitIterator()</a>, <a class="el" href="hdrinline_8h-source.html#l00230">headerIsEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00062">headerLink()</a>, <a class="el" href="hdrinline_8h-source.html#l00035">headerNew()</a>, <a class="el" href="hdrinline_8h-source.html#l00494">headerNextIterator()</a>, <a class="el" href="package_8c-source.html#l00178">headerRegenSigHeader()</a>, <a class="el" href="hdrinline_8h-source.html#l00149">headerReload()</a>, <a class="el" href="hdrinline_8h-source.html#l00435">headerSprintf()</a>, <a class="el" href="hdrinline_8h-source.html#l00214">headerWrite()</a>, <a class="el" href="psm_8c-source.html#l00163">markReplacedFiles()</a>, <a class="el" href="psm_8h-source.html#l00079">rpmpsm_s::mi</a>, <a class="el" href="rpmdb_8c-source.html#l00069">myinstall_instance</a>, <a class="el" href="psm_8h-source.html#l00092">rpmpsm_s::npkgs_installed</a>, <a class="el" href="psm_8h-source.html#l00077">rpmpsm_s::oh</a>, <a class="el" href="psm_8h-source.html#l00089">rpmpsm_s::pkgfn</a>, <a class="el" href="psm_8c-source.html#l01215">pkgStageString()</a>, <a class="el" href="psm_8h-source.html#l00087">rpmpsm_s::pkgURL</a>, <a class="el" href="psm_8h-source.html#l00091">rpmpsm_s::progTag</a>, <a class="el" href="psm_8h-source.html#l00045">PSM_CHROOT_IN</a>, <a class="el" href="psm_8h-source.html#l00046">PSM_CHROOT_OUT</a>, <a class="el" href="psm_8h-source.html#l00043">PSM_COMMIT</a>, <a class="el" href="psm_8h-source.html#l00040">PSM_CREATE</a>, <a class="el" href="psm_8h-source.html#l00042">PSM_DESTROY</a>, <a class="el" href="psm_8h-source.html#l00033">PSM_FINI</a>, <a class="el" href="psm_8h-source.html#l00049">PSM_IMMED_TRIGGERS</a>, <a class="el" href="psm_8h-source.html#l00028">PSM_INIT</a>, <a class="el" href="psm_8h-source.html#l00041">PSM_NOTIFY</a>, <a class="el" href="psm_8h-source.html#l00037">PSM_PKGCOMMIT</a>, <a class="el" href="psm_8h-source.html#l00036">PSM_PKGERASE</a>, <a class="el" href="psm_8h-source.html#l00035">PSM_PKGINSTALL</a>, <a class="el" href="psm_8h-source.html#l00038">PSM_PKGSAVE</a>, <a class="el" href="psm_8h-source.html#l00031">PSM_POST</a>, <a class="el" href="psm_8h-source.html#l00029">PSM_PRE</a>, <a class="el" href="psm_8h-source.html#l00030">PSM_PROCESS</a>, <a class="el" href="psm_8h-source.html#l00053">PSM_RPMDB_ADD</a>, <a class="el" href="psm_8h-source.html#l00052">PSM_RPMDB_LOAD</a>, <a class="el" href="psm_8h-source.html#l00054">PSM_RPMDB_REMOVE</a>, <a class="el" href="psm_8h-source.html#l00050">PSM_RPMIO_FLAGS</a>, <a class="el" href="psm_8h-source.html#l00047">PSM_SCRIPT</a>, <a class="el" href="psm_8h-source.html#l00048">PSM_TRIGGERS</a>, <a class="el" href="psm_8h-source.html#l00032">PSM_UNDO</a>, <a class="el" href="psm_8h-source.html#l00027">PSM_UNKNOWN</a>, <a class="el" href="psm_8h-source.html#l00101">rpmpsm_s::rc</a>, <a class="el" href="header_8h-source.html#l00218">RPM_CHAR_TYPE</a>, <a class="el" href="header_8h-source.html#l00221">RPM_INT32_TYPE</a>, <a class="el" href="rpmmessages_8h-source.html#l00057">RPMCALLBACK_CPIO_ERROR</a>, <a class="el" href="rpmmessages_8h-source.html#l00043">RPMCALLBACK_INST_PROGRESS</a>, <a class="el" href="rpmmessages_8h-source.html#l00044">RPMCALLBACK_INST_START</a>, <a class="el" href="rpmmessages_8h-source.html#l00051">RPMCALLBACK_UNINST_START</a>, <a class="el" href="rpmmessages_8h-source.html#l00052">RPMCALLBACK_UNINST_STOP</a>, <a class="el" href="rpmmessages_8h-source.html#l00056">RPMCALLBACK_UNPACK_ERROR</a>, <a class="el" href="rpmdb_8c-source.html#l02939">rpmdbAdd()</a>, <a class="el" href="rpmdb_8c-source.html#l01354">rpmdbCountPackages()</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l01731">rpmdbGetIteratorOffset()</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l02632">rpmdbRemove()</a>, <a class="el" href="rpmdb_8c-source.html#l01898">rpmdbSetIteratorRE()</a>, <a class="el" href="rpmerr_8h-source.html#l00093">RPMERR_CPIO</a>, <a class="el" href="rpmerr_8h-source.html#l00066">RPMERR_NOSPACE</a>, <a class="el" href="rpmerr_8h-source.html#l00085">RPMERR_SCRIPT</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="legacy_8c-source.html#l00362">rpmfiBuildFNames()</a>, <a class="el" href="rpmfi_8c-source.html#l00058">rpmfiFC()</a>, <a class="el" href="rpmlib_8h-source.html#l00462">RPMFILE_STATE_NORMAL</a>, <a class="el" href="signature_8c-source.html#l00381">rpmFreeSignature()</a>, <a class="el" href="macro_8c-source.html#l02285">rpmGenPath()</a>, <a class="el" href="rpmrc_8c-source.html#l01569">rpmGetArchInfo()</a>, <a class="el" href="rpmrc_8c-source.html#l01574">rpmGetOsInfo()</a>, <a class="el" href="macro_8c-source.html#l02254">rpmGetPath()</a>, <a class="el" href="formats_8c-source.html#l01154">rpmHeaderFormats</a>, <a class="el" href="psm_8h-source.html#l00083">rpmpsm_s::rpmio_flags</a>, <a class="el" href="rpmlib_8h-source.html#l01095">RPMLEAD_BINARY</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00012">RPMMESS_VERBOSE</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmdb_8h-source.html#l00037">RPMMIRE_STRCMP</a>, <a class="el" href="psm_8c-source.html#l01340">rpmpsmNext()</a>, <a class="el" href="rpmlib_8h-source.html#l00023">RPMRC_FAIL</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmlib_8h-source.html#l00518">RPMSENSE_TRIGGERIN</a>, <a class="el" href="rpmlib_8h-source.html#l00520">RPMSENSE_TRIGGERPOSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00519">RPMSENSE_TRIGGERUN</a>, <a class="el" href="signature_8h-source.html#l00015">RPMSIGTYPE_HEADERSIG</a>, <a class="el" href="rpmsw_8c-source.html#l00273">rpmswAdd()</a>, <a class="el" href="rpmsw_8c-source.html#l00241">rpmswEnter()</a>, <a class="el" href="rpmsw_8c-source.html#l00257">rpmswExit()</a>, <a class="el" href="rpmlib_8h-source.html#l00294">RPMTAG_ARCH</a>, <a class="el" href="rpmlib_8h-source.html#l00322">RPMTAG_ARCHIVESIZE</a>, <a class="el" href="rpmlib_8h-source.html#l00400">RPMTAG_BASENAMES</a>, <a class="el" href="rpmlib_8h-source.html#l00338">RPMTAG_DEFAULTPREFIX</a>, <a class="el" href="rpmlib_8h-source.html#l00270">RPMTAG_EPOCH</a>, <a class="el" href="rpmlib_8h-source.html#l00314">RPMTAG_FILEGROUPNAME</a>, <a class="el" href="rpmlib_8h-source.html#l00301">RPMTAG_FILESTATES</a>, <a class="el" href="rpmlib_8h-source.html#l00313">RPMTAG_FILEUSERNAME</a>, <a class="el" href="rpmlib_8h-source.html#l00234">RPMTAG_HEADERIMAGE</a>, <a class="el" href="rpmlib_8h-source.html#l00236">RPMTAG_HEADERIMMUTABLE</a>, <a class="el" href="rpmlib_8h-source.html#l00235">RPMTAG_HEADERSIGNATURES</a>, <a class="el" href="rpmlib_8h-source.html#l00410">RPMTAG_INSTALLCOLOR</a>, <a class="el" href="rpmlib_8h-source.html#l00277">RPMTAG_INSTALLTIME</a>, <a class="el" href="rpmlib_8h-source.html#l00264">RPMTAG_NAME</a>, <a class="el" href="rpmlib_8h-source.html#l00403">RPMTAG_ORIGBASENAMES</a>, <a class="el" href="rpmlib_8h-source.html#l00293">RPMTAG_OS</a>, <a class="el" href="rpmlib_8h-source.html#l00408">RPMTAG_PAYLOADCOMPRESSOR</a>, <a class="el" href="rpmlib_8h-source.html#l00296">RPMTAG_POSTIN</a>, <a class="el" href="rpmlib_8h-source.html#l00361">RPMTAG_POSTINPROG</a>, <a class="el" href="rpmlib_8h-source.html#l00298">RPMTAG_POSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00363">RPMTAG_POSTUNPROG</a>, <a class="el" href="rpmlib_8h-source.html#l00295">RPMTAG_PREIN</a>, <a class="el" href="rpmlib_8h-source.html#l00360">RPMTAG_PREINPROG</a>, <a class="el" href="rpmlib_8h-source.html#l00297">RPMTAG_PREUN</a>, <a class="el" href="rpmlib_8h-source.html#l00362">RPMTAG_PREUNPROG</a>, <a class="el" href="rpmlib_8h-source.html#l00268">RPMTAG_RELEASE</a>, <a class="el" href="rpmlib_8h-source.html#l00412">RPMTAG_REMOVETID</a>, <a class="el" href="rpmlib_8h-source.html#l00348">RPMTAG_TRIGGERNAME</a>, <a class="el" href="rpmlib_8h-source.html#l00266">RPMTAG_VERSION</a>, <a class="el" href="tagtbl_8c-source.html#l00166">rpmTagTable</a>, <a class="el" href="rpmte_8c-source.html#l00292">rpmteA()</a>, <a class="el" href="rpmte_8c-source.html#l00277">rpmteE()</a>, <a class="el" href="rpmte_8c-source.html#l00490">rpmteFd()</a>, <a class="el" href="rpmte_8c-source.html#l00272">rpmteN()</a>, <a class="el" href="rpmte_8c-source.html#l00480">rpmteNEVR()</a>, <a class="el" href="rpmte_8c-source.html#l00297">rpmteO()</a>, <a class="el" href="rpmte_8c-source.html#l00287">rpmteR()</a>, <a class="el" href="rpmte_8c-source.html#l00246">rpmteSetDBInstance()</a>, <a class="el" href="rpmte_8c-source.html#l00282">rpmteV()</a>, <a class="el" href="rpmlib_8h-source.html#l01004">RPMTRANS_FLAG_APPLYONLY</a>, <a class="el" href="rpmlib_8h-source.html#l00972">RPMTRANS_FLAG_JUSTDB</a>, <a class="el" href="rpmlib_8h-source.html#l00995">RPMTRANS_FLAG_NOPOST</a>, <a class="el" href="rpmlib_8h-source.html#l00999">RPMTRANS_FLAG_NOPOSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00994">RPMTRANS_FLAG_NOPRE</a>, <a class="el" href="rpmlib_8h-source.html#l00998">RPMTRANS_FLAG_NOPREUN</a>, <a class="el" href="rpmlib_8h-source.html#l00996">RPMTRANS_FLAG_NOTRIGGERIN</a>, <a class="el" href="rpmlib_8h-source.html#l01000">RPMTRANS_FLAG_NOTRIGGERPOSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00993">RPMTRANS_FLAG_NOTRIGGERPREIN</a>, <a class="el" href="rpmlib_8h-source.html#l00997">RPMTRANS_FLAG_NOTRIGGERUN</a>, <a class="el" href="rpmlib_8h-source.html#l00983">RPMTRANS_FLAG_PKGCOMMIT</a>, <a class="el" href="rpmlib_8h-source.html#l00969">RPMTRANS_FLAG_TEST</a>, <a class="el" href="rpmts_8h-source.html#l00048">RPMTRANS_TYPE_AUTOROLLBACK</a>, <a class="el" href="rpmts_8h-source.html#l00047">RPMTRANS_TYPE_ROLLBACK</a>, <a class="el" href="rpmts_8h-source.html#l00087">RPMTS_OP_COMPRESS</a>, <a class="el" href="rpmts_8h-source.html#l00091">RPMTS_OP_DBADD</a>, <a class="el" href="rpmts_8h-source.html#l00092">RPMTS_OP_DBREMOVE</a>, <a class="el" href="rpmts_8h-source.html#l00089">RPMTS_OP_DIGEST</a>, <a class="el" href="rpmts_8h-source.html#l00088">RPMTS_OP_UNCOMPRESS</a>, <a class="el" href="rpmts_8c-source.html#l01070">rpmtsChrootDone()</a>, <a class="el" href="rpmts_8c-source.html#l01463">rpmtsColor()</a>, <a class="el" href="rpmts_8c-source.html#l01021">rpmtsCurrDir()</a>, <a class="el" href="rpmts_8c-source.html#l01416">rpmtsFlags()</a>, <a class="el" href="rpmts_8c-source.html#l01200">rpmtsGetRdb()</a>, <a class="el" href="rpmts_8c-source.html#l01749">rpmtsGetScore()</a>, <a class="el" href="rpmts_8c-source.html#l01104">rpmtsGetTid()</a>, <a class="el" href="rpmts_8c-source.html#l00949">rpmtsGetType()</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, <a class="el" href="rpmts_8c-source.html#l01374">rpmtsNotify()</a>, <a class="el" href="rpmts_8c-source.html#l01483">rpmtsOp()</a>, <a class="el" href="rpmts_8c-source.html#l00968">rpmtsRootDir()</a>, <a class="el" href="rpmts_8c-source.html#l01763">rpmtsScoreGetEntry()</a>, <a class="el" href="rpmts_8c-source.html#l01075">rpmtsSetChrootDone()</a>, <a class="el" href="rpmts_8c-source.html#l00909">rpmtsVSFlags()</a>, <a class="el" href="rpmts_8h-source.html#l00027">RPMVSF_NOHDRCHK</a>, <a class="el" href="signature_8c-source.html#l00353">rpmWriteSignature()</a>, <a class="el" href="psm_8c-source.html#l01161">runImmedTriggers()</a>, <a class="el" href="psm_8c-source.html#l00964">runInstScript()</a>, <a class="el" href="psm_8c-source.html#l01119">runTriggers()</a>, <a class="el" href="psm_8h-source.html#l00093">rpmpsm_s::scriptArg</a>, <a class="el" href="psm_8h-source.html#l00090">rpmpsm_s::scriptTag</a>, <a class="el" href="psm_8h-source.html#l00094">rpmpsm_s::sense</a>, <a class="el" href="psm_8h-source.html#l00081">rpmpsm_s::stepName</a>, <a class="el" href="system_8h.html#58841684f76853b313e27e663c850381">stpcpy()</a>, <a class="el" href="psm_8c-source.html#l00453">tag2sln()</a>, <a class="el" href="psm_8h-source.html#l00070">rpmpsm_s::te</a>, <a class="el" href="psm_8h-source.html#l00100">rpmpsm_s::total</a>, <a class="el" href="rpmte_8h-source.html#l00030">TR_ADDED</a>, <a class="el" href="rpmte_8h-source.html#l00031">TR_REMOVED</a>, <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>, <a class="el" href="url_8c-source.html#l00383">urlPath()</a>, <a class="el" href="psm_8h-source.html#l00098">rpmpsm_s::what</a>, <a class="el" href="rpmlead_8c-source.html#l00026">writeLead()</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00024">xmalloc()</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01340">rpmpsmNext()</a>, <a class="el" href="psm_8c-source.html#l01330">rpmpsmThread()</a>, <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, and <a class="el" href="verify_8c-source.html#l00221">rpmVerifyScript()</a>.
</div>
</div><p>
<a class="anchor" name="e3c912be6ac641d71f4d360072a69a45"></a><!-- doxytag: member="psm.h::rpmpsmUnlink" ref="e3c912be6ac641d71f4d360072a69a45" args="(rpmpsm psm, const char *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> rpmpsmUnlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unreference a package state machine instance. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL always </dd></dl>

</div>
</div><p>
<a class="anchor" name="2ed8568588043eb4438a90eeca7f31a6"></a><!-- doxytag: member="psm.h::XrpmpsmLink" ref="2ed8568588043eb4438a90eeca7f31a6" args="(rpmpsm psm, const char *msg, const char *fn, unsigned ln)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> XrpmpsmLink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>ln</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000026">Todo:</a></b></dt><dd>Remove debugging entry from the ABI. </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01266">1266</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="psm_8c-source.html#l00038">_psm_debug</a>, and <a class="el" href="psm_8h-source.html#l00108">rpmpsm_s::nrefs</a>.
</div>
</div><p>
<a class="anchor" name="df0354ded44da099ad96aedacabf6963"></a><!-- doxytag: member="psm.h::XrpmpsmUnlink" ref="df0354ded44da099ad96aedacabf6963" args="(rpmpsm psm, const char *msg, const char *fn, unsigned ln)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> XrpmpsmUnlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>ln</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000025">Todo:</a></b></dt><dd>Remove debugging entry from the ABI. </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01255">1255</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="psm_8c-source.html#l00038">_psm_debug</a>, and <a class="el" href="psm_8h-source.html#l00108">rpmpsm_s::nrefs</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="1c2ede845b148b5fca6c850a3e137d86"></a><!-- doxytag: member="psm.h::_psm_debug" ref="1c2ede845b148b5fca6c850a3e137d86" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="psm_8h.html#1c2ede845b148b5fca6c850a3e137d86">_psm_debug</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00038">38</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:55 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
