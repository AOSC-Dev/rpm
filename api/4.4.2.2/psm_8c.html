<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: lib/psm.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>lib/psm.c File Reference</h1>Package state machine to handle a package from a transaction set. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;<a class="el" href="rpmio__internal_8h-source.html">rpmio_internal.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="rpmlib_8h-source.html">rpmlib.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="rpmmacro_8h-source.html">rpmmacro.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="rpmurl_8h-source.html">rpmurl.h</a>&gt;</code><br>
<code>#include &lt;rpmlua.h&gt;</code><br>
<code>#include &quot;<a class="el" href="cpio_8h-source.html">cpio.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="fsm_8h-source.html">fsm.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="psm_8h-source.html">psm.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmds_8h-source.html">rpmds.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmfi_8h-source.html">rpmfi.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmte_8h-source.html">rpmte.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmts_8h-source.html">rpmts.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmlead_8h-source.html">rpmlead.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="signature_8h-source.html">signature.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="legacy_8h-source.html">legacy.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="misc_8h-source.html">misc.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmdb_8h-source.html">rpmdb.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="debug_8h-source.html">debug.h</a>&quot;</code><br>

<p>
<a href="psm_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtagMacro.html">tagMacro</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macros to be defined from per-header tag values.  <a href="structtagMacro.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#23b390a0b6abdc14c30d53d89a40fd7f">_RPMFI_INTERNAL</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#9e126d6a280b4a40319ab4f35b4350ef">_RPMTE_INTERNAL</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#ee996b667551ff312d747c94ed24448f">_RPMTS_INTERNAL</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#53dae92f831dc1aaf440af5372cb6e54">_PSM_DEBUG</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#a664f29c1b00ae84476ff516a22dd915">rpmVersionCompare</a> (<a class="el" href="structheaderToken__s.html">Header</a> first, <a class="el" href="structheaderToken__s.html">Header</a> second)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compare headers to determine which header is "newer".  <a href="#a664f29c1b00ae84476ff516a22dd915"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#1adbb653f2fa091200359e1530d875d1">rpmInstallLoadMacros</a> (<a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a> fi, <a class="el" href="structheaderToken__s.html">Header</a> h)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Define per-header macros.  <a href="#1adbb653f2fa091200359e1530d875d1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#46a6114894ec3e828b1a4570ebbdf5ed">markReplacedFiles</a> (const <a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mark files in database shared with this package as "replaced".  <a href="#46a6114894ec3e828b1a4570ebbdf5ed"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#6b7195feec339b4ff02fef11a83defe4">rpmInstallSourcePackage</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="struct__FD__s.html">FD_t</a> fd, const char **specFilePtr, const char **cookie)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Install source package.  <a href="#6b7195feec339b4ff02fef11a83defe4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const char *const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#9b3defbb93dca3955bed947efb6d2ca0">tag2sln</a> (int tag)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return scriptlet <a class="el" href="structname.html">name</a> from tag.  <a href="#9b3defbb93dca3955bed947efb6d2ca0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static pid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#575620491704df5c1be4e405bc818daf">psmWait</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for child process to be reaped.  <a href="#575620491704df5c1be4e405bc818daf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#87d09d72b60fc1dd20b87fbf57286e83">runScript</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, <a class="el" href="structheaderToken__s.html">Header</a> h, const char *sln, int progArgc, const char **progArgv, const char *script, int arg1, int arg2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Run scriptlet with args.  <a href="#87d09d72b60fc1dd20b87fbf57286e83"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#a12c61a859f8cbdebf5295ac745b4d30">runInstScript</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve and run scriptlet from header.  <a href="#a12c61a859f8cbdebf5295ac745b4d30"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#728ecf219cc4cb120d6522682977ff24">handleOneTrigger</a> (const <a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, <a class="el" href="structheaderToken__s.html">Header</a> sourceH, <a class="el" href="structheaderToken__s.html">Header</a> triggeredH, int arg2, unsigned char *triggersAlreadyRun)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute triggers.  <a href="#728ecf219cc4cb120d6522682977ff24"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#f5f0e42567d6341049f232c452cfac45">runTriggers</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Run trigger scripts in the database that are fired by this header.  <a href="#f5f0e42567d6341049f232c452cfac45"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#5b1b1d3e4db5fa0650e04ec8fa06e283">runImmedTriggers</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Run triggers from this header that are fired by headers in the database.  <a href="#5b1b1d3e4db5fa0650e04ec8fa06e283"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const char *const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#8f3431dfeb8531868d88cc62909f8d22">pkgStageString</a> (<a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a> a)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#df0354ded44da099ad96aedacabf6963">XrpmpsmUnlink</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, const char *msg, const char *fn, unsigned ln)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#2ed8568588043eb4438a90eeca7f31a6">XrpmpsmLink</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, const char *msg, const char *fn, unsigned ln)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#a1e982938a6245f0c96d479dfc114037">rpmpsmFree</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy a package state machine.  <a href="#a1e982938a6245f0c96d479dfc114037"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#81b9bae945250db05ce68d990bc80511">rpmpsmNew</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a> te, <a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a> fi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and load a package state machine.  <a href="#81b9bae945250db05ce68d990bc80511"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#0a391a3404c23c5ff7c5715863a75dd8">rpmpsmThread</a> (void *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#fda2d6d46ac988dcceb1ef260e9fb1f5">rpmpsmNext</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, <a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a> nstage)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#b88cdc4aec4947089e9fd7ea5b0f96d5">rpmpsmStage</a> (<a class="el" href="structrpmpsm__s.html">rpmpsm</a> psm, <a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a> stage)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Package state machine driver.  <a href="#b88cdc4aec4947089e9fd7ea5b0f96d5"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#1c2ede845b148b5fca6c850a3e137d86">_psm_debug</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#dd4e1a4c48272c659ff82733577ffff2">_psm_threads</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#a3de37e4b685872bb0f104dc9b8ee26b">myinstall_instance</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structtagMacro.html">tagMacro</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#2ec2d94bea23dae1a8fb5da3fe12d6e2">tagMacros</a> []</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macros to be defined from per-header tag values.  <a href="#2ec2d94bea23dae1a8fb5da3fe12d6e2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#aa82d3965ee5c730476c169a6d987f16">SCRIPT_PATH</a> = &quot;PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#ca42d7321f7e38582445f60140cf8ac9">ldconfig_done</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="psm_8c.html#3ad0a6da2dae4f7c31e347cf16bf2f6b">ldconfig_path</a> = &quot;/sbin/ldconfig&quot;</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Package state machine to handle a package from a transaction set. 
<p>

<p>
Definition in file <a class="el" href="psm_8c-source.html">psm.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="53dae92f831dc1aaf440af5372cb6e54"></a><!-- doxytag: member="psm.c::_PSM_DEBUG" ref="53dae92f831dc1aaf440af5372cb6e54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _PSM_DEBUG&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00036">36</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
</div>
</div><p>
<a class="anchor" name="23b390a0b6abdc14c30d53d89a40fd7f"></a><!-- doxytag: member="psm.c::_RPMFI_INTERNAL" ref="23b390a0b6abdc14c30d53d89a40fd7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _RPMFI_INTERNAL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00020">20</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
</div>
</div><p>
<a class="anchor" name="9e126d6a280b4a40319ab4f35b4350ef"></a><!-- doxytag: member="psm.c::_RPMTE_INTERNAL" ref="9e126d6a280b4a40319ab4f35b4350ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _RPMTE_INTERNAL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00023">23</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
</div>
</div><p>
<a class="anchor" name="ee996b667551ff312d747c94ed24448f"></a><!-- doxytag: member="psm.c::_RPMTS_INTERNAL" ref="ee996b667551ff312d747c94ed24448f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _RPMTS_INTERNAL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00026">26</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="728ecf219cc4cb120d6522682977ff24"></a><!-- doxytag: member="psm.c::handleOneTrigger" ref="728ecf219cc4cb120d6522682977ff24" args="(const rpmpsm psm, Header sourceH, Header triggeredH, int arg2, unsigned char *triggersAlreadyRun)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> handleOneTrigger           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheaderToken__s.html">Header</a>&nbsp;</td>
          <td class="paramname"> <em>sourceH</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheaderToken__s.html">Header</a>&nbsp;</td>
          <td class="paramname"> <em>triggeredH</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>arg2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>triggersAlreadyRun</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute triggers. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000023">Todo:</a></b></dt><dd>Trigger on any provides, not just package NVR. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sourceH</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>triggeredH</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg2</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>triggersAlreadyRun</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd></dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01017">1017</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="psm_8h-source.html#l00095">rpmpsm_s::countCorrection</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="header_8h-source.html#l00704">headerFreeData()</a>, <a class="el" href="hdrNVR_8c-source.html#l00009">headerNVR()</a>, <a class="el" href="rpmdb_8c-source.html#l01354">rpmdbCountPackages()</a>, <a class="el" href="rpmds_8c-source.html#l01138">rpmdsAnyMatchesDep()</a>, <a class="el" href="rpmds_8c-source.html#l00613">rpmdsFlags()</a>, <a class="el" href="rpmds_8c-source.html#l00054">rpmdsFree()</a>, <a class="el" href="rpmds_8c-source.html#l00771">rpmdsInit()</a>, <a class="el" href="rpmds_8c-source.html#l00587">rpmdsN()</a>, <a class="el" href="rpmds_8c-source.html#l00282">rpmdsNew()</a>, <a class="el" href="rpmds_8c-source.html#l00742">rpmdsNext()</a>, <a class="el" href="rpmds_8c-source.html#l00662">rpmdsSetNoPromote()</a>, <a class="el" href="rpmlib_8h-source.html#l00023">RPMRC_FAIL</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmlib_8h-source.html#l00351">RPMTAG_TRIGGERINDEX</a>, <a class="el" href="rpmlib_8h-source.html#l00348">RPMTAG_TRIGGERNAME</a>, <a class="el" href="rpmlib_8h-source.html#l00369">RPMTAG_TRIGGERSCRIPTPROG</a>, <a class="el" href="rpmlib_8h-source.html#l00347">RPMTAG_TRIGGERSCRIPTS</a>, <a class="el" href="rpmts_8c-source.html#l01200">rpmtsGetRdb()</a>, <a class="el" href="psm_8c-source.html#l00607">runScript()</a>, <a class="el" href="psm_8h-source.html#l00094">rpmpsm_s::sense</a>, and <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01161">runImmedTriggers()</a>, and <a class="el" href="psm_8c-source.html#l01119">runTriggers()</a>.
</div>
</div><p>
<a class="anchor" name="46a6114894ec3e828b1a4570ebbdf5ed"></a><!-- doxytag: member="psm.c::markReplacedFiles" ref="46a6114894ec3e828b1a4570ebbdf5ed" args="(const rpmpsm psm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> markReplacedFiles           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mark files in database shared with this package as "replaced". 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine data </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 always </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00163">163</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="rpmdb_8c-source.html#l02479">rpmdbAppendIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l01731">rpmdbGetIteratorOffset()</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l02141">rpmdbSetIteratorModified()</a>, <a class="el" href="rpmdb_8c-source.html#l02128">rpmdbSetIteratorRewrite()</a>, <a class="el" href="rpmfi_8c-source.html#l00058">rpmfiFC()</a>, <a class="el" href="rpmlib_8h-source.html#l00463">RPMFILE_STATE_REPLACED</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmlib_8h-source.html#l00301">RPMTAG_FILESTATES</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, and <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
</div>
</div><p>
<a class="anchor" name="8f3431dfeb8531868d88cc62909f8d22"></a><!-- doxytag: member="psm.c::pkgStageString" ref="8f3431dfeb8531868d88cc62909f8d22" args="(pkgStage a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const char* const pkgStageString           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a>&nbsp;</td>
          <td class="paramname"> <em>a</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01215">1215</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="psm_8h-source.html#l00045">PSM_CHROOT_IN</a>, <a class="el" href="psm_8h-source.html#l00046">PSM_CHROOT_OUT</a>, <a class="el" href="psm_8h-source.html#l00043">PSM_COMMIT</a>, <a class="el" href="psm_8h-source.html#l00040">PSM_CREATE</a>, <a class="el" href="psm_8h-source.html#l00042">PSM_DESTROY</a>, <a class="el" href="psm_8h-source.html#l00033">PSM_FINI</a>, <a class="el" href="psm_8h-source.html#l00049">PSM_IMMED_TRIGGERS</a>, <a class="el" href="psm_8h-source.html#l00028">PSM_INIT</a>, <a class="el" href="psm_8h-source.html#l00041">PSM_NOTIFY</a>, <a class="el" href="psm_8h-source.html#l00037">PSM_PKGCOMMIT</a>, <a class="el" href="psm_8h-source.html#l00036">PSM_PKGERASE</a>, <a class="el" href="psm_8h-source.html#l00035">PSM_PKGINSTALL</a>, <a class="el" href="psm_8h-source.html#l00038">PSM_PKGSAVE</a>, <a class="el" href="psm_8h-source.html#l00031">PSM_POST</a>, <a class="el" href="psm_8h-source.html#l00029">PSM_PRE</a>, <a class="el" href="psm_8h-source.html#l00030">PSM_PROCESS</a>, <a class="el" href="psm_8h-source.html#l00053">PSM_RPMDB_ADD</a>, <a class="el" href="psm_8h-source.html#l00052">PSM_RPMDB_LOAD</a>, <a class="el" href="psm_8h-source.html#l00054">PSM_RPMDB_REMOVE</a>, <a class="el" href="psm_8h-source.html#l00050">PSM_RPMIO_FLAGS</a>, <a class="el" href="psm_8h-source.html#l00047">PSM_SCRIPT</a>, <a class="el" href="psm_8h-source.html#l00048">PSM_TRIGGERS</a>, <a class="el" href="psm_8h-source.html#l00032">PSM_UNDO</a>, and <a class="el" href="psm_8h-source.html#l00027">PSM_UNKNOWN</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
</div>
</div><p>
<a class="anchor" name="575620491704df5c1be4e405bc818daf"></a><!-- doxytag: member="psm.c::psmWait" ref="575620491704df5c1be4e405bc818daf" args="(rpmpsm psm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static pid_t psmWait           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait for child process to be reaped. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine data </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd></dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00476">476</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmsq_8h-source.html#l00039">rpmsqElem::child</a>, <a class="el" href="rpmsq_8h-source.html#l00042">rpmsqElem::op</a>, <a class="el" href="rpmsq_8h-source.html#l00040">rpmsqElem::reaped</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmsq_8c-source.html#l00551">rpmsqWait()</a>, <a class="el" href="rpmsw_8c-source.html#l00273">rpmswAdd()</a>, <a class="el" href="rpmts_8h-source.html#l00086">RPMTS_OP_SCRIPTLETS</a>, <a class="el" href="rpmts_8c-source.html#l01483">rpmtsOp()</a>, <a class="el" href="psm_8h-source.html#l00065">rpmpsm_s::sq</a>, <a class="el" href="rpmsq_8h-source.html#l00041">rpmsqElem::status</a>, <a class="el" href="psm_8h-source.html#l00081">rpmpsm_s::stepName</a>, <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>, and <a class="el" href="rpmsw_8h-source.html#l00037">rpmop_s::usecs</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l00607">runScript()</a>.
</div>
</div><p>
<a class="anchor" name="1adbb653f2fa091200359e1530d875d1"></a><!-- doxytag: member="psm.c::rpmInstallLoadMacros" ref="1adbb653f2fa091200359e1530d875d1" args="(rpmfi fi, Header h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int rpmInstallLoadMacros           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a>&nbsp;</td>
          <td class="paramname"> <em>fi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheaderToken__s.html">Header</a>&nbsp;</td>
          <td class="paramname"> <em>h</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Define per-header macros. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fi</em>&nbsp;</td><td>transaction element file info </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>header </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 always </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00115">115</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="compress_8c-source.html#l00064">argv</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l00238">rpmInstallSourcePackage()</a>.
</div>
</div><p>
<a class="anchor" name="6b7195feec339b4ff02fef11a83defe4"></a><!-- doxytag: member="psm.c::rpmInstallSourcePackage" ref="6b7195feec339b4ff02fef11a83defe4" args="(rpmts ts, FD_t fd, const char **specFilePtr, const char **cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> rpmInstallSourcePackage           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__FD__s.html">FD_t</a>&nbsp;</td>
          <td class="paramname"> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>specFilePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Install source package. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>file handle </td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>specFilePtr</em>&nbsp;</td><td>address of spec file <a class="el" href="structname.html">name</a> (or NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cookie</em>&nbsp;</td><td>address of cookie pointer (or NULL) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>rpmRC return code </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00238">238</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="cpio_8h-source.html#l00062">CPIO_MAP_GID</a>, <a class="el" href="cpio_8h-source.html#l00060">CPIO_MAP_MODE</a>, <a class="el" href="cpio_8h-source.html#l00059">CPIO_MAP_PATH</a>, <a class="el" href="cpio_8h-source.html#l00061">CPIO_MAP_UID</a>, <a class="el" href="rpmlib_8h-source.html#l00835">FA_CREATE</a>, <a class="el" href="psm_8h-source.html#l00076">rpmpsm_s::fd</a>, <a class="el" href="rpmio_8h-source.html#l00524">fdLink</a>, <a class="el" href="hdrinline_8h-source.html#l00047">headerFree()</a>, <a class="el" href="hdrinline_8h-source.html#l00230">headerIsEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00062">headerLink()</a>, <a class="el" href="rpmerr_8h-source.html#l00059">RPMERR_NOTSRPM</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="legacy_8c-source.html#l00362">rpmfiBuildFNames()</a>, <a class="el" href="rpmlib_8h-source.html#l00482">RPMFILE_SPECFILE</a>, <a class="el" href="rpmfi_8h-source.html#l00224">rpmfiLink</a>, <a class="el" href="rpmfi_8c-source.html#l01263">rpmfiNew()</a>, <a class="el" href="psm_8c-source.html#l00115">rpmInstallLoadMacros()</a>, <a class="el" href="rpmlib_8h-source.html#l00023">RPMRC_FAIL</a>, <a class="el" href="rpmlib_8h-source.html#l00025">RPMRC_NOKEY</a>, <a class="el" href="rpmlib_8h-source.html#l00024">RPMRC_NOTTRUSTED</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="package_8c-source.html#l00748">rpmReadPackageFile()</a>, <a class="el" href="rpmlib_8h-source.html#l00400">RPMTAG_BASENAMES</a>, <a class="el" href="rpmlib_8h-source.html#l00371">RPMTAG_COOKIE</a>, <a class="el" href="rpmlib_8h-source.html#l00385">RPMTAG_SOURCEPACKAGE</a>, <a class="el" href="depends_8c-source.html#l00127">rpmtsAddInstallElement()</a>, <a class="el" href="rpmts_8c-source.html#l01399">rpmtsElement()</a>, <a class="el" href="rpmts_8h-source.html#l00433">rpmtsLink</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00055">xstrdup()</a>.
<p>
Referenced by <a class="el" href="rpminstall_8c-source.html#l00286">rpmInstall()</a>, and <a class="el" href="rpminstall_8c-source.html#l00865">rpmInstallSource()</a>.
</div>
</div><p>
<a class="anchor" name="a1e982938a6245f0c96d479dfc114037"></a><!-- doxytag: member="psm.c::rpmpsmFree" ref="a1e982938a6245f0c96d479dfc114037" args="(rpmpsm psm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> rpmpsmFree           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy a package state machine. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL always </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01279">1279</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="psm_8h-source.html#l00108">rpmpsm_s::nrefs</a>, <a class="el" href="rpmfi_8c-source.html#l01151">rpmfiFree()</a>, <a class="el" href="psm_8h-source.html#l00133">rpmpsmUnlink</a>, <a class="el" href="rpmte_8c-source.html#l00199">rpmteFree()</a>, <a class="el" href="rpmts_8c-source.html#l00850">rpmtsFree()</a>, <a class="el" href="psm_8h-source.html#l00070">rpmpsm_s::te</a>, and <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, and <a class="el" href="verify_8c-source.html#l00221">rpmVerifyScript()</a>.
</div>
</div><p>
<a class="anchor" name="81b9bae945250db05ce68d990bc80511"></a><!-- doxytag: member="psm.c::rpmpsmNew" ref="81b9bae945250db05ce68d990bc80511" args="(rpmts ts, rpmte te, rpmfi fi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> rpmpsmNew           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a>&nbsp;</td>
          <td class="paramname"> <em>te</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a>&nbsp;</td>
          <td class="paramname"> <em>fi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create and load a package state machine. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>te</em>&nbsp;</td><td>transaction set element </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fi</em>&nbsp;</td><td>file info set </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>new package state machine </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01312">1312</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="rpmfi_8h-source.html#l00224">rpmfiLink</a>, <a class="el" href="psm_8h-source.html#l00152">rpmpsmLink</a>, <a class="el" href="rpmts_8h-source.html#l00433">rpmtsLink</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00034">xcalloc()</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, and <a class="el" href="verify_8c-source.html#l00221">rpmVerifyScript()</a>.
</div>
</div><p>
<a class="anchor" name="fda2d6d46ac988dcceb1ef260e9fb1f5"></a><!-- doxytag: member="psm.c::rpmpsmNext" ref="fda2d6d46ac988dcceb1ef260e9fb1f5" args="(rpmpsm psm, pkgStage nstage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int rpmpsmNext           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a>&nbsp;</td>
          <td class="paramname"> <em>nstage</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01340">1340</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="psm_8c-source.html#l00040">_psm_threads</a>, <a class="el" href="psm_8h-source.html#l00105">rpmpsm_s::nstage</a>, <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>, <a class="el" href="psm_8c-source.html#l01330">rpmpsmThread()</a>, <a class="el" href="rpmsq_8c-source.html#l00592">rpmsqJoin()</a>, and <a class="el" href="rpmsq_8c-source.html#l00583">rpmsqThread()</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
</div>
</div><p>
<a class="anchor" name="b88cdc4aec4947089e9fd7ea5b0f96d5"></a><!-- doxytag: member="psm.c::rpmpsmStage" ref="b88cdc4aec4947089e9fd7ea5b0f96d5" args="(rpmpsm psm, pkgStage stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> rpmpsmStage           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="psm_8h.html#dd4d6aee2024b5c3e3094b8b4e75c73e">pkgStage</a>&nbsp;</td>
          <td class="paramname"> <em>stage</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Package state machine driver. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000024">Todo:</a></b></dt><dd>Packages w/o files never get a callback, hence don't get displayed on install with -v. </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01355">1355</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="psm_8h-source.html#l00099">rpmpsm_s::amount</a>, <a class="el" href="psm_8h-source.html#l00074">rpmpsm_s::cfd</a>, <a class="el" href="psm_8h-source.html#l00096">rpmpsm_s::chrootDone</a>, <a class="el" href="psm_8h-source.html#l00095">rpmpsm_s::countCorrection</a>, <a class="el" href="cpio_8h-source.html#l00062">CPIO_MAP_GID</a>, <a class="el" href="cpio_8h-source.html#l00060">CPIO_MAP_MODE</a>, <a class="el" href="cpio_8h-source.html#l00059">CPIO_MAP_PATH</a>, <a class="el" href="cpio_8h-source.html#l00061">CPIO_MAP_UID</a>, <a class="el" href="cpio_8h-source.html#l00068">CPIO_SBIT_CHECK</a>, <a class="el" href="cpio_8c-source.html#l00196">cpioStrerror()</a>, <a class="el" href="rpmdb_8c-source.html#l00265">dbiOpen()</a>, <a class="el" href="system_8h.html#a5e6580e8f12679392f66d3c9b146ab4">errno</a>, <a class="el" href="rpmlib_8h-source.html#l00837">FA_COPYOUT</a>, <a class="el" href="psm_8h-source.html#l00085">rpmpsm_s::failedFile</a>, <a class="el" href="rpmio_8c-source.html#l02903">Fclose()</a>, <a class="el" href="psm_8h-source.html#l00076">rpmpsm_s::fd</a>, <a class="el" href="rpmio_8c-source.html#l00237">fdDup()</a>, <a class="el" href="rpmio_8c-source.html#l03077">Fdopen()</a>, <a class="el" href="rpmio__internal_8h-source.html#l00122">FDSTAT_DIGEST</a>, <a class="el" href="rpmio__internal_8h-source.html#l00389">fdstat_op()</a>, <a class="el" href="rpmio__internal_8h-source.html#l00118">FDSTAT_READ</a>, <a class="el" href="rpmio__internal_8h-source.html#l00119">FDSTAT_WRITE</a>, <a class="el" href="rpmio_8c-source.html#l03277">Ferror()</a>, <a class="el" href="rpmio_8c-source.html#l03257">Fflush()</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="rpmio_8c-source.html#l03316">Fileno()</a>, <a class="el" href="rpmio_8c-source.html#l03184">Fopen()</a>, <a class="el" href="fsm_8h-source.html#l00039">FSM_PKGBUILD</a>, <a class="el" href="fsm_8h-source.html#l00040">FSM_PKGCOMMIT</a>, <a class="el" href="fsm_8h-source.html#l00038">FSM_PKGERASE</a>, <a class="el" href="fsm_8h-source.html#l00037">FSM_PKGINSTALL</a>, <a class="el" href="fsm_8c-source.html#l00551">fsmSetup()</a>, <a class="el" href="fsm_8c-source.html#l00607">fsmTeardown()</a>, <a class="el" href="rpmio_8c-source.html#l02813">Fstrerror()</a>, <a class="el" href="psm_8h-source.html#l00102">rpmpsm_s::goal</a>, <a class="el" href="header_8h-source.html#l00209">HEADER_MAGIC_YES</a>, <a class="el" href="hdrinline_8h-source.html#l00315">headerAddEntry()</a>, <a class="el" href="package_8c-source.html#l00325">headerCheck()</a>, <a class="el" href="hdrinline_8h-source.html#l00187">headerCopyLoad()</a>, <a class="el" href="hdrinline_8h-source.html#l00047">headerFree()</a>, <a class="el" href="header_8h-source.html#l00704">headerFreeData()</a>, <a class="el" href="hdrinline_8h-source.html#l00466">headerFreeIterator()</a>, <a class="el" href="hdrinline_8h-source.html#l00268">headerGetEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00478">headerInitIterator()</a>, <a class="el" href="hdrinline_8h-source.html#l00230">headerIsEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00062">headerLink()</a>, <a class="el" href="hdrinline_8h-source.html#l00035">headerNew()</a>, <a class="el" href="hdrinline_8h-source.html#l00494">headerNextIterator()</a>, <a class="el" href="package_8c-source.html#l00178">headerRegenSigHeader()</a>, <a class="el" href="hdrinline_8h-source.html#l00149">headerReload()</a>, <a class="el" href="hdrinline_8h-source.html#l00435">headerSprintf()</a>, <a class="el" href="hdrinline_8h-source.html#l00214">headerWrite()</a>, <a class="el" href="psm_8c-source.html#l00163">markReplacedFiles()</a>, <a class="el" href="psm_8h-source.html#l00079">rpmpsm_s::mi</a>, <a class="el" href="rpmdb_8c-source.html#l00069">myinstall_instance</a>, <a class="el" href="psm_8h-source.html#l00092">rpmpsm_s::npkgs_installed</a>, <a class="el" href="psm_8h-source.html#l00077">rpmpsm_s::oh</a>, <a class="el" href="psm_8h-source.html#l00089">rpmpsm_s::pkgfn</a>, <a class="el" href="psm_8c-source.html#l01215">pkgStageString()</a>, <a class="el" href="psm_8h-source.html#l00087">rpmpsm_s::pkgURL</a>, <a class="el" href="psm_8h-source.html#l00091">rpmpsm_s::progTag</a>, <a class="el" href="psm_8h-source.html#l00045">PSM_CHROOT_IN</a>, <a class="el" href="psm_8h-source.html#l00046">PSM_CHROOT_OUT</a>, <a class="el" href="psm_8h-source.html#l00043">PSM_COMMIT</a>, <a class="el" href="psm_8h-source.html#l00040">PSM_CREATE</a>, <a class="el" href="psm_8h-source.html#l00042">PSM_DESTROY</a>, <a class="el" href="psm_8h-source.html#l00033">PSM_FINI</a>, <a class="el" href="psm_8h-source.html#l00049">PSM_IMMED_TRIGGERS</a>, <a class="el" href="psm_8h-source.html#l00028">PSM_INIT</a>, <a class="el" href="psm_8h-source.html#l00041">PSM_NOTIFY</a>, <a class="el" href="psm_8h-source.html#l00037">PSM_PKGCOMMIT</a>, <a class="el" href="psm_8h-source.html#l00036">PSM_PKGERASE</a>, <a class="el" href="psm_8h-source.html#l00035">PSM_PKGINSTALL</a>, <a class="el" href="psm_8h-source.html#l00038">PSM_PKGSAVE</a>, <a class="el" href="psm_8h-source.html#l00031">PSM_POST</a>, <a class="el" href="psm_8h-source.html#l00029">PSM_PRE</a>, <a class="el" href="psm_8h-source.html#l00030">PSM_PROCESS</a>, <a class="el" href="psm_8h-source.html#l00053">PSM_RPMDB_ADD</a>, <a class="el" href="psm_8h-source.html#l00052">PSM_RPMDB_LOAD</a>, <a class="el" href="psm_8h-source.html#l00054">PSM_RPMDB_REMOVE</a>, <a class="el" href="psm_8h-source.html#l00050">PSM_RPMIO_FLAGS</a>, <a class="el" href="psm_8h-source.html#l00047">PSM_SCRIPT</a>, <a class="el" href="psm_8h-source.html#l00048">PSM_TRIGGERS</a>, <a class="el" href="psm_8h-source.html#l00032">PSM_UNDO</a>, <a class="el" href="psm_8h-source.html#l00027">PSM_UNKNOWN</a>, <a class="el" href="psm_8h-source.html#l00101">rpmpsm_s::rc</a>, <a class="el" href="header_8h-source.html#l00218">RPM_CHAR_TYPE</a>, <a class="el" href="header_8h-source.html#l00221">RPM_INT32_TYPE</a>, <a class="el" href="rpmmessages_8h-source.html#l00057">RPMCALLBACK_CPIO_ERROR</a>, <a class="el" href="rpmmessages_8h-source.html#l00043">RPMCALLBACK_INST_PROGRESS</a>, <a class="el" href="rpmmessages_8h-source.html#l00044">RPMCALLBACK_INST_START</a>, <a class="el" href="rpmmessages_8h-source.html#l00051">RPMCALLBACK_UNINST_START</a>, <a class="el" href="rpmmessages_8h-source.html#l00052">RPMCALLBACK_UNINST_STOP</a>, <a class="el" href="rpmmessages_8h-source.html#l00056">RPMCALLBACK_UNPACK_ERROR</a>, <a class="el" href="rpmdb_8c-source.html#l02939">rpmdbAdd()</a>, <a class="el" href="rpmdb_8c-source.html#l01354">rpmdbCountPackages()</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l01731">rpmdbGetIteratorOffset()</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l02632">rpmdbRemove()</a>, <a class="el" href="rpmdb_8c-source.html#l01898">rpmdbSetIteratorRE()</a>, <a class="el" href="rpmerr_8h-source.html#l00093">RPMERR_CPIO</a>, <a class="el" href="rpmerr_8h-source.html#l00066">RPMERR_NOSPACE</a>, <a class="el" href="rpmerr_8h-source.html#l00085">RPMERR_SCRIPT</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="legacy_8c-source.html#l00362">rpmfiBuildFNames()</a>, <a class="el" href="rpmfi_8c-source.html#l00058">rpmfiFC()</a>, <a class="el" href="rpmlib_8h-source.html#l00462">RPMFILE_STATE_NORMAL</a>, <a class="el" href="signature_8c-source.html#l00381">rpmFreeSignature()</a>, <a class="el" href="macro_8c-source.html#l02285">rpmGenPath()</a>, <a class="el" href="rpmrc_8c-source.html#l01569">rpmGetArchInfo()</a>, <a class="el" href="rpmrc_8c-source.html#l01574">rpmGetOsInfo()</a>, <a class="el" href="macro_8c-source.html#l02254">rpmGetPath()</a>, <a class="el" href="formats_8c-source.html#l01154">rpmHeaderFormats</a>, <a class="el" href="psm_8h-source.html#l00083">rpmpsm_s::rpmio_flags</a>, <a class="el" href="rpmlib_8h-source.html#l01095">RPMLEAD_BINARY</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00012">RPMMESS_VERBOSE</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmdb_8h-source.html#l00037">RPMMIRE_STRCMP</a>, <a class="el" href="psm_8c-source.html#l01340">rpmpsmNext()</a>, <a class="el" href="rpmlib_8h-source.html#l00023">RPMRC_FAIL</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmlib_8h-source.html#l00518">RPMSENSE_TRIGGERIN</a>, <a class="el" href="rpmlib_8h-source.html#l00520">RPMSENSE_TRIGGERPOSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00519">RPMSENSE_TRIGGERUN</a>, <a class="el" href="signature_8h-source.html#l00015">RPMSIGTYPE_HEADERSIG</a>, <a class="el" href="rpmsw_8c-source.html#l00273">rpmswAdd()</a>, <a class="el" href="rpmsw_8c-source.html#l00241">rpmswEnter()</a>, <a class="el" href="rpmsw_8c-source.html#l00257">rpmswExit()</a>, <a class="el" href="rpmlib_8h-source.html#l00294">RPMTAG_ARCH</a>, <a class="el" href="rpmlib_8h-source.html#l00322">RPMTAG_ARCHIVESIZE</a>, <a class="el" href="rpmlib_8h-source.html#l00400">RPMTAG_BASENAMES</a>, <a class="el" href="rpmlib_8h-source.html#l00338">RPMTAG_DEFAULTPREFIX</a>, <a class="el" href="rpmlib_8h-source.html#l00270">RPMTAG_EPOCH</a>, <a class="el" href="rpmlib_8h-source.html#l00314">RPMTAG_FILEGROUPNAME</a>, <a class="el" href="rpmlib_8h-source.html#l00301">RPMTAG_FILESTATES</a>, <a class="el" href="rpmlib_8h-source.html#l00313">RPMTAG_FILEUSERNAME</a>, <a class="el" href="rpmlib_8h-source.html#l00234">RPMTAG_HEADERIMAGE</a>, <a class="el" href="rpmlib_8h-source.html#l00236">RPMTAG_HEADERIMMUTABLE</a>, <a class="el" href="rpmlib_8h-source.html#l00235">RPMTAG_HEADERSIGNATURES</a>, <a class="el" href="rpmlib_8h-source.html#l00410">RPMTAG_INSTALLCOLOR</a>, <a class="el" href="rpmlib_8h-source.html#l00277">RPMTAG_INSTALLTIME</a>, <a class="el" href="rpmlib_8h-source.html#l00264">RPMTAG_NAME</a>, <a class="el" href="rpmlib_8h-source.html#l00403">RPMTAG_ORIGBASENAMES</a>, <a class="el" href="rpmlib_8h-source.html#l00293">RPMTAG_OS</a>, <a class="el" href="rpmlib_8h-source.html#l00408">RPMTAG_PAYLOADCOMPRESSOR</a>, <a class="el" href="rpmlib_8h-source.html#l00296">RPMTAG_POSTIN</a>, <a class="el" href="rpmlib_8h-source.html#l00361">RPMTAG_POSTINPROG</a>, <a class="el" href="rpmlib_8h-source.html#l00298">RPMTAG_POSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00363">RPMTAG_POSTUNPROG</a>, <a class="el" href="rpmlib_8h-source.html#l00295">RPMTAG_PREIN</a>, <a class="el" href="rpmlib_8h-source.html#l00360">RPMTAG_PREINPROG</a>, <a class="el" href="rpmlib_8h-source.html#l00297">RPMTAG_PREUN</a>, <a class="el" href="rpmlib_8h-source.html#l00362">RPMTAG_PREUNPROG</a>, <a class="el" href="rpmlib_8h-source.html#l00268">RPMTAG_RELEASE</a>, <a class="el" href="rpmlib_8h-source.html#l00412">RPMTAG_REMOVETID</a>, <a class="el" href="rpmlib_8h-source.html#l00348">RPMTAG_TRIGGERNAME</a>, <a class="el" href="rpmlib_8h-source.html#l00266">RPMTAG_VERSION</a>, <a class="el" href="tagtbl_8c-source.html#l00166">rpmTagTable</a>, <a class="el" href="rpmte_8c-source.html#l00292">rpmteA()</a>, <a class="el" href="rpmte_8c-source.html#l00277">rpmteE()</a>, <a class="el" href="rpmte_8c-source.html#l00490">rpmteFd()</a>, <a class="el" href="rpmte_8c-source.html#l00272">rpmteN()</a>, <a class="el" href="rpmte_8c-source.html#l00480">rpmteNEVR()</a>, <a class="el" href="rpmte_8c-source.html#l00297">rpmteO()</a>, <a class="el" href="rpmte_8c-source.html#l00287">rpmteR()</a>, <a class="el" href="rpmte_8c-source.html#l00246">rpmteSetDBInstance()</a>, <a class="el" href="rpmte_8c-source.html#l00282">rpmteV()</a>, <a class="el" href="rpmlib_8h-source.html#l01004">RPMTRANS_FLAG_APPLYONLY</a>, <a class="el" href="rpmlib_8h-source.html#l00972">RPMTRANS_FLAG_JUSTDB</a>, <a class="el" href="rpmlib_8h-source.html#l00995">RPMTRANS_FLAG_NOPOST</a>, <a class="el" href="rpmlib_8h-source.html#l00999">RPMTRANS_FLAG_NOPOSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00994">RPMTRANS_FLAG_NOPRE</a>, <a class="el" href="rpmlib_8h-source.html#l00998">RPMTRANS_FLAG_NOPREUN</a>, <a class="el" href="rpmlib_8h-source.html#l00996">RPMTRANS_FLAG_NOTRIGGERIN</a>, <a class="el" href="rpmlib_8h-source.html#l01000">RPMTRANS_FLAG_NOTRIGGERPOSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00993">RPMTRANS_FLAG_NOTRIGGERPREIN</a>, <a class="el" href="rpmlib_8h-source.html#l00997">RPMTRANS_FLAG_NOTRIGGERUN</a>, <a class="el" href="rpmlib_8h-source.html#l00983">RPMTRANS_FLAG_PKGCOMMIT</a>, <a class="el" href="rpmlib_8h-source.html#l00969">RPMTRANS_FLAG_TEST</a>, <a class="el" href="rpmts_8h-source.html#l00048">RPMTRANS_TYPE_AUTOROLLBACK</a>, <a class="el" href="rpmts_8h-source.html#l00047">RPMTRANS_TYPE_ROLLBACK</a>, <a class="el" href="rpmts_8h-source.html#l00087">RPMTS_OP_COMPRESS</a>, <a class="el" href="rpmts_8h-source.html#l00091">RPMTS_OP_DBADD</a>, <a class="el" href="rpmts_8h-source.html#l00092">RPMTS_OP_DBREMOVE</a>, <a class="el" href="rpmts_8h-source.html#l00089">RPMTS_OP_DIGEST</a>, <a class="el" href="rpmts_8h-source.html#l00088">RPMTS_OP_UNCOMPRESS</a>, <a class="el" href="rpmts_8c-source.html#l01070">rpmtsChrootDone()</a>, <a class="el" href="rpmts_8c-source.html#l01463">rpmtsColor()</a>, <a class="el" href="rpmts_8c-source.html#l01021">rpmtsCurrDir()</a>, <a class="el" href="rpmts_8c-source.html#l01416">rpmtsFlags()</a>, <a class="el" href="rpmts_8c-source.html#l01200">rpmtsGetRdb()</a>, <a class="el" href="rpmts_8c-source.html#l01749">rpmtsGetScore()</a>, <a class="el" href="rpmts_8c-source.html#l01104">rpmtsGetTid()</a>, <a class="el" href="rpmts_8c-source.html#l00949">rpmtsGetType()</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, <a class="el" href="rpmts_8c-source.html#l01374">rpmtsNotify()</a>, <a class="el" href="rpmts_8c-source.html#l01483">rpmtsOp()</a>, <a class="el" href="rpmts_8c-source.html#l00968">rpmtsRootDir()</a>, <a class="el" href="rpmts_8c-source.html#l01763">rpmtsScoreGetEntry()</a>, <a class="el" href="rpmts_8c-source.html#l01075">rpmtsSetChrootDone()</a>, <a class="el" href="rpmts_8c-source.html#l00909">rpmtsVSFlags()</a>, <a class="el" href="rpmts_8h-source.html#l00027">RPMVSF_NOHDRCHK</a>, <a class="el" href="signature_8c-source.html#l00353">rpmWriteSignature()</a>, <a class="el" href="psm_8c-source.html#l01161">runImmedTriggers()</a>, <a class="el" href="psm_8c-source.html#l00964">runInstScript()</a>, <a class="el" href="psm_8c-source.html#l01119">runTriggers()</a>, <a class="el" href="psm_8h-source.html#l00093">rpmpsm_s::scriptArg</a>, <a class="el" href="psm_8h-source.html#l00090">rpmpsm_s::scriptTag</a>, <a class="el" href="psm_8h-source.html#l00094">rpmpsm_s::sense</a>, <a class="el" href="psm_8h-source.html#l00081">rpmpsm_s::stepName</a>, <a class="el" href="system_8h.html#58841684f76853b313e27e663c850381">stpcpy()</a>, <a class="el" href="psm_8c-source.html#l00453">tag2sln()</a>, <a class="el" href="psm_8h-source.html#l00070">rpmpsm_s::te</a>, <a class="el" href="psm_8h-source.html#l00100">rpmpsm_s::total</a>, <a class="el" href="rpmte_8h-source.html#l00030">TR_ADDED</a>, <a class="el" href="rpmte_8h-source.html#l00031">TR_REMOVED</a>, <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>, <a class="el" href="url_8c-source.html#l00383">urlPath()</a>, <a class="el" href="psm_8h-source.html#l00098">rpmpsm_s::what</a>, <a class="el" href="rpmlead_8c-source.html#l00026">writeLead()</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00024">xmalloc()</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01340">rpmpsmNext()</a>, <a class="el" href="psm_8c-source.html#l01330">rpmpsmThread()</a>, <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, and <a class="el" href="verify_8c-source.html#l00221">rpmVerifyScript()</a>.
</div>
</div><p>
<a class="anchor" name="0a391a3404c23c5ff7c5715863a75dd8"></a><!-- doxytag: member="psm.c::rpmpsmThread" ref="0a391a3404c23c5ff7c5715863a75dd8" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* rpmpsmThread           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01330">1330</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="psm_8h-source.html#l00105">rpmpsm_s::nstage</a>, and <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01340">rpmpsmNext()</a>.
</div>
</div><p>
<a class="anchor" name="a664f29c1b00ae84476ff516a22dd915"></a><!-- doxytag: member="psm.c::rpmVersionCompare" ref="a664f29c1b00ae84476ff516a22dd915" args="(Header first, Header second)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmVersionCompare           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structheaderToken__s.html">Header</a>&nbsp;</td>
          <td class="paramname"> <em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheaderToken__s.html">Header</a>&nbsp;</td>
          <td class="paramname"> <em>second</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare headers to determine which header is "newer". 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>first</em>&nbsp;</td><td>1st header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>second</em>&nbsp;</td><td>2nd header </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>result of comparison </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00061">61</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="hdrinline_8h-source.html#l00268">headerGetEntry()</a>, <a class="el" href="rpmlib_8h-source.html#l00270">RPMTAG_EPOCH</a>, <a class="el" href="rpmlib_8h-source.html#l00268">RPMTAG_RELEASE</a>, <a class="el" href="rpmlib_8h-source.html#l00266">RPMTAG_VERSION</a>, and <a class="el" href="rpmvercmp_8c-source.html#l00015">rpmvercmp()</a>.
<p>
Referenced by <a class="el" href="header-py_8c-source.html#l00371">hdr_compare()</a>, <a class="el" href="rpminstall_8c-source.html#l00286">rpmInstall()</a>, and <a class="el" href="depends_8c-source.html#l00127">rpmtsAddInstallElement()</a>.
</div>
</div><p>
<a class="anchor" name="5b1b1d3e4db5fa0650e04ec8fa06e283"></a><!-- doxytag: member="psm.c::runImmedTriggers" ref="5b1b1d3e4db5fa0650e04ec8fa06e283" args="(rpmpsm psm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> runImmedTriggers           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Run triggers from this header that are fired by headers in the database. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine data </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01161">1161</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="psm_8c-source.html#l01017">handleOneTrigger()</a>, <a class="el" href="header_8h-source.html#l00704">headerFreeData()</a>, <a class="el" href="psm_8h-source.html#l00079">rpmpsm_s::mi</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l01739">rpmdbGetIteratorCount()</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmlib_8h-source.html#l00264">RPMTAG_NAME</a>, <a class="el" href="rpmlib_8h-source.html#l00351">RPMTAG_TRIGGERINDEX</a>, <a class="el" href="rpmlib_8h-source.html#l00348">RPMTAG_TRIGGERNAME</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, and <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
</div>
</div><p>
<a class="anchor" name="a12c61a859f8cbdebf5295ac745b4d30"></a><!-- doxytag: member="psm.c::runInstScript" ref="a12c61a859f8cbdebf5295ac745b4d30" args="(rpmpsm psm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> runInstScript           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieve and run scriptlet from header. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine data </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>rpmRC return code </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00964">964</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="compress_8c-source.html#l00064">argv</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="header_8h-source.html#l00704">headerFreeData()</a>, <a class="el" href="psm_8h-source.html#l00091">rpmpsm_s::progTag</a>, <a class="el" href="header_8h-source.html#l00223">RPM_STRING_TYPE</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="psm_8c-source.html#l00607">runScript()</a>, <a class="el" href="psm_8h-source.html#l00093">rpmpsm_s::scriptArg</a>, <a class="el" href="psm_8h-source.html#l00090">rpmpsm_s::scriptTag</a>, and <a class="el" href="psm_8c-source.html#l00453">tag2sln()</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
</div>
</div><p>
<a class="anchor" name="87d09d72b60fc1dd20b87fbf57286e83"></a><!-- doxytag: member="psm.c::runScript" ref="87d09d72b60fc1dd20b87fbf57286e83" args="(rpmpsm psm, Header h, const char *sln, int progArgc, const char **progArgv, const char *script, int arg1, int arg2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> runScript           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheaderToken__s.html">Header</a>&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>sln</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>progArgc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>progArgv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>script</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>arg2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Run scriptlet with args. 
<p>
Run a script with an interpreter. If the interpreter is not specified, /bin/sh will be used. If the interpreter is /bin/sh, then the args from the header will be ignored, passing instead arg1 and arg2.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sln</em>&nbsp;</td><td><a class="el" href="structname.html">name</a> of scriptlet section </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>progArgc</em>&nbsp;</td><td>no. of args from header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>progArgv</em>&nbsp;</td><td>args from header, progArgv[0] is the interpreter to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>script</em>&nbsp;</td><td>scriptlet from header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg1</em>&nbsp;</td><td>no. instances of package installed after scriptlet exec (-1 is no arg) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg2</em>&nbsp;</td><td>ditto, but for the target package </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00607">607</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="compress_8c-source.html#l00064">argv</a>, <a class="el" href="rpmsq_8h-source.html#l00039">rpmsqElem::child</a>, <a class="el" href="lib_2misc_8c-source.html#l00100">doputenv()</a>, <a class="el" href="signature_8c-source.html#l00030">environ</a>, <a class="el" href="system_8h.html#a5e6580e8f12679392f66d3c9b146ab4">errno</a>, <a class="el" href="rpmio_8c-source.html#l02903">Fclose()</a>, <a class="el" href="psm_8h-source.html#l00076">rpmpsm_s::fd</a>, <a class="el" href="rpmio_8c-source.html#l00237">fdDup()</a>, <a class="el" href="rpmio_8c-source.html#l03277">Ferror()</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="rpmio_8c-source.html#l03316">Fileno()</a>, <a class="el" href="rpmio_8c-source.html#l03184">Fopen()</a>, <a class="el" href="rpmio_8c-source.html#l02846">Fwrite()</a>, <a class="el" href="header_8h-source.html#l00704">headerFreeData()</a>, <a class="el" href="hdrNVR_8c-source.html#l00009">headerNVR()</a>, <a class="el" href="hdrinline_8h-source.html#l00435">headerSprintf()</a>, <a class="el" href="rpmtool_8c-source.html#l00095">ipath</a>, <a class="el" href="lib_2misc_8c-source.html#l00122">makeTempFile()</a>, <a class="el" href="psm_8c-source.html#l00476">psmWait()</a>, <a class="el" href="rpmsq_8h-source.html#l00040">rpmsqElem::reaped</a>, <a class="el" href="rpmsq_8h-source.html#l00044">rpmsqElem::reaper</a>, <a class="el" href="system_8h-source.html#l00313">rpm_execcon</a>, <a class="el" href="rpmerr_8h-source.html#l00092">RPMERR_FORK</a>, <a class="el" href="rpmerr_8h-source.html#l00085">RPMERR_SCRIPT</a>, <a class="el" href="rpmerr_8h-source.html#l00143">rpmError</a>, <a class="el" href="macro_8c-source.html#l02116">rpmExpand()</a>, <a class="el" href="macro_8c-source.html#l02254">rpmGetPath()</a>, <a class="el" href="formats_8c-source.html#l01154">rpmHeaderFormats</a>, <a class="el" href="rpmmessages_8h-source.html#l00031">rpmIsDebug</a>, <a class="el" href="rpmmessages_8h-source.html#l00029">rpmIsVerbose</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmlib_8h-source.html#l00023">RPMRC_FAIL</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmsq_8c-source.html#l00401">rpmsqFork()</a>, <a class="el" href="rpmlib_8h-source.html#l00294">RPMTAG_ARCH</a>, <a class="el" href="rpmlib_8h-source.html#l00340">RPMTAG_INSTALLPREFIX</a>, <a class="el" href="rpmlib_8h-source.html#l00376">RPMTAG_INSTPREFIXES</a>, <a class="el" href="tagtbl_8c-source.html#l00166">rpmTagTable</a>, <a class="el" href="rpmts_8c-source.html#l01070">rpmtsChrootDone()</a>, <a class="el" href="rpmts_8c-source.html#l00968">rpmtsRootDir()</a>, <a class="el" href="rpmts_8c-source.html#l01039">rpmtsScriptFd()</a>, <a class="el" href="rpmts_8c-source.html#l01065">rpmtsSELinuxEnabled()</a>, <a class="el" href="psm_8h-source.html#l00090">rpmpsm_s::scriptTag</a>, <a class="el" href="psm_8h-source.html#l00065">rpmpsm_s::sq</a>, <a class="el" href="rpmsq_8h-source.html#l00041">rpmsqElem::status</a>, <a class="el" href="psm_8h-source.html#l00081">rpmpsm_s::stepName</a>, <a class="el" href="system_8h.html#58841684f76853b313e27e663c850381">stpcpy()</a>, <a class="el" href="file_8h-source.html#l00323">strerror</a>, <a class="el" href="psm_8c-source.html#l00453">tag2sln()</a>, <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>, <a class="el" href="psm_8h-source.html#l00097">rpmpsm_s::unorderedSuccessor</a>, <a class="el" href="system_8h.html#440dcd7dd71b4d668d8b9112643b9e0a">unsetenv()</a>, <a class="el" href="rpmurl_8h-source.html#l00015">URL_IS_DASH</a>, <a class="el" href="rpmurl_8h-source.html#l00017">URL_IS_FTP</a>, <a class="el" href="rpmurl_8h-source.html#l00020">URL_IS_HKP</a>, <a class="el" href="rpmurl_8h-source.html#l00018">URL_IS_HTTP</a>, <a class="el" href="rpmurl_8h-source.html#l00019">URL_IS_HTTPS</a>, <a class="el" href="rpmurl_8h-source.html#l00016">URL_IS_PATH</a>, <a class="el" href="rpmurl_8h-source.html#l00014">URL_IS_UNKNOWN</a>, and <a class="el" href="url_8c-source.html#l00364">urlIsURL()</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01017">handleOneTrigger()</a>, and <a class="el" href="psm_8c-source.html#l00964">runInstScript()</a>.
</div>
</div><p>
<a class="anchor" name="f5f0e42567d6341049f232c452cfac45"></a><!-- doxytag: member="psm.c::runTriggers" ref="f5f0e42567d6341049f232c452cfac45" args="(rpmpsm psm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> runTriggers           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Run trigger scripts in the database that are fired by this header. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psm</em>&nbsp;</td><td>package state machine data </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01119">1119</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="psm_8h-source.html#l00095">rpmpsm_s::countCorrection</a>, <a class="el" href="psm_8h-source.html#l00072">rpmpsm_s::fi</a>, <a class="el" href="psm_8c-source.html#l01017">handleOneTrigger()</a>, <a class="el" href="psm_8h-source.html#l00079">rpmpsm_s::mi</a>, <a class="el" href="rpmdb_8c-source.html#l01354">rpmdbCountPackages()</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmlib_8h-source.html#l00022">RPMRC_NOTFOUND</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmlib_8h-source.html#l00348">RPMTAG_TRIGGERNAME</a>, <a class="el" href="rpmte_8c-source.html#l00272">rpmteN()</a>, <a class="el" href="rpmts_8c-source.html#l01200">rpmtsGetRdb()</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, <a class="el" href="psm_8h-source.html#l00070">rpmpsm_s::te</a>, and <a class="el" href="psm_8h-source.html#l00068">rpmpsm_s::ts</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
</div>
</div><p>
<a class="anchor" name="9b3defbb93dca3955bed947efb6d2ca0"></a><!-- doxytag: member="psm.c::tag2sln" ref="9b3defbb93dca3955bed947efb6d2ca0" args="(int tag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const char* const tag2sln           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tag</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return scriptlet <a class="el" href="structname.html">name</a> from tag. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tag</em>&nbsp;</td><td>scriptlet tag </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="structname.html">name</a> of scriptlet </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00453">453</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00296">RPMTAG_POSTIN</a>, <a class="el" href="rpmlib_8h-source.html#l00437">RPMTAG_POSTTRANS</a>, <a class="el" href="rpmlib_8h-source.html#l00298">RPMTAG_POSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00295">RPMTAG_PREIN</a>, <a class="el" href="rpmlib_8h-source.html#l00436">RPMTAG_PRETRANS</a>, <a class="el" href="rpmlib_8h-source.html#l00297">RPMTAG_PREUN</a>, <a class="el" href="rpmlib_8h-source.html#l00377">RPMTAG_TRIGGERIN</a>, <a class="el" href="rpmlib_8h-source.html#l00379">RPMTAG_TRIGGERPOSTUN</a>, <a class="el" href="rpmlib_8h-source.html#l00378">RPMTAG_TRIGGERUN</a>, and <a class="el" href="rpmlib_8h-source.html#l00352">RPMTAG_VERIFYSCRIPT</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>, <a class="el" href="psm_8c-source.html#l00964">runInstScript()</a>, and <a class="el" href="psm_8c-source.html#l00607">runScript()</a>.
</div>
</div><p>
<a class="anchor" name="2ed8568588043eb4438a90eeca7f31a6"></a><!-- doxytag: member="psm.c::XrpmpsmLink" ref="2ed8568588043eb4438a90eeca7f31a6" args="(rpmpsm psm, const char *msg, const char *fn, unsigned ln)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> XrpmpsmLink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>ln</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000026">Todo:</a></b></dt><dd>Remove debugging entry from the ABI. </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01266">1266</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="psm_8c-source.html#l00038">_psm_debug</a>, and <a class="el" href="psm_8h-source.html#l00108">rpmpsm_s::nrefs</a>.
</div>
</div><p>
<a class="anchor" name="df0354ded44da099ad96aedacabf6963"></a><!-- doxytag: member="psm.c::XrpmpsmUnlink" ref="df0354ded44da099ad96aedacabf6963" args="(rpmpsm psm, const char *msg, const char *fn, unsigned ln)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmpsm__s.html">rpmpsm</a> XrpmpsmUnlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmpsm__s.html">rpmpsm</a>&nbsp;</td>
          <td class="paramname"> <em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>ln</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000025">Todo:</a></b></dt><dd>Remove debugging entry from the ABI. </dd></dl>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l01255">1255</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
References <a class="el" href="psm_8c-source.html#l00038">_psm_debug</a>, and <a class="el" href="psm_8h-source.html#l00108">rpmpsm_s::nrefs</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="1c2ede845b148b5fca6c850a3e137d86"></a><!-- doxytag: member="psm.c::_psm_debug" ref="1c2ede845b148b5fca6c850a3e137d86" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="psm_8h.html#1c2ede845b148b5fca6c850a3e137d86">_psm_debug</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00038">38</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
</div>
</div><p>
<a class="anchor" name="dd4e1a4c48272c659ff82733577ffff2"></a><!-- doxytag: member="psm.c::_psm_threads" ref="dd4e1a4c48272c659ff82733577ffff2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="psm_8c.html#dd4e1a4c48272c659ff82733577ffff2">_psm_threads</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00040">40</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l01340">rpmpsmNext()</a>.
</div>
</div><p>
<a class="anchor" name="ca42d7321f7e38582445f60140cf8ac9"></a><!-- doxytag: member="psm.c::ldconfig_done" ref="ca42d7321f7e38582445f60140cf8ac9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="psm_8c.html#ca42d7321f7e38582445f60140cf8ac9">ldconfig_done</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00584">584</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
</div>
</div><p>
<a class="anchor" name="3ad0a6da2dae4f7c31e347cf16bf2f6b"></a><!-- doxytag: member="psm.c::ldconfig_path" ref="3ad0a6da2dae4f7c31e347cf16bf2f6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="psm_8c.html#3ad0a6da2dae4f7c31e347cf16bf2f6b">ldconfig_path</a> = &quot;/sbin/ldconfig&quot;<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00587">587</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
</div>
</div><p>
<a class="anchor" name="a3de37e4b685872bb0f104dc9b8ee26b"></a><!-- doxytag: member="psm.c::myinstall_instance" ref="a3de37e4b685872bb0f104dc9b8ee26b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="rpmdb_8c.html#a3de37e4b685872bb0f104dc9b8ee26b">myinstall_instance</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmdb_8c-source.html#l00069">69</a> of file <a class="el" href="rpmdb_8c-source.html">rpmdb.c</a>.
<p>
Referenced by <a class="el" href="rpmdb_8c-source.html#l02939">rpmdbAdd()</a>, and <a class="el" href="psm_8c-source.html#l01355">rpmpsmStage()</a>.
</div>
</div><p>
<a class="anchor" name="aa82d3965ee5c730476c169a6d987f16"></a><!-- doxytag: member="psm.c::SCRIPT_PATH" ref="aa82d3965ee5c730476c169a6d987f16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="psm_8c.html#aa82d3965ee5c730476c169a6d987f16">SCRIPT_PATH</a> = &quot;PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin&quot;<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="psm_8c-source.html#l00446">446</a> of file <a class="el" href="psm_8c-source.html">psm.c</a>.
</div>
</div><p>
<a class="anchor" name="2ec2d94bea23dae1a8fb5da3fe12d6e2"></a><!-- doxytag: member="psm.c::tagMacros" ref="2ec2d94bea23dae1a8fb5da3fe12d6e2" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtagMacro.html">tagMacro</a>  <a class="el" href="psm_8c.html#2ec2d94bea23dae1a8fb5da3fe12d6e2">tagMacros</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Macros to be defined from per-header tag values. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000022">Todo:</a></b></dt><dd>Should other macros be added from header when installing a package? </dd></dl>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:55 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
