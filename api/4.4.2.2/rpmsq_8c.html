<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: rpmio/rpmsq.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>rpmio/rpmsq.c File Reference</h1><code>#include &quot;<a class="el" href="system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;signal.h&gt;</code><br>
<code>#include &lt;sys/signal.h&gt;</code><br>
<code>#include &lt;sys/wait.h&gt;</code><br>
<code>#include &lt;search.h&gt;</code><br>
<code>#include &lt;<a class="el" href="rpmsq_8h-source.html">rpmsq.h</a>&gt;</code><br>
<code>#include &quot;<a class="el" href="debug_8h-source.html">debug.h</a>&quot;</code><br>

<p>
<a href="rpmsq_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrpmsig__s.html">rpmsig_s</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#286653e6c0351e4b96aabd56e39b3e4e">DO_LOCK</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#db7dcf4b4a5c6d71db97ac5ac56ea854">DO_UNLOCK</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#0e3013f3c24c97843f6e368b8258ce11">INIT_LOCK</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#9d94b6ded163b170e1fda99d19bfa387">ADD_REF</a>(__tbl)&nbsp;&nbsp;&nbsp;/*@-noeffect@*/ (0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#1f3b56943872a5e0a08aa39bd8632b1b">SUB_REF</a>(__tbl)&nbsp;&nbsp;&nbsp;/*@-noeffect@*/ (0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#b100c291f35c45fd2872cf4f37e014a9">CLEANUP_HANDLER</a>(__handler, __arg, __oldtypeptr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#572681ad4a7ce4465835719aeb3be786">CLEANUP_RESET</a>(__execute, __oldtype)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#f8f3658c377bd4b7abba4173c6a372f3">SAME_THREAD</a>(_a, _b)&nbsp;&nbsp;&nbsp;(42)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#ae730cd94e6b313bc0267c0a9d4cf901">ME</a>()&nbsp;&nbsp;&nbsp;(((void *)getpid()))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#205cb0e8f493ed8cee0a19384cfc9871">_RPMSQ_DEBUG</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#07b3110b88f73ad2d709440bc463be83">rpmsigTbl_sigint</a>&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[0])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#82f3512dfd9c7f721bcec63354a13ece">rpmsigTbl_sigquit</a>&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[1])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#4906c737ef5f406f745ada183a34729c">rpmsigTbl_sigchld</a>&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[2])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#91499eb6cd81c56a78c7f9530b738a5c">rpmsigTbl_sighup</a>&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[3])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#f48055093679c365c039be16eea2e891">rpmsigTbl_sigterm</a>&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[4])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#5df24aaac5a34b0661d8513acbd7c932">rpmsigTbl_sigpipe</a>&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[5])</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#0030a83127aa1d9d37421556895e95da">rpmsqInsert</a> (void *elem, void *prev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert node into from queue.  <a href="#0030a83127aa1d9d37421556895e95da"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#cf3ba71cc424631b42f651ecd9ab8b75">rpmsqRemove</a> (void *elem)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove node from queue.  <a href="#cf3ba71cc424631b42f651ecd9ab8b75"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#cc9c5128e482f1e40da3ca0e73c0e6b9">rpmsqAction</a> (int signum, void *info, void *context)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default signal handler.  <a href="#cc9c5128e482f1e40da3ca0e73c0e6b9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#ab298b21cc58fe0059d907eac23e9a85">rpmsqEnable</a> (int signum, <a class="el" href="rpmsq_8h.html#0efa2c49e28586bfa10ec3a10d72f957">rpmsqAction_t</a> handler)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable or disable a signal handler.  <a href="#ab298b21cc58fe0059d907eac23e9a85"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">pid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#b019756ec1532c5ca43b435549b91fd5">rpmsqFork</a> (<a class="el" href="structrpmsqElem.html">rpmsq</a> sq)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fork a child process.  <a href="#b019756ec1532c5ca43b435549b91fd5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#9e00a2a2c3cb54b51e8d51b564873ebf">rpmsqWaitUnregister</a> (<a class="el" href="structrpmsqElem.html">rpmsq</a> sq)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for child process to be reaped, and unregister SIGCHLD handler.  <a href="#9e00a2a2c3cb54b51e8d51b564873ebf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">pid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#4b70f81be474061cf19e44e6de80e4a9">rpmsqWait</a> (<a class="el" href="structrpmsqElem.html">rpmsq</a> sq)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for child process to be reaped.  <a href="#4b70f81be474061cf19e44e6de80e4a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#144095ad8653fc52152e44ff91585c99">rpmsqThread</a> (void *(*start)(void *arg), void *arg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call a function in a thread.  <a href="#144095ad8653fc52152e44ff91585c99"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#75a46086c1b03bdc42ec058aeac2840d">rpmsqJoin</a> (void *thread)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for thread to terminate.  <a href="#75a46086c1b03bdc42ec058aeac2840d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#15ef5bcbc3fa59b996f71afb441ea173">rpmsqThreadEqual</a> (void *thread)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compare thread with current thread.  <a href="#15ef5bcbc3fa59b996f71afb441ea173"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#cc88dc46a2dd6fa4be082e75cf98c7ec">sigchld_cancel</a> (void *arg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SIGCHLD cancellation handler.  <a href="#cc88dc46a2dd6fa4be082e75cf98c7ec"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#8c41fe74cc31e2ce1fd5e0d39dd598eb">rpmsqExecve</a> (const char **<a class="el" href="compress_8c.html#a06161d5bbbc977dc1ad9e6669902c5e">argv</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute a command, returning its status.  <a href="#8c41fe74cc31e2ce1fd5e0d39dd598eb"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#dcfcab606a7cc09228fbc43fc48b6dd7">_rpmsq_debug</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structrpmsqElem.html">rpmsqElem</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#767a6eaf78cf19a6763fbd92aac23520">rpmsqRock</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structrpmsqElem.html">rpmsq</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#f71f1bada7f979a9a276f2da4f2afc55">rpmsqQueue</a> = &amp;<a class="el" href="rpmsq_8c.html#767a6eaf78cf19a6763fbd92aac23520">rpmsqRock</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">sigset_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#f6a694606c16ad0a1383dbb5e2d495af">rpmsqCaught</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structrpmsig__s.html">rpmsig_s</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a> []</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
Definition in file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="205cb0e8f493ed8cee0a19384cfc9871"></a><!-- doxytag: member="rpmsq.c::_RPMSQ_DEBUG" ref="205cb0e8f493ed8cee0a19384cfc9871" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _RPMSQ_DEBUG&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00187">187</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
</div>
</div><p>
<a class="anchor" name="9d94b6ded163b170e1fda99d19bfa387"></a><!-- doxytag: member="rpmsq.c::ADD_REF" ref="9d94b6ded163b170e1fda99d19bfa387" args="(__tbl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADD_REF          </td>
          <td>(</td>
          <td class="paramtype">__tbl&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;/*@-noeffect@*/ (0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00172">172</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>, and <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>.
</div>
</div><p>
<a class="anchor" name="b100c291f35c45fd2872cf4f37e014a9"></a><!-- doxytag: member="rpmsq.c::CLEANUP_HANDLER" ref="b100c291f35c45fd2872cf4f37e014a9" args="(__handler, __arg, __oldtypeptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLEANUP_HANDLER          </td>
          <td>(</td>
          <td class="paramtype">__handler,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__arg,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__oldtypeptr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00174">174</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>.
</div>
</div><p>
<a class="anchor" name="572681ad4a7ce4465835719aeb3be786"></a><!-- doxytag: member="rpmsq.c::CLEANUP_RESET" ref="572681ad4a7ce4465835719aeb3be786" args="(__execute, __oldtype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLEANUP_RESET          </td>
          <td>(</td>
          <td class="paramtype">__execute,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__oldtype&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00175">175</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>.
</div>
</div><p>
<a class="anchor" name="286653e6c0351e4b96aabd56e39b3e4e"></a><!-- doxytag: member="rpmsq.c::DO_LOCK" ref="286653e6c0351e4b96aabd56e39b3e4e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DO_LOCK          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00169">169</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>, <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>, and <a class="el" href="rpmsq_8c-source.html#l00611">sigchld_cancel()</a>.
</div>
</div><p>
<a class="anchor" name="db7dcf4b4a5c6d71db97ac5ac56ea854"></a><!-- doxytag: member="rpmsq.c::DO_UNLOCK" ref="db7dcf4b4a5c6d71db97ac5ac56ea854" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DO_UNLOCK          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00170">170</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>, and <a class="el" href="rpmsq_8c-source.html#l00611">sigchld_cancel()</a>.
</div>
</div><p>
<a class="anchor" name="0e3013f3c24c97843f6e368b8258ce11"></a><!-- doxytag: member="rpmsq.c::INIT_LOCK" ref="0e3013f3c24c97843f6e368b8258ce11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_LOCK          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00171">171</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>.
</div>
</div><p>
<a class="anchor" name="ae730cd94e6b313bc0267c0a9d4cf901"></a><!-- doxytag: member="rpmsq.c::ME" ref="ae730cd94e6b313bc0267c0a9d4cf901" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ME          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(((void *)getpid()))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00179">179</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>, <a class="el" href="rpmsq_8c-source.html#l00401">rpmsqFork()</a>, <a class="el" href="rpmsq_8c-source.html#l00199">rpmsqInsert()</a>, <a class="el" href="rpmsq_8c-source.html#l00228">rpmsqRemove()</a>, <a class="el" href="rpmsq_8c-source.html#l00551">rpmsqWait()</a>, and <a class="el" href="rpmsq_8c-source.html#l00485">rpmsqWaitUnregister()</a>.
</div>
</div><p>
<a class="anchor" name="4906c737ef5f406f745ada183a34729c"></a><!-- doxytag: member="rpmsq.c::rpmsigTbl_sigchld" ref="4906c737ef5f406f745ada183a34729c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rpmsigTbl_sigchld&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[2])          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>, and <a class="el" href="rpmsq_8c-source.html#l00611">sigchld_cancel()</a>.
</div>
</div><p>
<a class="anchor" name="91499eb6cd81c56a78c7f9530b738a5c"></a><!-- doxytag: member="rpmsq.c::rpmsigTbl_sighup" ref="91499eb6cd81c56a78c7f9530b738a5c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rpmsigTbl_sighup&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[3])          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="07b3110b88f73ad2d709440bc463be83"></a><!-- doxytag: member="rpmsq.c::rpmsigTbl_sigint" ref="07b3110b88f73ad2d709440bc463be83" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rpmsigTbl_sigint&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[0])          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>.
</div>
</div><p>
<a class="anchor" name="5df24aaac5a34b0661d8513acbd7c932"></a><!-- doxytag: member="rpmsq.c::rpmsigTbl_sigpipe" ref="5df24aaac5a34b0661d8513acbd7c932" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rpmsigTbl_sigpipe&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[5])          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="82f3512dfd9c7f721bcec63354a13ece"></a><!-- doxytag: member="rpmsq.c::rpmsigTbl_sigquit" ref="82f3512dfd9c7f721bcec63354a13ece" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rpmsigTbl_sigquit&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[1])          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>.
</div>
</div><p>
<a class="anchor" name="f48055093679c365c039be16eea2e891"></a><!-- doxytag: member="rpmsq.c::rpmsigTbl_sigterm" ref="f48055093679c365c039be16eea2e891" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rpmsigTbl_sigterm&nbsp;&nbsp;&nbsp;(&amp;<a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[4])          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f8f3658c377bd4b7abba4173c6a372f3"></a><!-- doxytag: member="rpmsq.c::SAME_THREAD" ref="f8f3658c377bd4b7abba4173c6a372f3" args="(_a, _b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAME_THREAD          </td>
          <td>(</td>
          <td class="paramtype">_a,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_b&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(42)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00177">177</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
</div>
</div><p>
<a class="anchor" name="1f3b56943872a5e0a08aa39bd8632b1b"></a><!-- doxytag: member="rpmsq.c::SUB_REF" ref="1f3b56943872a5e0a08aa39bd8632b1b" args="(__tbl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUB_REF          </td>
          <td>(</td>
          <td class="paramtype">__tbl&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;/*@-noeffect@*/ (0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00173">173</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>, <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>, and <a class="el" href="rpmsq_8c-source.html#l00611">sigchld_cancel()</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="cc9c5128e482f1e40da3ca0e73c0e6b9"></a><!-- doxytag: member="rpmsq.c::rpmsqAction" ref="cc9c5128e482f1e40da3ca0e73c0e6b9" args="(int signum, void *info, void *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rpmsqAction           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>signum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default signal handler. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>signum</em>&nbsp;</td><td>signal number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>info</em>&nbsp;</td><td>(siginfo_t) signal info </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>signal context </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00292">292</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
References <a class="el" href="system_8h.html#a5e6580e8f12679392f66d3c9b146ab4">errno</a>, <a class="el" href="rpmsq_8h-source.html#l00037">rpmsqElem::q_forw</a>, <a class="el" href="rpmsq_8c-source.html#l00196">rpmsqQueue</a>, <a class="el" href="llex_8c-source.html#l00163">save</a>, and <a class="el" href="rpmsq_8c-source.html#l00271">rpmsig_s::signum</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>.
</div>
</div><p>
<a class="anchor" name="ab298b21cc58fe0059d907eac23e9a85"></a><!-- doxytag: member="rpmsq.c::rpmsqEnable" ref="ab298b21cc58fe0059d907eac23e9a85" args="(int signum, rpmsqAction_t handler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmsqEnable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>signum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmsq_8h.html#0efa2c49e28586bfa10ec3a10d72f957">rpmsqAction_t</a>&nbsp;</td>
          <td class="paramname"> <em>handler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enable or disable a signal handler. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>signum</em>&nbsp;</td><td>signal to enable (or disable if negative) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handler</em>&nbsp;</td><td>sa_sigaction handler (or NULL to use rpmsqHandler()) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>no. of refs, -1 on error </dd></dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00346">346</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
References <a class="el" href="rpmsq_8c-source.html#l00172">ADD_REF</a>, <a class="el" href="rpmsq_8c-source.html#l00169">DO_LOCK</a>, <a class="el" href="rpmsq_8h-source.html#l00047">rpmsqElem::id</a>, <a class="el" href="rpmsq_8c-source.html#l00179">ME</a>, <a class="el" href="rpmsq_8c-source.html#l00292">rpmsqAction()</a>, <a class="el" href="rpmsq_8c-source.html#l00196">rpmsqQueue</a>, and <a class="el" href="rpmsq_8c-source.html#l00173">SUB_REF</a>.
<p>
Referenced by <a class="el" href="rpmdb_8c-source.html#l01017">openDatabase()</a>, <a class="el" href="rpmdb_8c-source.html#l00869">rpmdbClose()</a>, <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>, <a class="el" href="rpmsq_8c-source.html#l00401">rpmsqFork()</a>, <a class="el" href="rpmsq_8c-source.html#l00485">rpmsqWaitUnregister()</a>, and <a class="el" href="rpmsq_8c-source.html#l00611">sigchld_cancel()</a>.
</div>
</div><p>
<a class="anchor" name="8c41fe74cc31e2ce1fd5e0d39dd598eb"></a><!-- doxytag: member="rpmsq.c::rpmsqExecve" ref="8c41fe74cc31e2ce1fd5e0d39dd598eb" args="(const char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmsqExecve           </td>
          <td>(</td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>argv</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute a command, returning its status. 
<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00636">636</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
References <a class="el" href="rpmsq_8c-source.html#l00172">ADD_REF</a>, <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="rpmsq_8c-source.html#l00174">CLEANUP_HANDLER</a>, <a class="el" href="rpmsq_8c-source.html#l00175">CLEANUP_RESET</a>, <a class="el" href="rpmsq_8c-source.html#l00169">DO_LOCK</a>, <a class="el" href="rpmsq_8c-source.html#l00170">DO_UNLOCK</a>, <a class="el" href="signature_8c-source.html#l00030">environ</a>, <a class="el" href="system_8h.html#a5e6580e8f12679392f66d3c9b146ab4">errno</a>, <a class="el" href="rpmsq_8c-source.html#l00171">INIT_LOCK</a>, <a class="el" href="rpmsq_8c.html#4906c737ef5f406f745ada183a34729c">rpmsigTbl_sigchld</a>, <a class="el" href="rpmsq_8c.html#07b3110b88f73ad2d709440bc463be83">rpmsigTbl_sigint</a>, <a class="el" href="rpmsq_8c.html#82f3512dfd9c7f721bcec63354a13ece">rpmsigTbl_sigquit</a>, <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>, <a class="el" href="rpmsq_8c-source.html#l00611">sigchld_cancel()</a>, and <a class="el" href="rpmsq_8c-source.html#l00173">SUB_REF</a>.
</div>
</div><p>
<a class="anchor" name="b019756ec1532c5ca43b435549b91fd5"></a><!-- doxytag: member="rpmsq.c::rpmsqFork" ref="b019756ec1532c5ca43b435549b91fd5" args="(rpmsq sq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t rpmsqFork           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmsqElem.html">rpmsq</a>&nbsp;</td>
          <td class="paramname"> <em>sq</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Fork a child process. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sq</em>&nbsp;</td><td>scriptlet queue element </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>fork(2) pid </dd></dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00401">401</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
References <a class="el" href="rpmsq_8h-source.html#l00039">rpmsqElem::child</a>, <a class="el" href="rpmsq_8c-source.html#l00179">ME</a>, <a class="el" href="rpmsq_8h-source.html#l00048">rpmsqElem::mutex</a>, <a class="el" href="rpmsq_8h-source.html#l00045">rpmsqElem::pipes</a>, <a class="el" href="rpmsq_8h-source.html#l00044">rpmsqElem::reaper</a>, <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>, and <a class="el" href="rpmsq_8c-source.html#l00199">rpmsqInsert()</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l00607">runScript()</a>.
</div>
</div><p>
<a class="anchor" name="0030a83127aa1d9d37421556895e95da"></a><!-- doxytag: member="rpmsq.c::rpmsqInsert" ref="0030a83127aa1d9d37421556895e95da" args="(void *elem, void *prev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmsqInsert           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>prev</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Insert node into from queue. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>elem</em>&nbsp;</td><td>node to <a class="el" href="structlink.html">link</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prev</em>&nbsp;</td><td>previous node from queue </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00199">199</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
References <a class="el" href="rpmsq_8h-source.html#l00039">rpmsqElem::child</a>, <a class="el" href="rpmsq_8h-source.html#l00047">rpmsqElem::id</a>, <a class="el" href="rpmsq_8c-source.html#l00179">ME</a>, <a class="el" href="rpmsq_8h-source.html#l00048">rpmsqElem::mutex</a>, <a class="el" href="rpmsq_8h-source.html#l00045">rpmsqElem::pipes</a>, <a class="el" href="rpmsq_8h-source.html#l00040">rpmsqElem::reaped</a>, <a class="el" href="rpmsq_8h-source.html#l00044">rpmsqElem::reaper</a>, <a class="el" href="rpmsq_8c-source.html#l00196">rpmsqQueue</a>, and <a class="el" href="rpmsq_8h-source.html#l00041">rpmsqElem::status</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00401">rpmsqFork()</a>.
</div>
</div><p>
<a class="anchor" name="75a46086c1b03bdc42ec058aeac2840d"></a><!-- doxytag: member="rpmsq.c::rpmsqJoin" ref="75a46086c1b03bdc42ec058aeac2840d" args="(void *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmsqJoin           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>thread</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait for thread to terminate. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>thread</em>&nbsp;</td><td>thread </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00592">592</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="fsm_8c-source.html#l00406">fsmNext()</a>, and <a class="el" href="psm_8c-source.html#l01340">rpmpsmNext()</a>.
</div>
</div><p>
<a class="anchor" name="cf3ba71cc424631b42f651ecd9ab8b75"></a><!-- doxytag: member="rpmsq.c::rpmsqRemove" ref="cf3ba71cc424631b42f651ecd9ab8b75" args="(void *elem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmsqRemove           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>elem</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove node from queue. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>elem</em>&nbsp;</td><td>node to <a class="el" href="structlink.html">link</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00228">228</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
References <a class="el" href="rpmsq_8h-source.html#l00039">rpmsqElem::child</a>, <a class="el" href="rpmsq_8h-source.html#l00047">rpmsqElem::id</a>, <a class="el" href="rpmsq_8c-source.html#l00179">ME</a>, <a class="el" href="rpmsq_8h-source.html#l00048">rpmsqElem::mutex</a>, <a class="el" href="rpmsq_8h-source.html#l00045">rpmsqElem::pipes</a>, <a class="el" href="rpmsq_8h-source.html#l00040">rpmsqElem::reaped</a>, <a class="el" href="rpmsq_8h-source.html#l00044">rpmsqElem::reaper</a>, and <a class="el" href="rpmsq_8h-source.html#l00041">rpmsqElem::status</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00485">rpmsqWaitUnregister()</a>.
</div>
</div><p>
<a class="anchor" name="144095ad8653fc52152e44ff91585c99"></a><!-- doxytag: member="rpmsq.c::rpmsqThread" ref="144095ad8653fc52152e44ff91585c99" args="(void *(*start)(void *arg), void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* rpmsqThread           </td>
          <td>(</td>
          <td class="paramtype">void *(*)(void *arg)&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call a function in a thread. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>start</em>&nbsp;</td><td>function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>function argument </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>thread pointer (NULL on error) </dd></dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00583">583</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="fsm_8c-source.html#l00406">fsmNext()</a>, and <a class="el" href="psm_8c-source.html#l01340">rpmpsmNext()</a>.
</div>
</div><p>
<a class="anchor" name="15ef5bcbc3fa59b996f71afb441ea173"></a><!-- doxytag: member="rpmsq.c::rpmsqThreadEqual" ref="15ef5bcbc3fa59b996f71afb441ea173" args="(void *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rpmsqThreadEqual           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>thread</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare thread with current thread. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>thread</em>&nbsp;</td><td>thread </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if not equal </dd></dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00600">600</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
</div>
</div><p>
<a class="anchor" name="4b70f81be474061cf19e44e6de80e4a9"></a><!-- doxytag: member="rpmsq.c::rpmsqWait" ref="4b70f81be474061cf19e44e6de80e4a9" args="(rpmsq sq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t rpmsqWait           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmsqElem.html">rpmsq</a>&nbsp;</td>
          <td class="paramname"> <em>sq</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait for child process to be reaped. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sq</em>&nbsp;</td><td>scriptlet queue element </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>reaped child pid </dd></dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00551">551</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
References <a class="el" href="rpmsq_8h-source.html#l00039">rpmsqElem::child</a>, <a class="el" href="rpmsq_8c-source.html#l00179">ME</a>, <a class="el" href="rpmsq_8h-source.html#l00040">rpmsqElem::reaped</a>, <a class="el" href="rpmsq_8h-source.html#l00044">rpmsqElem::reaper</a>, <a class="el" href="rpmsq_8c-source.html#l00485">rpmsqWaitUnregister()</a>, and <a class="el" href="rpmsq_8h-source.html#l00041">rpmsqElem::status</a>.
<p>
Referenced by <a class="el" href="psm_8c-source.html#l00476">psmWait()</a>.
</div>
</div><p>
<a class="anchor" name="9e00a2a2c3cb54b51e8d51b564873ebf"></a><!-- doxytag: member="rpmsq.c::rpmsqWaitUnregister" ref="9e00a2a2c3cb54b51e8d51b564873ebf" args="(rpmsq sq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int rpmsqWaitUnregister           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrpmsqElem.html">rpmsq</a>&nbsp;</td>
          <td class="paramname"> <em>sq</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait for child process to be reaped, and unregister SIGCHLD handler. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000117">Todo:</a></b></dt><dd>Rewrite to use waitpid on helper thread. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sq</em>&nbsp;</td><td>scriptlet queue element </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success </dd></dl>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00485">485</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
References <a class="el" href="rpmsq_8h-source.html#l00039">rpmsqElem::child</a>, <a class="el" href="rpmsq_8c-source.html#l00179">ME</a>, <a class="el" href="rpmsq_8h-source.html#l00043">rpmsqElem::ms_scriptlets</a>, <a class="el" href="rpmsq_8h-source.html#l00048">rpmsqElem::mutex</a>, <a class="el" href="rpmsq_8h-source.html#l00042">rpmsqElem::op</a>, <a class="el" href="rpmsq_8h-source.html#l00045">rpmsqElem::pipes</a>, <a class="el" href="rpmsq_8h-source.html#l00040">rpmsqElem::reaped</a>, <a class="el" href="rpmsq_8h-source.html#l00044">rpmsqElem::reaper</a>, <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>, <a class="el" href="rpmsq_8c-source.html#l00228">rpmsqRemove()</a>, <a class="el" href="rpmsw_8c-source.html#l00241">rpmswEnter()</a>, and <a class="el" href="rpmsw_8c-source.html#l00257">rpmswExit()</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00551">rpmsqWait()</a>.
</div>
</div><p>
<a class="anchor" name="cc88dc46a2dd6fa4be082e75cf98c7ec"></a><!-- doxytag: member="rpmsq.c::sigchld_cancel" ref="cc88dc46a2dd6fa4be082e75cf98c7ec" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void sigchld_cancel           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
SIGCHLD cancellation handler. 
<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00611">611</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
References <a class="el" href="rpmsq_8c-source.html#l00169">DO_LOCK</a>, <a class="el" href="rpmsq_8c-source.html#l00170">DO_UNLOCK</a>, <a class="el" href="system_8h.html#a5e6580e8f12679392f66d3c9b146ab4">errno</a>, <a class="el" href="rpmsq_8c.html#4906c737ef5f406f745ada183a34729c">rpmsigTbl_sigchld</a>, <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>, and <a class="el" href="rpmsq_8c-source.html#l00173">SUB_REF</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00636">rpmsqExecve()</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="dcfcab606a7cc09228fbc43fc48b6dd7"></a><!-- doxytag: member="rpmsq.c::_rpmsq_debug" ref="dcfcab606a7cc09228fbc43fc48b6dd7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rpmsq_8h.html#dcfcab606a7cc09228fbc43fc48b6dd7">_rpmsq_debug</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00189">189</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
</div>
</div><p>
<a class="anchor" name="d9e87f2aa3b4fb56f03e1f0c1e092586"></a><!-- doxytag: member="rpmsq.c::rpmsigTbl" ref="d9e87f2aa3b4fb56f03e1f0c1e092586" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrpmsig__s.html">rpmsig_s</a>  <a class="el" href="rpmsq_8c.html#d9e87f2aa3b4fb56f03e1f0c1e092586">rpmsigTbl</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f6a694606c16ad0a1383dbb5e2d495af"></a><!-- doxytag: member="rpmsq.c::rpmsqCaught" ref="f6a694606c16ad0a1383dbb5e2d495af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sigset_t <a class="el" href="rpmsq_8h.html#f6a694606c16ad0a1383dbb5e2d495af">rpmsqCaught</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00266">266</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmdb_8c-source.html#l00747">rpmdbCheckSignals()</a>, <a class="el" href="rpmdb_8c-source.html#l00703">rpmdbCheckTerminate()</a>, and <a class="el" href="rpmmodule_8c-source.html#l00075">signalsCaught()</a>.
</div>
</div><p>
<a class="anchor" name="f71f1bada7f979a9a276f2da4f2afc55"></a><!-- doxytag: member="rpmsq.c::rpmsqQueue" ref="f71f1bada7f979a9a276f2da4f2afc55" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrpmsqElem.html">rpmsq</a> <a class="el" href="rpmsq_8h.html#f71f1bada7f979a9a276f2da4f2afc55">rpmsqQueue</a> = &amp;<a class="el" href="rpmsq_8c.html#767a6eaf78cf19a6763fbd92aac23520">rpmsqRock</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00196">196</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
<p>
Referenced by <a class="el" href="rpmsq_8c-source.html#l00292">rpmsqAction()</a>, <a class="el" href="rpmsq_8c-source.html#l00346">rpmsqEnable()</a>, and <a class="el" href="rpmsq_8c-source.html#l00199">rpmsqInsert()</a>.
</div>
</div><p>
<a class="anchor" name="767a6eaf78cf19a6763fbd92aac23520"></a><!-- doxytag: member="rpmsq.c::rpmsqRock" ref="767a6eaf78cf19a6763fbd92aac23520" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrpmsqElem.html">rpmsqElem</a> <a class="el" href="rpmsq_8c.html#767a6eaf78cf19a6763fbd92aac23520">rpmsqRock</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="rpmsq_8c-source.html#l00192">192</a> of file <a class="el" href="rpmsq_8c-source.html">rpmsq.c</a>.
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:56 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
