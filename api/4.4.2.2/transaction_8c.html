<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rpm: lib/transaction.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>lib/transaction.c File Reference</h1><code>#include &quot;<a class="el" href="system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;<a class="el" href="rpmlib_8h-source.html">rpmlib.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="rpmmacro_8h-source.html">rpmmacro.h</a>&gt;</code><br>
<code>#include &quot;<a class="el" href="fsm_8h-source.html">fsm.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="psm_8h-source.html">psm.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmdb_8h-source.html">rpmdb.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmds_8h-source.html">rpmds.h</a>&quot;</code><br>
<code>#include &quot;rpmlock.h&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmfi_8h-source.html">rpmfi.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmte_8h-source.html">rpmte.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmts_8h-source.html">rpmts.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="cpio_8h-source.html">cpio.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="fprint_8h-source.html">fprint.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="legacy_8h-source.html">legacy.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="misc_8h-source.html">misc.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="debug_8h-source.html">debug.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="rpmcli_8h-source.html">rpmcli.h</a>&quot;</code><br>

<p>
<a href="transaction_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#23b390a0b6abdc14c30d53d89a40fd7f">_RPMFI_INTERNAL</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#9e126d6a280b4a40319ab4f35b4350ef">_RPMTE_INTERNAL</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#ee996b667551ff312d747c94ed24448f">_RPMTS_INTERNAL</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#0121c727a56f3119cffef6d6cd3eb370">ISROOT</a>(_d)&nbsp;&nbsp;&nbsp;(((_d)[0] == '/' &amp;&amp; (_d)[1] == '\0') ? &quot;&quot; : (_d))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#4bb6b33cdeef3133a89821a0c483a0dd">NOTIFY</a>(_ts, _al)&nbsp;&nbsp;&nbsp;/*@i@*/ if ((_ts)-&gt;notify) (void) (_ts)-&gt;notify _al</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmcli.html#gcef1f66534a5b1bcf236deb95faa369b">rpmShowProgress</a> (const void *arg, const <a class="el" href="rpmmessages_8h.html#eab208082d1a47059c0fd07abd0b2d20">rpmCallbackType</a> what, const unsigned long amount, const unsigned long total, <a class="el" href="rpmmessages_8h.html#427d1be6429aaad2c8afa6fd7386048f">fnpyKey</a> key, void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The rpm CLI generic transaction callback handler.  <a href="group__rpmcli.html#gcef1f66534a5b1bcf236deb95faa369b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#d0a167bbce57d2180c18cc597aa15454">archOkay</a> (const char *pkgArch)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#4c0fccd105144a8482864132e704b94a">osOkay</a> (const char *pkgOs)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#c1b193f33cc9986634695963e93ee879">sharedCmp</a> (const void *one, const void *two)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#1754203fb606b100c52443bc66c2afbd">handleInstInstalledFiles</a> (const <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a> p, <a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a> fi, sharedFileInfo shared, int sharedCount, int reportConflicts)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
  </table>
</dl>
 <a href="#1754203fb606b100c52443bc66c2afbd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#7bf64cb5556954d46da2a2f9d758e120">handleRmvdInstalledFiles</a> (const <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a> fi, sharedFileInfo shared, int sharedCount)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#08c9c73905fedb6c5bb1d9207ebf01c7">fpsCompare</a> (const void *one, const void *two)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#67117af0edd9043ea617d39a20191b78">findFps</a> (const struct <a class="el" href="structfingerPrint__s.html">fingerPrint_s</a> *fiFps, const struct <a class="el" href="structfingerPrint__s.html">fingerPrint_s</a> *otherFps, int otherFc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#2251dd0337abfab176177e6c990999e4">handleOverlappedFiles</a> (const <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const <a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a> p, <a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a> fi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update disk space needs on each partition for this package's files.  <a href="#2251dd0337abfab176177e6c990999e4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#8ca91a18cf7d35ae8570d9df0251c34c">ensureOlder</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, const <a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a> p, const <a class="el" href="structheaderToken__s.html">Header</a> h)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ensure that current package is newer than installed package.  <a href="#8ca91a18cf7d35ae8570d9df0251c34c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#a3a6289c30867dad6bf0a55e5ac18662">skipFiles</a> (const <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a> fi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Skip any files that do not match install policies.  <a href="#a3a6289c30867dad6bf0a55e5ac18662"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#84fff53587ada32fff4921d9862ae1d0">rpmtsiFi</a> (const <a class="el" href="rpmte_8h.html#19408fdbdcfced5a99647806e309f481">rpmtsi</a> tsi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return transaction element's file info.  <a href="#84fff53587ada32fff4921d9862ae1d0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#424e7db39fc5057eba96dc33ba066ae4">_rpmtsRollback</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> rollbackTransaction)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is not a generalized function to be called from outside librpm.  <a href="#424e7db39fc5057eba96dc33ba066ae4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#d3462a5fa7b14f48dd33cc4a06578052">getRepackageHeaderFromTE</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a> te, <a class="el" href="structheaderToken__s.html">Header</a> *hdrp, const char **fnp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the repackaged header and filename from the repackage directory.  <a href="#d3462a5fa7b14f48dd33cc4a06578052"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#e9e4510393b5d87eeb093ecaf8ea929b">_rpmtsAddRollbackElement</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> rollbackTransaction, <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> runningTransaction, <a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a> te)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is not a generalized function to be called from outside librpm.  <a href="#e9e4510393b5d87eeb093ecaf8ea929b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rpmts.html#g697cc25081d61fa210059e5cc3132fd6">rpmtsRun</a> (<a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a> ts, <a class="el" href="structrpmps__s.html">rpmps</a> okProbs, <a class="el" href="rpmlib_8h.html#c5cd360921e00aea76a7fb32b6339630">rpmprobFilterFlags</a> ignoreSet)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process all package elements in a transaction set.  <a href="group__rpmts.html#g697cc25081d61fa210059e5cc3132fd6"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#a574c3601ca74717a42fa7c121f986f9">_fps_debug</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8c.html#de4e269a1a065f951fab6b3e456cf3c0">_linear_fps_search</a> = 0</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
Definition in file <a class="el" href="transaction_8c-source.html">transaction.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="23b390a0b6abdc14c30d53d89a40fd7f"></a><!-- doxytag: member="transaction.c::_RPMFI_INTERNAL" ref="23b390a0b6abdc14c30d53d89a40fd7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _RPMFI_INTERNAL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00019">19</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
</div>
</div><p>
<a class="anchor" name="9e126d6a280b4a40319ab4f35b4350ef"></a><!-- doxytag: member="transaction.c::_RPMTE_INTERNAL" ref="9e126d6a280b4a40319ab4f35b4350ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _RPMTE_INTERNAL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00022">22</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
</div>
</div><p>
<a class="anchor" name="ee996b667551ff312d747c94ed24448f"></a><!-- doxytag: member="transaction.c::_RPMTS_INTERNAL" ref="ee996b667551ff312d747c94ed24448f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _RPMTS_INTERNAL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00025">25</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
</div>
</div><p>
<a class="anchor" name="0121c727a56f3119cffef6d6cd3eb370"></a><!-- doxytag: member="transaction.c::ISROOT" ref="0121c727a56f3119cffef6d6cd3eb370" args="(_d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ISROOT          </td>
          <td>(</td>
          <td class="paramtype">_d&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(((_d)[0] == '/' &amp;&amp; (_d)[1] == '\0') ? &quot;&quot; : (_d))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00301">301</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l00361">findFps()</a>, and <a class="el" href="transaction_8c-source.html#l00306">fpsCompare()</a>.
</div>
</div><p>
<a class="anchor" name="4bb6b33cdeef3133a89821a0c483a0dd"></a><!-- doxytag: member="transaction.c::NOTIFY" ref="4bb6b33cdeef3133a89821a0c483a0dd" args="(_ts, _al)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NOTIFY          </td>
          <td>(</td>
          <td class="paramtype">_ts,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_al&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;/*@i@*/ if ((_ts)-&gt;notify) (void) (_ts)-&gt;notify _al</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l01404">1404</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="e9e4510393b5d87eeb093ecaf8ea929b"></a><!-- doxytag: member="transaction.c::_rpmtsAddRollbackElement" ref="e9e4510393b5d87eeb093ecaf8ea929b" args="(rpmts rollbackTransaction, rpmts runningTransaction, rpmte te)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> _rpmtsAddRollbackElement           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>rollbackTransaction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>runningTransaction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a>&nbsp;</td>
          <td class="paramname"> <em>te</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is not a generalized function to be called from outside librpm. 
<p>
It is called internally by <a class="el" href="group__rpmts.html#g697cc25081d61fa210059e5cc3132fd6" title="Process all package elements in a transaction set.">rpmtsRun()</a> to add elements to its autorollback transaction. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rollbackTransaction</em>&nbsp;</td><td>rollback transaction </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>runningTransaction</em>&nbsp;</td><td>running transaction (the one you want to rollback) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>te</em>&nbsp;</td><td>Transaction element. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>RPMRC_OK, or RPMRC_FAIL </dd></dl>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l01254">1254</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="transaction_8c-source.html#l01115">getRepackageHeaderFromTE()</a>, <a class="el" href="hdrinline_8h-source.html#l00047">headerFree()</a>, <a class="el" href="hdrinline_8h-source.html#l00062">headerLink()</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00016">RPMMESS_FATALERROR</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmlib_8h-source.html#l00023">RPMRC_FAIL</a>, <a class="el" href="rpmlib_8h-source.html#l00022">RPMRC_NOTFOUND</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmte_8c-source.html#l00240">rpmteDBInstance()</a>, <a class="el" href="rpmte_8c-source.html#l00272">rpmteN()</a>, <a class="el" href="rpmte_8c-source.html#l00485">rpmteNEVRA()</a>, <a class="el" href="rpmte_8c-source.html#l00267">rpmteType()</a>, <a class="el" href="depends_8c-source.html#l00393">rpmtsAddEraseElement()</a>, <a class="el" href="depends_8c-source.html#l00127">rpmtsAddInstallElement()</a>, <a class="el" href="rpmte_8h-source.html#l00576">rpmtsiFree</a>, <a class="el" href="rpmte_8h-source.html#l00598">rpmtsiInit</a>, <a class="el" href="rpmte_8c-source.html#l00673">rpmtsiNext()</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, <a class="el" href="rpmte_8h-source.html#l00030">TR_ADDED</a>, and <a class="el" href="rpmte_8h-source.html#l00031">TR_REMOVED</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="424e7db39fc5057eba96dc33ba066ae4"></a><!-- doxytag: member="transaction.c::_rpmtsRollback" ref="424e7db39fc5057eba96dc33ba066ae4" args="(rpmts rollbackTransaction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> _rpmtsRollback           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>rollbackTransaction</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is not a generalized function to be called from outside librpm. 
<p>
It is called internally by <a class="el" href="group__rpmts.html#g697cc25081d61fa210059e5cc3132fd6" title="Process all package elements in a transaction set.">rpmtsRun()</a> to rollback a failed transaction. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rollbackTransaction</em>&nbsp;</td><td>rollback transaction </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>RPMRC_OK, or RPMRC_FAIL </dd></dl>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00990">990</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmmessages_8h-source.html#l00015">RPMMESS_ERROR</a>, <a class="el" href="rpmmessages_8h-source.html#l00013">RPMMESS_NORMAL</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmlib_8h-source.html#l00806">RPMPROB_FILTER_OLDPACKAGE</a>, <a class="el" href="rpmlib_8h-source.html#l00804">RPMPROB_FILTER_REPLACENEWFILES</a>, <a class="el" href="rpmlib_8h-source.html#l00805">RPMPROB_FILTER_REPLACEOLDFILES</a>, <a class="el" href="rpmlib_8h-source.html#l00802">RPMPROB_FILTER_REPLACEPKG</a>, <a class="el" href="rpmps_8c-source.html#l00060">rpmpsFree()</a>, <a class="el" href="rpmps_8c-source.html#l00046">rpmpsNumProblems()</a>, <a class="el" href="rpmps_8c-source.html#l00303">rpmpsPrint()</a>, <a class="el" href="rpmte_8c-source.html#l00267">rpmteType()</a>, <a class="el" href="depends_8c-source.html#l01672">rpmtsCheck()</a>, <a class="el" href="rpmts_8c-source.html#l00850">rpmtsFree()</a>, <a class="el" href="rpmts_8c-source.html#l01104">rpmtsGetTid()</a>, <a class="el" href="rpmte_8h-source.html#l00576">rpmtsiFree</a>, <a class="el" href="rpmte_8h-source.html#l00598">rpmtsiInit</a>, <a class="el" href="rpmte_8c-source.html#l00673">rpmtsiNext()</a>, <a class="el" href="depends_8c-source.html#l01211">rpmtsOrder()</a>, <a class="el" href="rpmts_8c-source.html#l00744">rpmtsProblems()</a>, <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>, <a class="el" href="rpmte_8h-source.html#l00030">TR_ADDED</a>, and <a class="el" href="rpmte_8h-source.html#l00031">TR_REMOVED</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="d0a167bbce57d2180c18cc597aa15454"></a><!-- doxytag: member="transaction.c::archOkay" ref="d0a167bbce57d2180c18cc597aa15454" args="(const char *pkgArch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int archOkay           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>pkgArch</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00075">75</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00602">RPM_MACHTABLE_INSTARCH</a>, and <a class="el" href="rpmrc_8c-source.html#l01467">rpmMachineScore()</a>.
<p>
Referenced by <a class="el" href="rpmcache_8c-source.html#l00181">ftsStashLatest()</a>, and <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="8ca91a18cf7d35ae8570d9df0251c34c"></a><!-- doxytag: member="transaction.c::ensureOlder" ref="8ca91a18cf7d35ae8570d9df0251c34c" args="(rpmts ts, const rpmte p, const Header h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ensureOlder           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a>&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structheaderToken__s.html">Header</a>&nbsp;</td>
          <td class="paramname"> <em>h</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Ensure that current package is newer than installed package. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>current transaction element </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>installed header </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if not newer, 1 if okay </dd></dl>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00680">680</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmds_8c-source.html#l00023">_rpmds_nopromote</a>, <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="rpmts_8c-source.html#l00071">hGetNEVR()</a>, <a class="el" href="rpmds_8c-source.html#l00054">rpmdsFree()</a>, <a class="el" href="rpmds_8c-source.html#l01193">rpmdsNVRMatchesDep()</a>, <a class="el" href="rpmds_8c-source.html#l00501">rpmdsSingle()</a>, <a class="el" href="rpmps_8h-source.html#l00036">RPMPROB_OLDPACKAGE</a>, <a class="el" href="rpmps_8c-source.html#l00081">rpmpsAppend()</a>, <a class="el" href="rpmps_8c-source.html#l00060">rpmpsFree()</a>, <a class="el" href="rpmlib_8h-source.html#l00504">RPMSENSE_EQUAL</a>, <a class="el" href="rpmlib_8h-source.html#l00502">RPMSENSE_LESS</a>, <a class="el" href="rpmlib_8h-source.html#l00327">RPMTAG_REQUIRENAME</a>, <a class="el" href="rpmte_8c-source.html#l00277">rpmteE()</a>, <a class="el" href="rpmte_8c-source.html#l00497">rpmteKey()</a>, <a class="el" href="rpmte_8c-source.html#l00272">rpmteN()</a>, <a class="el" href="rpmte_8c-source.html#l00480">rpmteNEVR()</a>, <a class="el" href="rpmte_8c-source.html#l00287">rpmteR()</a>, <a class="el" href="rpmte_8c-source.html#l00282">rpmteV()</a>, <a class="el" href="rpmts_8c-source.html#l00744">rpmtsProblems()</a>, and <a class="el" href="system_8h.html#58841684f76853b313e27e663c850381">stpcpy()</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="67117af0edd9043ea617d39a20191b78"></a><!-- doxytag: member="transaction.c::findFps" ref="67117af0edd9043ea617d39a20191b78" args="(const struct fingerPrint_s *fiFps, const struct fingerPrint_s *otherFps, int otherFc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int findFps           </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structfingerPrint__s.html">fingerPrint_s</a> *&nbsp;</td>
          <td class="paramname"> <em>fiFps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structfingerPrint__s.html">fingerPrint_s</a> *&nbsp;</td>
          <td class="paramname"> <em>otherFps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>otherFc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00361">361</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="transaction_8c-source.html#l00304">_fps_debug</a>, <a class="el" href="transaction_8c-source.html#l00359">_linear_fps_search</a>, <a class="el" href="fprint_8h-source.html#l00049">fingerPrint_s::baseName</a>, <a class="el" href="fprint_8h-source.html#l00028">fprintCacheEntry_s::dirName</a>, <a class="el" href="fprint_8h-source.html#l00046">fingerPrint_s::entry</a>, <a class="el" href="fprint_8h-source.html#l00056">FP_EQUAL</a>, <a class="el" href="transaction_8c-source.html#l00306">fpsCompare()</a>, <a class="el" href="transaction_8c-source.html#l00301">ISROOT</a>, and <a class="el" href="fprint_8h-source.html#l00048">fingerPrint_s::subDir</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l00454">handleOverlappedFiles()</a>.
</div>
</div><p>
<a class="anchor" name="08c9c73905fedb6c5bb1d9207ebf01c7"></a><!-- doxytag: member="transaction.c::fpsCompare" ref="08c9c73905fedb6c5bb1d9207ebf01c7" args="(const void *one, const void *two)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int fpsCompare           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>two</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00306">306</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="transaction_8c-source.html#l00304">_fps_debug</a>, <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="fprint_8h-source.html#l00049">fingerPrint_s::baseName</a>, <a class="el" href="fprint_8h-source.html#l00028">fprintCacheEntry_s::dirName</a>, <a class="el" href="fprint_8h-source.html#l00046">fingerPrint_s::entry</a>, <a class="el" href="transaction_8c-source.html#l00301">ISROOT</a>, <a class="el" href="system_8h.html#58841684f76853b313e27e663c850381">stpcpy()</a>, and <a class="el" href="fprint_8h-source.html#l00048">fingerPrint_s::subDir</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l00361">findFps()</a>.
</div>
</div><p>
<a class="anchor" name="d3462a5fa7b14f48dd33cc4a06578052"></a><!-- doxytag: member="transaction.c::getRepackageHeaderFromTE" ref="d3462a5fa7b14f48dd33cc4a06578052" args="(rpmts ts, rpmte te, Header *hdrp, const char **fnp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#f1718b0bac61cc03eaf3e3cb02806fb3">rpmRC</a> getRepackageHeaderFromTE           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a>&nbsp;</td>
          <td class="paramname"> <em>te</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheaderToken__s.html">Header</a> *&nbsp;</td>
          <td class="paramname"> <em>hdrp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>fnp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the repackaged header and filename from the repackage directory. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000084">Todo:</a></b></dt><dd>Find a suitable home for this function. </dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000084">Todo:</a></b></dt><dd>This function creates an IDTX everytime it is called. Needs to be made more efficient (only create on per running transaction). </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>rpm transaction </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>te</em>&nbsp;</td><td>transaction element </td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hdrp</em>&nbsp;</td><td>Repackaged header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fnp</em>&nbsp;</td><td>Repackaged package's path (transaction key) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>RPMRC_NOTFOUND or RPMRC_OK </dd></dl>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l01115">1115</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="rpmcli_8h-source.html#l00624">IDT_s::h</a>, <a class="el" href="hdrinline_8h-source.html#l00047">headerFree()</a>, <a class="el" href="hdrinline_8h-source.html#l00268">headerGetEntry()</a>, <a class="el" href="hdrinline_8h-source.html#l00062">headerLink()</a>, <a class="el" href="rpmcli_8h-source.html#l00640">IDTindex_s::idt</a>, <a class="el" href="rpminstall_8c-source.html#l00917">IDTXfree()</a>, <a class="el" href="rpminstall_8c-source.html#l01012">IDTXglob()</a>, <a class="el" href="rpmcli_8h-source.html#l00623">IDT_s::key</a>, <a class="el" href="rpmcli_8h-source.html#l00638">IDTindex_s::nidt</a>, <a class="el" href="macro_8c-source.html#l02116">rpmExpand()</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmlib_8h-source.html#l00022">RPMRC_NOTFOUND</a>, <a class="el" href="rpmlib_8h-source.html#l00021">RPMRC_OK</a>, <a class="el" href="rpmlib_8h-source.html#l00264">RPMTAG_NAME</a>, <a class="el" href="rpmlib_8h-source.html#l00412">RPMTAG_REMOVETID</a>, <a class="el" href="rpmte_8c-source.html#l00272">rpmteN()</a>, <a class="el" href="rpmts_8c-source.html#l01104">rpmtsGetTid()</a>, <a class="el" href="rpmps_8c-source.html#l00182">snprintf()</a>, <a class="el" href="rpmcli_8h-source.html#l00626">IDT_s::u32</a>, and <a class="el" href="structIDT__s.html#0b811c259b849e7716056221d2a8d9be">IDT_s::val</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01254">_rpmtsAddRollbackElement()</a>.
</div>
</div><p>
<a class="anchor" name="1754203fb606b100c52443bc66c2afbd"></a><!-- doxytag: member="transaction.c::handleInstInstalledFiles" ref="1754203fb606b100c52443bc66c2afbd" args="(const rpmts ts, rpmte p, rpmfi fi, sharedFileInfo shared, int sharedCount, int reportConflicts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int handleInstInstalledFiles           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a>&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a>&nbsp;</td>
          <td class="paramname"> <em>fi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sharedFileInfo&nbsp;</td>
          <td class="paramname"> <em>shared</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sharedCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>reportConflicts</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
  </table>
</dl>

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fi</em>&nbsp;</td><td>file info set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>shared</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sharedCount</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reportConflicts</em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00117">117</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="cpio_8h-source.html#l00068">CPIO_SBIT_CHECK</a>, <a class="el" href="rpmlib_8h-source.html#l00835">FA_CREATE</a>, <a class="el" href="rpmlib_8h-source.html#l00845">FA_SKIPCOLOR</a>, <a class="el" href="rpmts_8c-source.html#l00071">hGetNEVR()</a>, <a class="el" href="rpmtool_8c-source.html#l00102">omode</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmfi_8c-source.html#l00109">rpmfiBN()</a>, <a class="el" href="rpmfi_8c-source.html#l00518">rpmfiCompare()</a>, <a class="el" href="rpmfi_8c-source.html#l00547">rpmfiDecideFate()</a>, <a class="el" href="rpmfi_8c-source.html#l00122">rpmfiDN()</a>, <a class="el" href="rpmfi_8c-source.html#l00282">rpmfiFColor()</a>, <a class="el" href="rpmfi_8c-source.html#l00155">rpmfiFFlags()</a>, <a class="el" href="rpmfi_8c-source.html#l00181">rpmfiFMode()</a>, <a class="el" href="rpmfi_8c-source.html#l01151">rpmfiFree()</a>, <a class="el" href="rpmfi_8c-source.html#l00233">rpmfiFSize()</a>, <a class="el" href="rpmfi_8c-source.html#l00434">rpmfiInit()</a>, <a class="el" href="rpmlib_8h-source.html#l00477">RPMFILE_CONFIG</a>, <a class="el" href="rpmlib_8h-source.html#l00483">RPMFILE_GHOST</a>, <a class="el" href="rpmlib_8h-source.html#l00462">RPMFILE_STATE_NORMAL</a>, <a class="el" href="rpmfi_8c-source.html#l01263">rpmfiNew()</a>, <a class="el" href="rpmfi_8c-source.html#l00410">rpmfiNext()</a>, <a class="el" href="rpmfi_8c-source.html#l00079">rpmfiSetFX()</a>, <a class="el" href="rpmps_8h-source.html#l00035">RPMPROB_FILE_CONFLICT</a>, <a class="el" href="rpmps_8c-source.html#l00081">rpmpsAppend()</a>, <a class="el" href="rpmps_8c-source.html#l00060">rpmpsFree()</a>, <a class="el" href="rpmlib_8h-source.html#l00400">RPMTAG_BASENAMES</a>, <a class="el" href="rpmte_8c-source.html#l00307">rpmteColor()</a>, <a class="el" href="rpmte_8c-source.html#l00497">rpmteKey()</a>, <a class="el" href="rpmte_8c-source.html#l00480">rpmteNEVR()</a>, <a class="el" href="rpmlib_8h-source.html#l00975">RPMTRANS_FLAG_ALLFILES</a>, <a class="el" href="rpmts_8c-source.html#l01463">rpmtsColor()</a>, <a class="el" href="rpmts_8c-source.html#l01416">rpmtsFlags()</a>, <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>, <a class="el" href="rpmts_8c-source.html#l01478">rpmtsPrefColor()</a>, <a class="el" href="rpmts_8c-source.html#l00744">rpmtsProblems()</a>, <a class="el" href="rpmmalloc_8c-source.html#l00034">xcalloc()</a>, <a class="el" href="rpmlib_8h-source.html#l00848">XFA_SKIPPING</a>, and <a class="el" href="rpmmalloc_8c-source.html#l00045">xrealloc()</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="2251dd0337abfab176177e6c990999e4"></a><!-- doxytag: member="transaction.c::handleOverlappedFiles" ref="2251dd0337abfab176177e6c990999e4" args="(const rpmts ts, const rpmte p, rpmfi fi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void handleOverlappedFiles           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rpmlib_8h.html#595f1393fd2daf70aed8652ebc7d5dae">rpmte</a>&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a>&nbsp;</td>
          <td class="paramname"> <em>fi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update disk space needs on each partition for this package's files. 
<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00454">454</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="fprint_8h-source.html#l00029">fprintCacheEntry_s::dev</a>, <a class="el" href="legacy_8c-source.html#l00148">domd5()</a>, <a class="el" href="fprint_8h-source.html#l00046">fingerPrint_s::entry</a>, <a class="el" href="rpmlib_8h-source.html#l00841">FA_ALTNAME</a>, <a class="el" href="rpmlib_8h-source.html#l00838">FA_BACKUP</a>, <a class="el" href="rpmlib_8h-source.html#l00835">FA_CREATE</a>, <a class="el" href="rpmlib_8h-source.html#l00842">FA_ERASE</a>, <a class="el" href="rpmlib_8h-source.html#l00840">FA_SKIP</a>, <a class="el" href="rpmlib_8h-source.html#l00845">FA_SKIPCOLOR</a>, <a class="el" href="rpmlib_8h-source.html#l00834">FA_UNKNOWN</a>, <a class="el" href="transaction_8c-source.html#l00361">findFps()</a>, <a class="el" href="rpmhash_8c-source.html#l00182">htGetEntry()</a>, <a class="el" href="rpmlog_8c-source.html#l00028">recs</a>, <a class="el" href="rpmfi_8c-source.html#l00518">rpmfiCompare()</a>, <a class="el" href="rpmfi_8c-source.html#l00642">rpmfiConfigConflict()</a>, <a class="el" href="rpmfi_8c-source.html#l00058">rpmfiFC()</a>, <a class="el" href="rpmfi_8c-source.html#l00282">rpmfiFColor()</a>, <a class="el" href="rpmfi_8c-source.html#l00155">rpmfiFFlags()</a>, <a class="el" href="rpmfi_8c-source.html#l00181">rpmfiFMode()</a>, <a class="el" href="rpmfi_8c-source.html#l00135">rpmfiFN()</a>, <a class="el" href="rpmfi_8c-source.html#l00233">rpmfiFSize()</a>, <a class="el" href="rpmfi_8c-source.html#l00194">rpmfiFState()</a>, <a class="el" href="rpmfi_8c-source.html#l00434">rpmfiInit()</a>, <a class="el" href="rpmlib_8h-source.html#l00477">RPMFILE_CONFIG</a>, <a class="el" href="rpmlib_8h-source.html#l00481">RPMFILE_NOREPLACE</a>, <a class="el" href="rpmlib_8h-source.html#l00462">RPMFILE_STATE_NORMAL</a>, <a class="el" href="rpmfi_8c-source.html#l00207">rpmfiMD5()</a>, <a class="el" href="rpmfi_8c-source.html#l00410">rpmfiNext()</a>, <a class="el" href="rpmfi_8c-source.html#l00079">rpmfiSetFX()</a>, <a class="el" href="rpmlib_8h-source.html#l00804">RPMPROB_FILTER_REPLACENEWFILES</a>, <a class="el" href="rpmps_8h-source.html#l00034">RPMPROB_NEW_FILE_CONFLICT</a>, <a class="el" href="rpmps_8c-source.html#l00081">rpmpsAppend()</a>, <a class="el" href="rpmps_8c-source.html#l00060">rpmpsFree()</a>, <a class="el" href="rpmte_8c-source.html#l00497">rpmteKey()</a>, <a class="el" href="rpmte_8c-source.html#l00480">rpmteNEVR()</a>, <a class="el" href="rpmte_8c-source.html#l00267">rpmteType()</a>, <a class="el" href="rpmts_8c-source.html#l01463">rpmtsColor()</a>, <a class="el" href="rpmts_8c-source.html#l01411">rpmtsFilterFlags()</a>, <a class="el" href="rpmts_8c-source.html#l01478">rpmtsPrefColor()</a>, <a class="el" href="rpmts_8c-source.html#l00744">rpmtsProblems()</a>, <a class="el" href="rpmts_8c-source.html#l01287">rpmtsUpdateDSI()</a>, <a class="el" href="rpmte_8h-source.html#l00030">TR_ADDED</a>, <a class="el" href="rpmte_8h-source.html#l00031">TR_REMOVED</a>, and <a class="el" href="rpmlib_8h-source.html#l00848">XFA_SKIPPING</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="7bf64cb5556954d46da2a2f9d758e120"></a><!-- doxytag: member="transaction.c::handleRmvdInstalledFiles" ref="7bf64cb5556954d46da2a2f9d758e120" args="(const rpmts ts, rpmfi fi, sharedFileInfo shared, int sharedCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int handleRmvdInstalledFiles           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a>&nbsp;</td>
          <td class="paramname"> <em>fi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sharedFileInfo&nbsp;</td>
          <td class="paramname"> <em>shared</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sharedCount</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00261">261</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00840">FA_SKIP</a>, <a class="el" href="rpmdb_8c-source.html#l01677">rpmdbFreeIterator()</a>, <a class="el" href="rpmlib_8h-source.html#l00217">RPMDBI_PACKAGES</a>, <a class="el" href="rpmdb_8c-source.html#l02166">rpmdbNextIterator()</a>, <a class="el" href="rpmlib_8h-source.html#l00462">RPMFILE_STATE_NORMAL</a>, <a class="el" href="rpmlib_8h-source.html#l00301">RPMTAG_FILESTATES</a>, and <a class="el" href="rpmts_8c-source.html#l00256">rpmtsInitIterator()</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="4c0fccd105144a8482864132e704b94a"></a><!-- doxytag: member="transaction.c::osOkay" ref="4c0fccd105144a8482864132e704b94a" args="(const char *pkgOs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osOkay           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>pkgOs</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00084">84</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="rpmlib_8h-source.html#l00603">RPM_MACHTABLE_INSTOS</a>, and <a class="el" href="rpmrc_8c-source.html#l01467">rpmMachineScore()</a>.
<p>
Referenced by <a class="el" href="rpmcache_8c-source.html#l00181">ftsStashLatest()</a>, and <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="84fff53587ada32fff4921d9862ae1d0"></a><!-- doxytag: member="transaction.c::rpmtsiFi" ref="84fff53587ada32fff4921d9862ae1d0" args="(const rpmtsi tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a> rpmtsiFi           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rpmte_8h.html#19408fdbdcfced5a99647806e309f481">rpmtsi</a>&nbsp;</td>
          <td class="paramname"> <em>tsi</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return transaction element's file info. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000083">Todo:</a></b></dt><dd>Take a rpmfi refcount here. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tsi</em>&nbsp;</td><td>transaction element iterator </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>transaction element file info </dd></dl>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00964">964</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="rpmts_8c-source.html#l01399">rpmtsElement()</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="c1b193f33cc9986634695963e93ee879"></a><!-- doxytag: member="transaction.c::sharedCmp" ref="c1b193f33cc9986634695963e93ee879" args="(const void *one, const void *two)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int sharedCmp           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>two</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00093">93</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<a class="anchor" name="a3a6289c30867dad6bf0a55e5ac18662"></a><!-- doxytag: member="transaction.c::skipFiles" ref="a3a6289c30867dad6bf0a55e5ac18662" args="(const rpmts ts, rpmfi fi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void skipFiles           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rpmlib_8h.html#35d575e76e47e498176ffb43c6bd7fcb">rpmts</a>&nbsp;</td>
          <td class="paramname"> <em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpmlib_8h.html#2f4e0bf6f106ed6889162837ce39b83e">rpmfi</a>&nbsp;</td>
          <td class="paramname"> <em>fi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Skip any files that do not match install policies. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>transaction set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fi</em>&nbsp;</td><td>file info set </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00733">733</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
References <a class="el" href="system_8h-source.html#l00478">_</a>, <a class="el" href="rpmlib_8h-source.html#l00058">_free()</a>, <a class="el" href="system_8h.html#58ff5c3142f685bf7e95cc0cbfaf49c9">alloca()</a>, <a class="el" href="rpmlib_8h-source.html#l00845">FA_SKIPCOLOR</a>, <a class="el" href="rpmlib_8h-source.html#l00844">FA_SKIPNETSHARED</a>, <a class="el" href="rpmlib_8h-source.html#l00843">FA_SKIPNSTATE</a>, <a class="el" href="lib_2misc_8c-source.html#l00092">freeSplitString()</a>, <a class="el" href="parseDescription_8c-source.html#l00020">lang</a>, <a class="el" href="macro_8c-source.html#l02116">rpmExpand()</a>, <a class="el" href="macro_8c-source.html#l02139">rpmExpandNumeric()</a>, <a class="el" href="rpmfi_8c-source.html#l00109">rpmfiBN()</a>, <a class="el" href="rpmfi_8c-source.html#l00063">rpmfiDC()</a>, <a class="el" href="rpmfi_8c-source.html#l00122">rpmfiDN()</a>, <a class="el" href="rpmfi_8c-source.html#l00093">rpmfiDX()</a>, <a class="el" href="rpmfi_8c-source.html#l00282">rpmfiFColor()</a>, <a class="el" href="rpmfi_8c-source.html#l00155">rpmfiFFlags()</a>, <a class="el" href="rpmfi_8c-source.html#l00181">rpmfiFMode()</a>, <a class="el" href="rpmfi_8c-source.html#l00434">rpmfiInit()</a>, <a class="el" href="rpmfi_8c-source.html#l00468">rpmfiInitD()</a>, <a class="el" href="rpmlib_8h-source.html#l00477">RPMFILE_CONFIG</a>, <a class="el" href="rpmlib_8h-source.html#l00478">RPMFILE_DOC</a>, <a class="el" href="rpmfi_8c-source.html#l00410">rpmfiNext()</a>, <a class="el" href="rpmfi_8c-source.html#l00448">rpmfiNextD()</a>, <a class="el" href="rpmmessages_8h-source.html#l00011">RPMMESS_DEBUG</a>, <a class="el" href="rpmmessages_8h-source.html#l00020">rpmMessage</a>, <a class="el" href="rpmlib_8h-source.html#l01010">RPMTRANS_FLAG_NOCONFIGS</a>, <a class="el" href="rpmlib_8h-source.html#l00974">RPMTRANS_FLAG_NODOCS</a>, <a class="el" href="rpmts_8c-source.html#l01463">rpmtsColor()</a>, <a class="el" href="rpmts_8c-source.html#l01416">rpmtsFlags()</a>, <a class="el" href="lib_2misc_8c-source.html#l00053">splitString()</a>, <a class="el" href="rpmfi_8c-source.html#l00504">whatis()</a>, <a class="el" href="rpmlib_8h-source.html#l00861">XDIR</a>, and <a class="el" href="rpmlib_8h-source.html#l00848">XFA_SKIPPING</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l01406">rpmtsRun()</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a574c3601ca74717a42fa7c121f986f9"></a><!-- doxytag: member="transaction.c::_fps_debug" ref="a574c3601ca74717a42fa7c121f986f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="transaction_8c.html#a574c3601ca74717a42fa7c121f986f9">_fps_debug</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00304">304</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
</div>
</div><p>
<a class="anchor" name="de4e269a1a065f951fab6b3e456cf3c0"></a><!-- doxytag: member="transaction.c::_linear_fps_search" ref="de4e269a1a065f951fab6b3e456cf3c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="transaction_8c.html#de4e269a1a065f951fab6b3e456cf3c0">_linear_fps_search</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="transaction_8c-source.html#l00359">359</a> of file <a class="el" href="transaction_8c-source.html">transaction.c</a>.
<p>
Referenced by <a class="el" href="transaction_8c-source.html#l00361">findFps()</a>.
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 12 08:44:55 2007 for rpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
